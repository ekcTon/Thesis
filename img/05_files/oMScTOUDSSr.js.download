if (self.CavalryLogger) { CavalryLogger.start_js(["HYh0Z"]); }

__d("VideoBroadcastType",[],(function(a,b,c,d,e,f){e.exports={VALUE_TO_NAME:["REGULAR","AMBIENT"]}}),null);
__d("ReactComposerLiveBroadcastPreviewActionType",["keyMirrorRecursive"],(function(a,b,c,d,e,f){e.exports=b("keyMirrorRecursive")({SET_BROADCAST_CONFIG:null,SET_CONTENT_TAGS:null,SET_HAS_VIDEO_STREAM:null,SET_SELECTED_TAB:null,SET_TITLE:null,SET_COMMENT_MODES:null,SET_COPYRIGHTED:null,SET_COPYRIGHT_CONTENT_CATEGORY:null,SET_COPYRIGHT_MONITORING_TYPE:null,SET_COPYRIGHT_RULE_ID:null,SET_COPYRIGHT_OWNERSHIP_COUNTRIES:null,SET_COPYRIGHT_WHITELISTED_FB_USERS:null,SET_COPYRIGHT_WHITELISTED_IG_USERNAMES:null,SET_DID_CLICK_SAVE:null,SET_POST_FINISHED:null,SET_BROADCAST_TYPE:null,SET_EMBEDDABLE:null,SET_VOD_DISABLED:null,SET_DISTURBING:null,SET_MANUAL_GO_LIVE:null,SET_ATTRIBUTION_TAG:null,SET_EPISODE_DATA:null,SET_ATTRIBUTION_APP_ID:null},"LIVE_BROADCASTS")}),null);
__d("ComposerVideoTabsIdentifiers",[],(function(a,b,c,d,e,f){e.exports={ADBREAKS:"ad-breaks-tab",ATTRIBUTIONS:"attributions-tab",BASIC:"basic-tab",DESTINATION:"destination-tab",ADVANCED:"advanced-tab",CAPTIONS:"captions-tab",SPHERICAL:"spherical-controls-tab",PERMISSIONS:"permissions-tab",RIGHTS:"rights-tab",WHITELIST:"whitelist-tab",SUMMARY:"summary-tab",HISTORY:"history-tab"}}),null);
__d("ReactComposerLiveBroadcastPreviewStore",["ComposerVideoTabsIdentifiers","PrivacyConst","ReactComposerAudienceActionTypes","ReactComposerLiveBroadcastPreviewActionType","ReactComposerStoreBase","VideoBroadcastType","VideoCopyrightUtils"],(function(a,b,c,d,e,f){__p&&__p();a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;c=a.call(this,function(){return{accessToken:"",attributionAppID:"",areCopyrightCountriesIncluded:!0,broadcastID:"",broadcastType:"",contentTags:[],attributionTag:null,commentModes:[],composerType:"",copyrighted:!1,copyrightMonitoringType:b("VideoCopyrightUtils").DEFAULT_LIVE_MONITORING_TYPE,copyrightRuleID:null,copyrightWhitelistedFBUsers:[],copyrightWhitelistedIGUserNames:[],copyrightOwnershipCountries:[],disturbing:!1,embeddable:!0,embeddedHtml:"",embedUrl:"",hasVideoStream:!1,isEditing:!1,isLive:!1,isScheduled:!1,isManualMode:!1,isManualGoLive:!1,privacy:null,postFinished:!1,selectedTab:b("ComposerVideoTabsIdentifiers").BASIC,showKey:!1,streamURL:"",secureStreamURL:"",title:"",videoID:"",vodDisabled:!1,plannedStartTime:null,scheduleLobbyOpenTime:null,scheduleExpirationTime:null,selectedCategory:null,didClickSave:!1}},function(a){__p&&__p();switch(a.type){case b("ReactComposerLiveBroadcastPreviewActionType").SET_BROADCAST_CONFIG:d&&d.$ReactComposerLiveBroadcastPreviewStore1(a);break;case b("ReactComposerLiveBroadcastPreviewActionType").SET_CONTENT_TAGS:d&&d.$ReactComposerLiveBroadcastPreviewStore2(a);break;case b("ReactComposerLiveBroadcastPreviewActionType").SET_ATTRIBUTION_TAG:d&&d.$ReactComposerLiveBroadcastPreviewStore3(a);break;case b("ReactComposerLiveBroadcastPreviewActionType").SET_HAS_VIDEO_STREAM:d&&d.$ReactComposerLiveBroadcastPreviewStore4(a);break;case b("ReactComposerLiveBroadcastPreviewActionType").SET_SELECTED_TAB:d&&d.$ReactComposerLiveBroadcastPreviewStore5(a);break;case b("ReactComposerLiveBroadcastPreviewActionType").SET_TITLE:d&&d.$ReactComposerLiveBroadcastPreviewStore6(a);break;case b("ReactComposerLiveBroadcastPreviewActionType").SET_SHOW_KEY:d&&d.$ReactComposerLiveBroadcastPreviewStore7(a);break;case b("ReactComposerLiveBroadcastPreviewActionType").SET_COMMENT_MODES:d&&d.$ReactComposerLiveBroadcastPreviewStore8(a);break;case b("ReactComposerLiveBroadcastPreviewActionType").SET_COPYRIGHTED:d&&d.$ReactComposerLiveBroadcastPreviewStore9(a);break;case b("ReactComposerLiveBroadcastPreviewActionType").SET_COPYRIGHT_CONTENT_CATEGORY:d&&d.$ReactComposerLiveBroadcastPreviewStore10(a);break;case b("ReactComposerLiveBroadcastPreviewActionType").SET_COPYRIGHT_MONITORING_TYPE:d&&d.$ReactComposerLiveBroadcastPreviewStore11(a);break;case b("ReactComposerLiveBroadcastPreviewActionType").SET_COPYRIGHT_RULE_ID:d&&d.$ReactComposerLiveBroadcastPreviewStore12(a);break;case b("ReactComposerLiveBroadcastPreviewActionType").SET_COPYRIGHT_WHITELISTED_FB_USERS:d&&d.$ReactComposerLiveBroadcastPreviewStore13(a);break;case b("ReactComposerLiveBroadcastPreviewActionType").SET_COPYRIGHT_WHITELISTED_IG_USERNAMES:d&&d.$ReactComposerLiveBroadcastPreviewStore14(a);break;case b("ReactComposerLiveBroadcastPreviewActionType").SET_COPYRIGHT_OWNERSHIP_COUNTRIES:d&&d.$ReactComposerLiveBroadcastPreviewStore15(a);break;case b("ReactComposerLiveBroadcastPreviewActionType").SET_DID_CLICK_SAVE:d&&d.$ReactComposerLiveBroadcastPreviewStore16(a);break;case b("ReactComposerLiveBroadcastPreviewActionType").SET_POST_FINISHED:d&&d.$ReactComposerLiveBroadcastPreviewStore17(a);break;case b("ReactComposerLiveBroadcastPreviewActionType").SET_BROADCAST_TYPE:d&&d.$ReactComposerLiveBroadcastPreviewStore18(a);break;case b("ReactComposerLiveBroadcastPreviewActionType").SET_EMBEDDABLE:d&&d.$ReactComposerLiveBroadcastPreviewStore19(a);break;case b("ReactComposerLiveBroadcastPreviewActionType").SET_VOD_DISABLED:d&&d.$ReactComposerLiveBroadcastPreviewStore20(a);break;case b("ReactComposerLiveBroadcastPreviewActionType").SET_DISTURBING:d&&d.$ReactComposerLiveBroadcastPreviewStore21(a);break;case b("ReactComposerLiveBroadcastPreviewActionType").SET_MANUAL_GO_LIVE:d&&d.$ReactComposerLiveBroadcastPreviewStore22(a);break;case b("ReactComposerAudienceActionTypes").SET_AUDIENCE:d&&d.$ReactComposerLiveBroadcastPreviewStore23(a);break;case b("ReactComposerLiveBroadcastPreviewActionType").SET_EPISODE_DATA:d&&d.$ReactComposerLiveBroadcastPreviewStore24(a);break;case b("ReactComposerLiveBroadcastPreviewActionType").SET_ATTRIBUTION_APP_ID:d&&d.$ReactComposerLiveBroadcastPreviewStore25(a);break}})||this;d=babelHelpers.assertThisInitialized(c);return c}var d=c.prototype;d.getSelectedTab=function(a){return this.getComposerData(a).selectedTab};d.getTitle=function(a){return this.getComposerData(a).title};d.shouldShowKey=function(a){return this.getComposerData(a).showKey};d.getAccessToken=function(a){return this.getComposerData(a).accessToken};d.getStreamURL=function(a){return this.getComposerData(a).streamURL};d.getSecureStreamURL=function(a){return this.getComposerData(a).secureStreamURL};d.getVideoID=function(a){return this.getComposerData(a).videoID};d.getEmbeddable=function(a){return this.getComposerData(a).embeddable};d.getVodDisabled=function(a){return this.getComposerData(a).vodDisabled};d.getDisturbing=function(a){return this.getComposerData(a).disturbing};d.getCommentModes=function(a){return this.getComposerData(a).commentModes};d.getCopyrighted=function(a){return this.getComposerData(a).copyrighted};d.getCopyrightID=function(a){return this.getComposerData(a).copyrightID};d.getCopyrightContentCategory=function(a){return this.getComposerData(a).selectedCategory};d.getCopyrightMonitoringType=function(a){return this.getComposerData(a).copyrightMonitoringType};d.getCopyrightRuleID=function(a){return this.getComposerData(a).copyrightRuleID};d.getCopyrightWhitelistedFBUsers=function(a){return this.getComposerData(a).copyrightWhitelistedFBUsers};d.getCopyrightWhitelistedIGUserNames=function(a){return this.getComposerData(a).copyrightWhitelistedIGUserNames};d.getCopyrightOwnershipCountries=function(a){return this.getComposerData(a).copyrightOwnershipCountries};d.getAreCopyrightCountriesIncluded=function(a){return this.getComposerData(a).areCopyrightCountriesIncluded};d.getBroadcastID=function(a){return this.getComposerData(a).broadcastID};d.getComposerType=function(a){return this.getComposerData(a).composerType};d.getContentTags=function(a){return this.getComposerData(a).contentTags};d.getAttributionTag=function(a){return this.getComposerData(a).attributionTag};d.getEmbeddedHtml=function(a){return this.getComposerData(a).embeddedHtml};d.getEmbedUrl=function(a){return this.getComposerData(a).embedUrl};d.getPlannedStartTime=function(a){return this.getComposerData(a).plannedStartTime};d.getScheduleLobbyOpenTime=function(a){return this.getComposerData(a).scheduleLobbyOpenTime};d.getScheduleExpirationTime=function(a){return this.getComposerData(a).scheduleExpirationTime};d.getBroadcastType=function(a){return this.getComposerData(a).broadcastType};d.getPrivacy=function(a){return this.getComposerData(a).privacy};d.getAttributionAppID=function(a){return this.getComposerData(a).attributionAppID};d.hasVideoStream=function(a){return this.getComposerData(a).hasVideoStream};d.isEditing=function(a){return this.getComposerData(a).isEditing};d.isLive=function(a){return this.getComposerData(a).isLive};d.isScheduled=function(a){return this.getComposerData(a).isScheduled};d.isManualMode=function(a){return this.getComposerData(a).isManualMode};d.isManualGoLive=function(a){return this.getComposerData(a).isManualGoLive};d.getEpisodeData=function(a){return this.getComposerData(a).episodeData};d.postFinished=function(a){return this.getComposerData(a).postFinished};d.saveClicked=function(a){return this.getComposerData(a).didClickSave};d.$ReactComposerLiveBroadcastPreviewStore1=function(a){__p&&__p();a=this.validateAction(a,["composerID","config"]);var c=a[0];a=a[1];this.getComposerData(c).accessToken=a.accessToken;this.getComposerData(c).broadcastID=a.broadcastID;this.getComposerData(c).isEditing=a.isEditing;this.getComposerData(c).isLive=a.isLive;this.getComposerData(c).isScheduled=a.isScheduled;this.getComposerData(c).isManualMode=a.isManualMode;this.getComposerData(c).streamURL=a.streamURL;this.getComposerData(c).secureStreamURL=a.secureStreamURL;this.getComposerData(c).videoID=a.videoID;this.getComposerData(c).embeddable=a.embeddable;this.getComposerData(c).vodDisabled=a.vodDisabled;this.getComposerData(c).disturbing=a.disturbing;this.getComposerData(c).broadcastType=b("VideoBroadcastType").VALUE_TO_NAME[a.broadcastType];this.getComposerData(c).embeddedHtml=a.embeddedHtml;this.getComposerData(c).embedUrl=a.embedUrl;this.getComposerData(c).composerType=a.composerType;this.getComposerData(c).attributionAppID=a.attributionAppID;this.getComposerData(c).commentModes=a.commentModes;if(a.copyrightData){var d=a.copyrightData;this.getComposerData(c).copyrighted=d.copyrighted;this.getComposerData(c).copyrightID=d.copyrightID;this.getComposerData(c).copyrightMonitoringType=d.monitoringType;this.getComposerData(c).copyrightOwnershipCountries=d.ownershipCountries;this.getComposerData(c).areCopyrightCountriesIncluded=d.areCountriesIncluded;this.getComposerData(c).copyrightRuleID=d.ruleID;this.getComposerData(c).copyrightWhitelistedFBUsers=d.whitelistedFBUsers;this.getComposerData(c).copyrightWhitelistedIGUserNames=d.whitelistedIGUserNames;this.getComposerData(c).selectedCategory=d.selectedCategory}if(a.scheduleData){d=a.scheduleData;this.getComposerData(c).plannedStartTime=d.plannedStartTime;this.getComposerData(c).scheduleLobbyOpenTime=d.scheduleLobbyOpenTime;this.getComposerData(c).scheduleExpirationTime=d.scheduleExpirationTime}this.emitChange(c)};d.$ReactComposerLiveBroadcastPreviewStore2=function(a){a=this.validateAction(a,["composerID","contentTags"]);var b=a[0];a=a[1];this.getComposerData(b).contentTags=a;this.emitChange(b)};d.$ReactComposerLiveBroadcastPreviewStore3=function(a){a=this.validateAction(a,["composerID","attributionTag"]);var b=a[0];a=a[1];this.getComposerData(b).attributionTag=a;this.emitChange(b)};d.$ReactComposerLiveBroadcastPreviewStore4=function(a){a=this.validateAction(a,["composerID","hasVideoStream"]);var b=a[0];a=a[1];this.getComposerData(b).hasVideoStream=a;this.emitChange(b)};d.$ReactComposerLiveBroadcastPreviewStore23=function(a){if(!a.audience)return;a=this.validateAction(a,["composerID","audience"]);var c=a[0];a=a[1];this.getComposerData(c).privacy=Number(a);Number(a)===b("PrivacyConst").PostParam.ONLY_ME&&(this.getComposerData(c).embeddable=!1);this.emitChange(c)};d.$ReactComposerLiveBroadcastPreviewStore5=function(a){a=this.validateAction(a,["composerID","key"]);var b=a[0];a=a[1];this.getComposerData(b).selectedTab=a;this.emitChange(b)};d.$ReactComposerLiveBroadcastPreviewStore6=function(a){a=this.validateAction(a,["composerID","title"]);var b=a[0];a=a[1];this.getComposerData(b).title=a;this.emitChange(b)};d.$ReactComposerLiveBroadcastPreviewStore18=function(a){a=this.validateAction(a,["composerID","ambientChecked"]);var c=a[0];a=a[1];this.getComposerData(c).broadcastType=a?b("VideoBroadcastType").VALUE_TO_NAME[1]:b("VideoBroadcastType").VALUE_TO_NAME[0];this.emitChange(c)};d.$ReactComposerLiveBroadcastPreviewStore7=function(a){a=this.validateAction(a,["composerID","showKey"]);var b=a[0];a=a[1];this.getComposerData(b).showKey=a;this.emitChange(b)};d.$ReactComposerLiveBroadcastPreviewStore8=function(a){a=this.validateAction(a,["composerID","commentModes"]);var b=a[0];a=a[1];this.getComposerData(b).commentModes=a;this.emitChange(b)};d.$ReactComposerLiveBroadcastPreviewStore9=function(a){a=this.validateAction(a,["composerID","copyrighted"]);var b=a[0];a=a[1];this.getComposerData(b).copyrighted=a;this.emitChange(b)};d.$ReactComposerLiveBroadcastPreviewStore11=function(a){a=this.validateAction(a,["composerID","copyrightMonitoringType"]);var b=a[0];a=a[1];this.getComposerData(b).copyrightMonitoringType=a;this.emitChange(b)};d.$ReactComposerLiveBroadcastPreviewStore10=function(a){a=this.validateAction(a,["composerID","selectedCategory"]);var b=a[0];a=a[1];this.getComposerData(b).selectedCategory=a;this.emitChange(b)};d.$ReactComposerLiveBroadcastPreviewStore12=function(a){a=this.validateAction(a,["composerID","copyrightRuleID"]);var b=a[0];a=a[1];this.getComposerData(b).copyrightRuleID=a;this.emitChange(b)};d.$ReactComposerLiveBroadcastPreviewStore13=function(a){a=this.validateAction(a,["composerID","copyrightWhitelistedFBUsers"]);var b=a[0];a=a[1];this.getComposerData(b).copyrightWhitelistedFBUsers=a;this.emitChange(b)};d.$ReactComposerLiveBroadcastPreviewStore14=function(a){a=this.validateAction(a,["composerID","copyrightWhitelistedIGUserNames"]);var b=a[0];a=a[1];this.getComposerData(b).copyrightWhitelistedIGUserNames=a;this.emitChange(b)};d.$ReactComposerLiveBroadcastPreviewStore15=function(a){a=this.validateAction(a,["composerID","copyrightOwnershipCountries","areCopyrightCountriesIncluded"]);var b=a[0],c=a[1];a=a[2];this.getComposerData(b).copyrightOwnershipCountries=c;this.getComposerData(b).areCopyrightCountriesIncluded=a;this.emitChange(b)};d.$ReactComposerLiveBroadcastPreviewStore16=function(a){a=this.validateAction(a,["composerID","didClickSave"]);var b=a[0];a=a[1];this.getComposerData(b).didClickSave=a;this.emitChange(b)};d.$ReactComposerLiveBroadcastPreviewStore17=function(a){a=this.validateAction(a,["composerID","postFinished"]);var b=a[0];a=a[1];this.getComposerData(b).postFinished=a;this.emitChange(b)};d.$ReactComposerLiveBroadcastPreviewStore19=function(a){a=this.validateAction(a,["composerID","embeddable"]);var b=a[0];a=a[1];this.getComposerData(b).embeddable=a;this.emitChange(b)};d.$ReactComposerLiveBroadcastPreviewStore20=function(a){a=this.validateAction(a,["composerID","vodDisabled"]);var b=a[0];a=a[1];this.getComposerData(b).vodDisabled=a;this.emitChange(b)};d.$ReactComposerLiveBroadcastPreviewStore21=function(a){a=this.validateAction(a,["composerID","disturbing"]);var b=a[0];a=a[1];this.getComposerData(b).disturbing=a;this.emitChange(b)};d.$ReactComposerLiveBroadcastPreviewStore22=function(a){a=this.validateAction(a,["composerID","isManualGoLive"]);var b=a[0];a=a[1];this.getComposerData(b).isManualGoLive=a;this.emitChange(b)};d.$ReactComposerLiveBroadcastPreviewStore24=function(a){a=this.validateAction(a,["composerID","episodeData"]);var b=a[0];a=a[1];this.getComposerData(b).episodeData=a;this.emitChange(b)};d.$ReactComposerLiveBroadcastPreviewStore25=function(a){a=this.validateAction(a,["composerID","attributionAppID"]);var b=a[0];a=a[1];this.getComposerData(b).attributionAppID=a;this.emitChange(b)};return c}(b("ReactComposerStoreBase"));e.exports=new a()}),null);
__d("VFWebAddMemberWarning.react",["fbt","React","stylex"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;(h||(h=b("stylex"))).inject(".nfkogyam{font-size:0.8125rem}",1);h.inject(".hcekrtk9{color:var(--fds-white-alpha-50)}",1);h.inject(".j2w92w1t{padding-left:20px}",1);h.inject(".a7s4sedp{padding-right:20px}",1);h.inject(".nthtkgg5{margin-top:5px}",1);h.inject(".jroqu855{margin-bottom:5px}",1);function a(){return b("React").jsx("div",{className:"jroqu855 nthtkgg5 a7s4sedp j2w92w1t hcekrtk9 nfkogyam",children:g._("\u0e04\u0e19\u0e17\u0e35\u0e48\u0e04\u0e38\u0e13\u0e40\u0e1e\u0e34\u0e48\u0e21\u0e25\u0e07\u0e43\u0e19\u0e27\u0e34\u0e14\u0e35\u0e42\u0e2d\u0e01\u0e25\u0e38\u0e48\u0e21\u0e19\u0e35\u0e49\u0e08\u0e30\u0e40\u0e2b\u0e47\u0e19\u0e02\u0e49\u0e2d\u0e04\u0e27\u0e32\u0e21\u0e01\u0e48\u0e2d\u0e19\u0e2b\u0e19\u0e49\u0e32\u0e43\u0e19\u0e01\u0e32\u0e23\u0e2a\u0e19\u0e17\u0e19\u0e32\u0e19\u0e35\u0e49")})}e.exports=a}),null);
__d("VFWebMaxCallMemberWarning.react",["fbt","React","VFWebIcon.react","joinClasses","stylex"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;(h||(h=b("stylex"))).inject(".hg9jxets{font-size:0.6875rem}",1);h.inject(".hcekrtk9{color:var(--fds-white-alpha-50)}",1);h.inject(".alzwoclg{display:flex}",1);h.inject(".gldv74r8{align-items:flex-end}",1);h.inject(".cqf1kptm{flex-direction:column}",1);h.inject(".k1z55t6l{font-size:0.9375rem}",1);h.inject(".oog5qr5w{line-height:1.3333}",1);h.inject(".lq84ybu9{overflow-x:hidden}",1);h.inject(".hf30pyar{overflow-y:hidden}",1);h.inject(".oshhggmv{text-overflow:ellipsis}",1);h.inject(".qm54mken{white-space:nowrap}",1);h.inject(".m6d5ke1c{color:var(--fds-white)}",1);h.inject(".aeinzg81{min-width:0}",1);h.inject(".jb7u07tx{margin-left:4px}",1);h.inject(".nfkogyam{font-size:0.8125rem}",1);h.inject(".lq84ybu9{overflow-x:hidden}",1);h.inject(".hf30pyar{overflow-y:hidden}",1);h.inject(".oshhggmv{text-overflow:ellipsis}",1);h.inject(".qm54mken{white-space:nowrap}",1);h.inject(".hcekrtk9{color:var(--fds-white-alpha-50)}",1);h.inject(".aeinzg81{min-width:0}",1);h.inject(".alzwoclg{display:flex}",1);h.inject(".jl2a5g8c{flex-direction:row}",1);h.inject(".i85zmo3j{align-items:center}",1);function a(a){var c;return(c=b("React")).jsxs("div",{className:b("joinClasses")(a.className,"cqf1kptm gldv74r8 alzwoclg hcekrtk9 hg9jxets"),children:[c.jsxs("div",{className:"i85zmo3j jl2a5g8c alzwoclg",children:[c.jsx(b("VFWebIcon.react"),{glyph:"caution-triangle",color:"white",size:16}),c.jsx("div",{className:"jb7u07tx aeinzg81 m6d5ke1c qm54mken oshhggmv hf30pyar lq84ybu9 oog5qr5w k1z55t6l",children:g._("\u0e27\u0e34\u0e14\u0e35\u0e42\u0e2d\u0e41\u0e0a\u0e17\u0e40\u0e15\u0e47\u0e21\u0e41\u0e25\u0e49\u0e27")})]}),c.jsx("div",{className:"aeinzg81 hcekrtk9 qm54mken oshhggmv hf30pyar lq84ybu9 nfkogyam",children:g._("\u0e27\u0e34\u0e14\u0e35\u0e42\u0e2d\u0e41\u0e0a\u0e17\u0e21\u0e35\u0e1c\u0e39\u0e49\u0e40\u0e02\u0e49\u0e32\u0e23\u0e48\u0e27\u0e21\u0e44\u0e14\u0e49\u0e2a\u0e39\u0e07\u0e2a\u0e38\u0e14 8 \u0e04\u0e19")})]})}e.exports=a}),null);
__d("VFWebModal.react",["React","VFWebButton.react","VFWebIcon.react","VFWebStrings","VFWebText.react","emptyFunction","joinClasses","stylex"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;(g||(g=b("stylex"))).inject("@keyframes c47ckhnv-B{0%{transform:translate(-50%,-100%);}100%{transform:translate(-50%,0);}}",1);g.inject(".djoa8rg2{background-color:#1C1E21}",1);g.inject(".alzwoclg{display:flex}",1);g.inject(".cqf1kptm{flex-direction:column}",1);g.inject(".gpr1yev6{width:420px}",1);g.inject(".fyn85a33{max-height:100%}",1);g.inject("@media (min-height:600px){.fgdovtd2.fgdovtd2{max-height:600px}}",2);g.inject(".r6ydv39a{margin-top:16px}",1);g.inject(".phjh7c7x{left:50%}",1);g.inject(".qy9lpsl4{top:50%}",1);g.inject(".khm9p5p9{position:fixed}",1);g.inject(".gaei4kxk{transform:translate(-50%,-50%)}",.1);g.inject(".idjxb2ya{border-top-left-radius:12px}",1,".idjxb2ya{border-top-right-radius:12px}");g.inject(".hkfqod77{border-top-right-radius:12px}",1,".hkfqod77{border-top-left-radius:12px}");g.inject(".bidgex17{border-bottom-right-radius:12px}",1,".bidgex17{border-bottom-left-radius:12px}");g.inject(".qdd6itll{border-bottom-left-radius:12px}",1,".qdd6itll{border-bottom-right-radius:12px}");g.inject(".phjh7c7x{left:50%}",1);g.inject(".ekq1a7f9{top:0}",1);g.inject(".khm9p5p9{position:fixed}",1);g.inject(".ofotgch5{transform:translate(-50%,0)}",.1);g.inject(".amwbuv4e{border-bottom-left-radius:12px}",1);g.inject(".t9pgwpk2{border-bottom-right-radius:12px}",1);g.inject(".jrsuzd9r{animation-duration:.3s}",1);g.inject(".t92fagy3{animation-name:c47ckhnv-B}",1);g.inject(".n437zhva{animation-timing-function:ease-out}",1);g.inject(".alzwoclg{display:flex}",1);g.inject(".jl2a5g8c{flex-direction:row}",1);g.inject(".jez8cy9q{flex-shrink:0}",1);g.inject(".h6ft4zvz{padding-top:20px}",1);g.inject(".q6feio67{padding-bottom:20px}",1);g.inject(".q5qw6xdq{padding-left:16px}",1);g.inject(".s1hqh9jm{padding-right:16px}",1);g.inject(".alzwoclg{display:flex}",1);g.inject(".cqf1kptm{flex-direction:column}",1);g.inject(".lq84ybu9{overflow-x:hidden}",1);g.inject(".hf30pyar{overflow-y:hidden}",1);g.inject(".jq45cqjh{height:10000px}",1);g.inject(".h6ft4zvz{padding-top:20px}",1);g.inject(".q6feio67{padding-bottom:20px}",1);g.inject(".q5qw6xdq{padding-left:16px}",1);g.inject(".s1hqh9jm{padding-right:16px}",1);g.inject(".alzwoclg{display:flex}",1);g.inject(".jl2a5g8c{flex-direction:row}",1);g.inject(".i85zmo3j{align-items:center}",1);g.inject(".jez8cy9q{flex-shrink:0}",1);g.inject(".h6ft4zvz{padding-top:20px}",1);g.inject(".ez8dtbzv{padding-bottom:16px}",1);g.inject(".q5qw6xdq{padding-left:16px}",1);g.inject(".s1hqh9jm{padding-right:16px}",1);g.inject(".alzwoclg{display:flex}",1);g.inject(".alzwoclg{display:flex}",1);g.inject(".jl2a5g8c{flex-direction:row}",1);g.inject(".siu44isn{justify-content:flex-end}",1);g.inject(".fhfp1cgp{flex:1}",.1);g.inject(".alzwoclg{display:flex}",1);g.inject(".i85zmo3j{align-items:center}",1);g.inject(".r0esl6yt{height:30px}",1);g.inject(".f9xcifuu{padding-top:6px}",1);g.inject(".i5oewl5a{padding-right:6px}",1,".i5oewl5a{padding-left:6px}");g.inject(".bmgto6uh{padding-bottom:6px}",1);g.inject(".nnzkd6d7{padding-left:6px}",1,".nnzkd6d7{padding-right:6px}");g.inject(".ka0azl47{padding-left:10px}",1);g.inject(".evpwb5b3{padding-right:10px}",1);g.inject(".juxnsli8{margin-left:10px}",1);g.inject(".jpszfiqn{color:var(--fds-white-text)}",1);g.inject(".f5m7p0br{border-top:none}",.3);g.inject(".iwso50tu{border-right:none}",.3,".iwso50tu{border-left:none}");g.inject(".ggolc4ur{border-bottom:none}",.3);g.inject(".js4msrqk{border-left:none}",.3,".js4msrqk{border-right:none}");g.inject(".pdk0kjlo{border-top-left-radius:10px}",1,".pdk0kjlo{border-top-right-radius:10px}");g.inject(".kbmua9a3{border-top-right-radius:10px}",1,".kbmua9a3{border-top-left-radius:10px}");g.inject(".f3lj61do{border-bottom-right-radius:10px}",1,".f3lj61do{border-bottom-left-radius:10px}");g.inject(".r5a47i9s{border-bottom-left-radius:10px}",1,".r5a47i9s{border-bottom-right-radius:10px}");g.inject(".pwojg24b{background-color:var(--fds-white-alpha-20)}",1);g.inject(".bk2nvruq:hover{background-color:var(--fds-white-alpha-40)}",8);g.inject(".ka9tncxw:active{background-color:var(--fds-white-alpha-20)}",10);g.inject(".gtdfmt5o{background-color:#018eed}",1);g.inject(".hhytxud0:hover{background-color:#42acf3}",8);g.inject(".rlmb36ff:active{background-color:#018eed}",10);g.inject(".cpz3zgq0{color:var(--fds-white-alpha-30)}",1);g.inject(".pwojg24b{background-color:var(--fds-white-alpha-20)}",1);g.inject(".iciognh7:hover{background-color:var(--fds-white-alpha-20)}",8);g.inject(".ka9tncxw:active{background-color:var(--fds-white-alpha-20)}",10);g.inject(".h8lelt7y{margin-right:4px}",1);g.inject(".alzwoclg{display:flex}",1);g.inject(".jl2a5g8c{flex-direction:row}",1);g.inject(".siu44isn{justify-content:flex-end}",1);g.inject(".fhfp1cgp{flex:1}",.1);function a(a){return b("React").jsx("div",{className:"fgdovtd2 fyn85a33 gpr1yev6 cqf1kptm alzwoclg djoa8rg2"+(navigator.platform==="Win32"?" r6ydv39a":"")+" qdd6itll bidgex17 hkfqod77 idjxb2ya gaei4kxk khm9p5p9 qy9lpsl4 phjh7c7x",children:a.children})}function c(a){return b("React").jsx("div",{className:"fgdovtd2 fyn85a33 gpr1yev6 cqf1kptm alzwoclg djoa8rg2 n437zhva t92fagy3 jrsuzd9r t9pgwpk2 amwbuv4e ofotgch5 khm9p5p9 ekq1a7f9 phjh7c7x",children:a.children})}function d(a){var c=a.children;a=a.className;return b("React").jsx("div",{className:b("joinClasses")("s1hqh9jm q5qw6xdq q6feio67 h6ft4zvz jez8cy9q jl2a5g8c alzwoclg",a),children:c})}function f(a){return b("React").jsx("div",{className:"hf30pyar lq84ybu9 cqf1kptm alzwoclg"+(a.height==="full"?" jq45cqjh":"")+(a.padding==="default"?" s1hqh9jm q5qw6xdq q6feio67 h6ft4zvz":""),children:a.children})}f.defaultProps={height:"auto",padding:"default"};function h(a){return b("React").jsxs("div",{className:"s1hqh9jm q5qw6xdq ez8dtbzv h6ft4zvz jez8cy9q i85zmo3j jl2a5g8c alzwoclg",children:[b("React").jsx("div",{className:"alzwoclg",children:a.leftContent}),b("React").jsx("div",{className:"fhfp1cgp siu44isn jl2a5g8c alzwoclg",children:a.children})]})}function i(a){var c=a.use,d=a.disabled,e=a.label,f=a.onClick;a=a.icon;return b("React").jsxs("button",{className:(g||(g=b("stylex"))).dedupe({"display-1":"alzwoclg","align-items-1":"i85zmo3j","height-1":"r0esl6yt","padding-top-1":"f9xcifuu","padding-end-1":"i5oewl5a","padding-bottom-1":"bmgto6uh","padding-start-1":"nnzkd6d7","padding-left-1":"ka0azl47","padding-right-1":"evpwb5b3","margin-left-1":"juxnsli8","color-1":"jpszfiqn","border-top-0.3":"f5m7p0br","border-end-0.3":"iwso50tu","border-bottom-0.3":"ggolc4ur","border-start-0.3":"js4msrqk","border-top-start-radius-1":"pdk0kjlo","border-top-end-radius-1":"kbmua9a3","border-bottom-end-radius-1":"f3lj61do","border-bottom-start-radius-1":"r5a47i9s","background-color-1":"pwojg24b","background-color-8":"bk2nvruq","background-color-10":"ka9tncxw"},c==="confirm"?{"background-color-1":"gtdfmt5o","background-color-8":"hhytxud0","background-color-10":"rlmb36ff"}:null,d?{"color-1":"cpz3zgq0","background-color-1":"pwojg24b","background-color-8":"iciognh7","background-color-10":"ka9tncxw"}:null),disabled:d,onClick:f,children:[a&&b("React").jsx(b("VFWebIcon.react"),{className:"h8lelt7y",glyph:a,size:18}),b("React").jsx(b("VFWebText.react"),{style:"button-large",children:e})]})}i.defaultProps={use:"button",disabled:!1};i.examples=[{title:"Modal buttons",description:"Used in modal windows",render:function(){var a,c;return(a=b("React")).jsxs("div",{style:{display:"flex"},children:[a.jsx(i,{use:"confirm",label:"Done",onClick:c=b("emptyFunction")}),a.jsx(i,{label:"Cancel",onClick:c}),a.jsx(i,{disabled:!0,use:"confirm",label:"Disabled",onClick:c}),a.jsx(i,{disabled:!0,use:"confirm",label:"Call",icon:"phone",onClick:c}),a.jsx(i,{disabled:!0,use:"confirm",label:"Video chat",icon:"camcorder",onClick:c}),a.jsx(i,{use:"confirm",label:"Call",icon:"phone",onClick:c}),a.jsx(i,{use:"confirm",label:"Video chat",icon:"camcorder",onClick:c})]})}}];function j(a){a=a.onClick;return b("React").jsx("div",{className:"fhfp1cgp siu44isn jl2a5g8c alzwoclg",children:b("React").jsx(b("VFWebButton.react"),{icon:"cross",size:32,use:"transparent",label:b("VFWebStrings").close_modal,onClick:a})})}e.exports={Dialog:a,Sheet:c,Header:d,Body:f,Footer:h,Button:i,CloseButton:j}}),null);
__d("VFWebTrayLabel.react",["React","stylex"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;(g||(g=b("stylex"))).inject(".sxswz4zx{text-transform:uppercase}",1);g.inject(".hcekrtk9{color:var(--fds-white-alpha-50)}",1);g.inject(".igjjae4c{font-weight:bold}",1);g.inject(".c7y9u1f0{flex-grow:0}",1);g.inject(".jez8cy9q{flex-shrink:0}",1);g.inject(".nfkogyam{font-size:0.8125rem}",1);g.inject(".i0rxk2l3{margin-top:4px}",1);g.inject(".alzwoclg{display:flex}",1);g.inject(".i85zmo3j{align-items:center}",1);g.inject(".j2w92w1t{padding-left:20px}",1);g.inject(".a7s4sedp{padding-right:20px}",1);function a(a){return b("React").jsx("div",{className:"a7s4sedp j2w92w1t i85zmo3j alzwoclg i0rxk2l3 nfkogyam jez8cy9q c7y9u1f0 igjjae4c hcekrtk9 sxswz4zx",children:a.children})}e.exports=a}),null);
__d("VFWebBlockUserMutation",["Promise","RelayFBEnvironment","RelayModern","VFWebBlockUserMutation.graphql"],(function(a,b,c,d,e,f){"use strict";var g,h=b("RelayModern").commitMutation;b("RelayModern").graphql;var i=g!==void 0?g:g=b("VFWebBlockUserMutation.graphql");function a(a,c){return new(b("Promise"))(function(d,e){h(b("RelayFBEnvironment"),{mutation:i,variables:{input:{target_id:a,should_be_blocked:c}},optimisticResponse:{messenger_block:{messaging_actor:{__typename:"User",id:a,is_message_blocked_by_viewer:c}}},onCompleted:d,onError:e})})}e.exports=a}),null);
__d("VFWebLoadingIndicator.react",["cx","React","XUISpinner.react"],(function(a,b,c,d,e,f,g){"use strict";function a(){return b("React").jsx("div",{className:"_2mgg",children:b("React").jsx(b("XUISpinner.react"),{size:"large",className:"_2mgj"})})}e.exports=a}),null);
__d("VFWebUserRow.react",["AvailableListConstants","React","VFWebListItem.react","VFWebUserProfile.react","emptyFunction"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=this.props.availability===b("AvailableListConstants").ACTIVE,c=this.props,d=c.handleContextMenu,e=c.primaryButton,f=c.showButtonOnlyOnHover,g=c.userName,h=c.userProfileUri,i=c.userSubtitle;c=c.onClick;return b("React").jsx(b("VFWebListItem.react"),{onContextMenu:d,icon:b("React").jsx(b("VFWebUserProfile.react"),{isOnline:a,userProfileUri:h,userName:g,profileSize:50}),title:g,subtitle:i,aux:e,showAuxOnlyOnHover:f,onClick:c})};return c}(b("React").Component);a.defaultProps={handleContextMenu:b("emptyFunction")};e.exports=a}),null);
__d("VFWebIncomingCallDialogUtils",["regeneratorRuntime","RelayFBEnvironment","RelayModern","VFWebIncomingCallDialogUtils_actorQuery.graphql"],(function(a,b,c,d,e,f){__p&&__p();var g,h=b("RelayModern").fetchQuery;b("RelayModern").graphql;var i=g!==void 0?g:g=b("VFWebIncomingCallDialogUtils_actorQuery.graphql");function a(a,c,d,e){__p&&__p();var f;return b("regeneratorRuntime").async(function(g){__p&&__p();while(1)switch(g.prev=g.next){case 0:return g.abrupt("return",h(b("RelayFBEnvironment"),i,{actor_ids:c?[a].concat(c):[a],thread_id:(f=d)!=null?f:0,should_fetch_thread:!!d,picture_width:e.width,picture_height:e.height}).then(function(b){var c=b.message_thread;c=c?{name:c.thread_name,imageUri:(c=c.image)==null?void 0:c.uri}:null;b=b.messaging_actors;var d=b.find(function(b){return b.id===a});b=b.filter(function(b){return b.id!==a});d=[d].concat(b).map(j);return{participants:d,messageThread:c}}));case 1:case"end":return g.stop()}},null,this)}function j(a){return{id:a.id,shortName:a.short_name,profilePictureUri:a.profile_picture.uri,name:a.name}}e.exports={fetchIncomingCallData:a}}),null);
__d("VFRTCClientFeatureGating",["CurrentUser","VFRTCConfig","VFRTCExperiment","VFRTCExperiments","VFRTCSupport","gkx"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={isVCCallOrWorkUser:function(){return b("VFRTCConfig").isVCEndpointCall()||b("CurrentUser").isWorkUser()},canCallMWeb:function(){return b("gkx")("797400")},addScreenContentTypeInSDP:function(){return!1},draggableSelfView:function(){return b("VFRTCExperiment").gen("rtc_www_larger_self_view").getBool("draggable_self_view",!1)},endCallSurveyDropdownOptions:function(){return!this.isVCCallOrWorkUser()},fixedHeightGridView:function(){return b("VFRTCExperiments").fixedHeightGridView(b("VFRTCConfig").isVCEndpointCall(),b("CurrentUser").isWorkUser())},canUseMWVideoFilters:function(){return!b("CurrentUser").isWorkUser()&&b("VFRTCSupport").isVideoFilterEffectSupported()&&b("VFRTCExperiment").gen("rtc_www_video_chat_filters").getBool("use_filters_mw",!1)},isChatEnabled:function(){return!b("VFRTCConfig").isVCEndpointCall()},isGroupChatEnabled:function(){return!1},canUseP2PVideoFilters:function(){return!b("CurrentUser").isWorkUser()&&b("VFRTCSupport").isVideoFilterEffectSupported()&&b("gkx")("678346")&&!this.stopVideoWhenMute()},isGuestLoginEnabled:function(){return b("gkx")("678347")},useNewIncomingCallDialog:function(){return b("VFRTCExperiment").getIncomingCallExperiments().getBool("use_new_incoming_call_dialog",!1)},answerCallWithThreeButtons:function(){return b("VFRTCExperiment").getIncomingCallExperiments().getBool("use_three_buttons",!1)},callUnification:function(){return b("VFRTCExperiment").gen("rtc_www_call_unification").getBool("in_call_background_updated",!1)},waitForMediaPermission:function(){return!1},shouldUseRealMultiwayAppID:function(){return b("gkx")("678349")},canUseMultiwaySandbox:function(){return b("gkx")("678350")},stopVideoWhenMute:function(){if(b("VFRTCConfig").isVCEndpointCall())return!1;var a=b("VFRTCExperiment").gen("turnoff_camera_when_facemute");return a.getBool("camera_off",!1)},restartVideoWithTrackAPI:function(){var a=b("VFRTCExperiment").gen("turnoff_camera_when_facemute");return a.getBool("track_api",!1)},shouldAlwaysShowRedial:function(){return!this.isVCCallOrWorkUser()},disableOpusStereo:function(){return b("gkx")("678351")},shouldApplySdpMidTranslation:function(){return b("gkx")("700608")},preserveFirefoxInactiveDataChannelBlock:function(){return b("gkx")("724606")},alwaysOpenChatTab:function(){return b("VFRTCExperiment").gen("rt_web_fb_profile_rtc_buttons").getBool("open_chat_tab",!1)},shouldAlwaysShowStarRating:function(){return b("VFRTCConfig").isVCEndpointCall()?!1:b("VFRTCExperiment").gen("rtc_www_p2p_end_call_screen").getBool("persist_star_rating",!1)},shouldShowNetworkQualityIndicator:function(){return this.isVCCallOrWorkUser()?!1:b("VFRTCExperiment").getMediaQualityExperiments().getBool("show_network_indicator",!1)},shouldMonitorNetworkQuality:function(){return this.isVCCallOrWorkUser()?!1:b("VFRTCExperiment").getMediaQualityExperiments().getBool("monitor_network_quality",!1)},preferIsacForGroupCalls:function(){return!b("VFRTCConfig").isVCEndpointCall()},shouldUseH264:function(){return b("gkx")("833124")},shouldUseSdpRenegotiation:function(){return b("gkx")("867939")},shouldUseMediaUpdateProcessor:function(){return b("gkx")("867940")}};e.exports=a}),null);
__d("VFRTCStore",["FluxStore","VFRTCDispatcher"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.call(this,b("VFRTCDispatcher"))||this}var d=c.prototype;d.__emitChange=function(){this.__emitter.emit(this.__changeEvent)};return c}(b("FluxStore"));a.__moduleID=e.id;e.exports=a}),null);
__d("VFRTCIceStatsParser",[],(function(a,b,c,d,e,f){__p&&__p();var g=null;a=function(){"use strict";__p&&__p();function a(){}a.getInstance=function(){g||(g=new a());return g};var b=a.prototype;b.extractIceInfo=function(a){var b=[];a=a.split("\r\n");for(var c=0;c<a.length;c++){var d=a[c];this.$1(d)&&b.push({gen:this.$2(d),type:this.$3(d)})}return b};b.$1=function(a){return a.indexOf("candidate:")>-1};b.$2=function(a){var b=0;a=a.match(/generation (\d+)/);a&&(b=parseInt(a[1],10));return b};b.$3=function(a){a=a.match(/typ (host|relay|srflx|prflx)/);if(a)return a[1];else return"unknown"};return a}();e.exports=a}),null);
__d("VFRTCMediaMetricTracker",["performanceNow"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h={count:0,current:-1,first:-1,min:-1,max:-1,mean:-1,median:-1,startedTime:-1,total:-1,updatedTime:-1};a=function(){__p&&__p();function a(){this.$1={},this.$2={},this.$3={}}var c=a.prototype;c.getVideoStreamReportKeys=function(){return Object.keys(this.$3)};c.getJitterStreamReportKey=function(){return Object.keys(this.$1)};c.getAudioStreamReportKeys=function(){return Object.keys(this.$2)};c.addJitterBufferDelay=function(a,b){b!==null&&b!==void 0&&(this.$1[a]||(this.$1[a]=[]),this.$1[a].push(b))};c.setVideoMetric=function(a,b,c){c!==null&&c!==void 0&&(this.$3[a]||(this.$3[a]={}),this.$3[a][b]=this.$4(this.$3[a][b],c))};c.$4=function(a,c){__p&&__p();if(a!==null&&a!==void 0){a.current=c;a.updatedTime=(g||(g=b("performanceNow")))();a.total+=c;a.count+=1;a.min=Math.min(a.min,c);a.max=Math.max(a.max,c);a.mean=a.total/a.count;return a}else return{min:c,max:c,total:c,count:1,mean:c,first:c,startedTime:(g||(g=b("performanceNow")))(),current:c,updatedTime:g()}};c.getVideoMetric=function(a,b){return this.$3[a]?this.$3[a][b]:null};c.addMetricStat=function(a,b,c){c!==null&&c!==void 0&&(this.$2[a]||(this.$2[a]={}),this.$2[a][b]=this.$4(this.$2[a][b],c))};c.getMetricStats=function(a,b){return!this.$2[a]?null:this.$2[a][b]};c.getJitterBufferStats=function(a){__p&&__p();if(!this.$1[a])return h;var b=this.$1[a].length;if(b===0)return h;this.$1[a].sort(function(a,b){return a-b});var c=this.$1[a].reduce(function(a,b){return a+b});if(b%2===0){var d=Math.floor((b-1)/2),e=Math.ceil((b-1)/2);d=(this.$1[a][d]+this.$1[a][e])/2}else d=this.$1[a][(b-1)/2];return{max:this.$1[a][b-1],min:this.$1[a][0],mean:c/b,median:d,total:c,count:b,first:-1,startedTime:-1,current:-1,updatedTime:-1}};c.toJsonString=function(){return JSON.stringify({stats:this.$2,jitterBufferDelays:this.$1,videoMetric:this.$3})};a.fromJsonString=function(b){var c=new a();try{b=JSON.parse(b),b=b}catch(a){return c}b.stats&&(c.$2=b.stats);b.jitterBufferDelays&&(c.$1=b.jitterBufferDelays);b.videoMetric&&(c.$3=b.videoMetric);return c};return a}();e.exports=a}),null);
__d("VFRTCMediaMetricsConst",[],(function(a,b,c,d,e,f){"use strict";a={JITTER:"jitter",ACCELERATE_RATE:"accelerate_rate",DECODING_CNG:"decoding_cng",DECODING_NORMAL:"decoding_normal",DECODING_PLC:"decoding_plc",DECODING_PLC_CNG:"decoding_plc_cng",DISCARD_RATE:"discard_rate",EXPAND_RATE:"expand_rate",PREEMPTIVE_RATE:"preemptive_rate",AUDIO_PACKETS_RECEIVED:"audio_packets_received",AUDIO_PACKETS_RECEIVED_LOST:"audio_packets_received_lost",AUDIO_PACKETS_SENT:"audio_packets_sent",AUDIO_PACKETS_SENT_LOST:"audio_packets_sent_lost",VIDEO_BYTES_RECEIVED:"video_bytes_received",VIDEO_BYTES_SENT:"video_bytes_sent",INBOUND_QP:"inbound_qp",OUTBOUND_QP:"outbound_qp",FRAMES_ENCODED:"frames_encoded",FRAMES_DECODED:"frames_decoded",VIDEOBWE_SEND_BANDWIDTH:"videobwe_send_bandwidth",VIDEOBWE_TRANSMIT_BITRATE:"videobwe_transmit_bitrate",VIDEOBWE_RETRANSMIT_BITRATE:"videobwe_retransmit_bitrate",AUDIO_BYTES_SENT:"audio_bytes_sent",AUDIO_BYTES_RECEIVED:"audio_bytes_received",VIDEO_PKTS_SENT:"video_pkts_sent",VIDEO_PKTS_SEND_LOST:"video_pkts_send_lost",VIDEO_PKTS_RECEIVED:"video_pkts_received",VIDEO_PKTS_RECV_LOST:"video_pkts_receive_lost",AUDIO_RTT_RECEIVED:"audio_rtt_received",AUDIO_RTT_SENT:"audio_rtt_sent"};e.exports=a}),null);
__d("VFRTCgenerateRTCCallID",["randomInt"],(function(a,b,c,d,e,f){"use strict";function a(){return b("randomInt")(0,4294967294)+1}e.exports=a}),null);
__d("VFRTCSVGIcon.react",["React"],(function(a,b,c,d,e,f){"use strict";var g=b("React").Children;a=function(a){var c=a.children;a=babelHelpers.objectWithoutPropertiesLoose(a,["children"]);return b("React").cloneElement(g.only(c),babelHelpers["extends"]({preserveAspectRatio:"xMidYMid meet"},a))};e.exports=a}),null);
__d("VFRTCAbstractButton.react",["cx","AbstractButton.react","React","VFRTCSVGIcon.react","joinClasses","throttle"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=function(a){var b=d.props.disabled;if(b){a.preventDefault();return}d.props.shouldThrottle?d.$2():d.props.onClick()},d.$2=b("throttle")(function(){d.props.onClick()},500),c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.render=function(){var a=this.props,c=a.children,d=a.className,e=a.disabled,f=a.highlighted,g=a.title;a=babelHelpers.objectWithoutPropertiesLoose(a,["children","className","disabled","highlighted","title"]);c=b("React").jsx(b("VFRTCSVGIcon.react"),{className:"_4uwr",children:c});return b("React").jsx(b("AbstractButton.react"),babelHelpers["extends"]({"aria-disabled":e,className:b("joinClasses")(d,"_4uwq"+(!e&&f?" highlighted":"")),"data-hover":e?"none":"tooltip",image:c,label:g},a,{onClick:this.$1}))};return c}(b("React").PureComponent);a.defaultProps={highlighted:!1,disabled:!1,labelIsHidden:!0,shouldThrottle:!0};e.exports=a}),null);
__d("VFRTCCallControlsButtonWithLabel.react",["cx","React","VFRTCAbstractButton.react"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=babelHelpers["extends"]({},this.props);return b("React").jsxs("div",{className:"_6-lr",children:[b("React").jsx(b("VFRTCAbstractButton.react"),babelHelpers["extends"]({"data-hover":"none",labelIsHidden:!0},a)),b("React").jsx("div",{className:"_6-ls",children:this.props.title})]})};return c}(b("React").PureComponent);a.defaultProps={highlighted:!1,disabled:!1,labelIsHidden:!0,shouldThrottle:!0};e.exports=a}),null);
__d("VFRTCUICameraIcon.react",["React","VFRTCSVGIcon.react"],(function(a,b,c,d,e,f){"use strict";a=function(a){var c=a.strikeThrough;c=c===void 0?!1:c;a=babelHelpers.objectWithoutPropertiesLoose(a,["strikeThrough"]);return b("React").jsx(b("VFRTCSVGIcon.react"),babelHelpers["extends"]({},a,{children:b("React").jsx("svg",{viewBox:"0 0 48 48",children:c?b("React").jsx("path",{d:"M36 29h1V19h-1v10zm-6-2.727L35 29V19l-5 2.727v4.546zM19.344 17H26c1.126 0 2 .938 2 2v10c0 .54-.225 1.047-.595 1.415L19.345 17zm-3.5 0H15c-1.126 0-2 .938-2 2v10c0 1.062.874 2 2 2h9.257l-8.413-14zm11.408 17.044l.857-.516-12.362-20.572-.857.516 12.362 20.572z"}):b("React").jsx("path",{d:"M26 17H15c-1.126 0-2 .938-2 2v10c0 1.062.874 2 2 2h11c1.126 0 2-.938 2-2V19c0-1.062-.874-2-2-2zm10 12h1V19h-1v10zm-6-2.727L35 29V19l-5 2.727v4.546z"})})}))};e.exports=a}),null);
__d("VFRTCUIPhoneIcon.react",["React","VFRTCSVGIcon.react"],(function(a,b,c,d,e,f){"use strict";a=function(a){var c=a.variant;c=c===void 0?"start call":c;a=babelHelpers.objectWithoutPropertiesLoose(a,["variant"]);return b("React").jsx(b("VFRTCSVGIcon.react"),babelHelpers["extends"]({},a,{children:b("React").jsx("svg",{viewBox:"0 0 48 48",children:c==="start call"?b("React").jsx("path",{d:"M32.3 33.3c-4.2 3.5-12.6-4.7-12.8-4.9C19.4 28.3 10.9 20 14.5 15.9C17.2 12.8 17.9 14 18.3 14.3c.3 .3 2.9 4 3 4.7C21.5 19.7 20 21.5 20 22.1c.1 .6 1.8 2.5 2.6 3.3c.7 .7 2.7 2.4 3.3 2.5c.6 .1 2.4-1.4 3.1-1.3c.8 .1 4.5 2.7 4.8 3C34.2 29.9 35.4 30.7 32.3 33.3"}):b("React").jsx("path",{d:"M12.054 24.58C12.52 19.102 24.34 19.002 24.54 19c.202 0 12.024-.1 12.408 5.37.284 4.048-1.092 3.74-1.56 3.778-.41.033-4.823-.767-5.452-1.19-.63-.422-.785-2.703-1.293-3.094-.507-.39-3.092-.51-4.134-.502-1.043.01-3.63.174-4.143.572-.513.4-.702 2.683-1.337 3.117-.636.434-5.062 1.31-5.47 1.283-.47-.03-1.85.3-1.506-3.753"})})}))};e.exports=a}),null);
__d("VFRTCUIXIcon.react",["React","VFRTCSVGIcon.react"],(function(a,b,c,d,e,f){"use strict";a=function(a){return b("React").jsx(b("VFRTCSVGIcon.react"),babelHelpers["extends"]({},a,{children:b("React").jsx("svg",{viewBox:"0 0 48 48",children:b("React").jsx("path",{d:"M24 25.4l-4.9 4.9c-.4 .4-1 .4-1.4 0c-.4-.4-.4-1 0-1.4L22.6 24L17.6 19.1c-.4-.4-.4-1 0-1.4c.4-.4 1-.4 1.4 0L24 22.6l4.9-4.9c.4-.4 1-.4 1.4 0c.4 .4 .4 1 0 1.4L25.4 24l4.9 4.9c.4 .4 .4 1 0 1.4c-.4 .4-1 .4-1.4 0L24 25.4z"})})}))};e.exports=a}),null);
__d("VFRTCOneVCStoreState",["immutable"],(function(a,b,c,d,e,f){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(b("immutable").Record({meetingID:null,meetingPassword:null,participants:[]}));e.exports=a}),null);
__d("VFRTCOneVCStore",["invariant","FluxReduceStore","VFRTCAppDispatcher","VFRTCConfig","VFRTCOneVCStoreState"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.call(this,b("VFRTCAppDispatcher"))||this}var d=c.prototype;d.getInitialState=function(){return new(b("VFRTCOneVCStoreState"))()};d.reduce=function(a,b){switch(b.type){case"SET_MEETING_ID":return a.set("meetingID",b.meetingID);case"SET_MEETING_PASSWORD":return a.set("meetingPassword",b.meetingPassword);case"STORE_PARTICIPANTS":b=h(b.participants);return a.set("participants",b);default:return a}};d.getParticipantsSummary=function(){var a=this.getState().participants;return a.length===0?{audioParticipants:0,videoParticipants:0}:a.reduce(function(a,b){b=b.video_mute.some(function(a){return a!==!1});return b?{audioParticipants:a.audioParticipants+1,videoParticipants:a.videoParticipants}:{audioParticipants:a.audioParticipants,videoParticipants:a.videoParticipants+1}},{audioParticipants:0,videoParticipants:0})};d.getParticipants=function(){return this.getState().participants};return c}(b("FluxReduceStore"));a.__moduleID=e.id;function h(a){var c=b("VFRTCConfig").getMeetingID();c!=null||g(0,11961);var d="Facebook (Meeting ID: "+c+")";return a.filter(function(a){return!a.peer_name.includes(d)})}e.exports=new a()}),null);
__d("VFRTCgenerateRTCSignalingMessageID",["randomInt"],(function(a,b,c,d,e,f){"use strict";function a(){return b("randomInt")(0,4294967294)+1}e.exports=a}),null);
__d("VFRTCProxyUserReducer",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){switch(b.type){case"SET_PROXY_USER_MAP":var c=b.proxyUserID;b=b.proxyingAsUserID;if(!a.proxyUserToProxyingAs.has(c))return a.set("proxyingAsToProxyUser",a.proxyingAsToProxyUser.set(b,c)).set("proxyUserToProxyingAs",a.proxyUserToProxyingAs.set(c,b))}return a}e.exports={setProxyUsers:a}}),null);
__d("VFRTCProxyUserStoreState",["immutable"],(function(a,b,c,d,e,f){a=function(a){"use strict";babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(b("immutable").Record({proxyingAsToProxyUser:b("immutable").Map(),proxyUserToProxyingAs:b("immutable").Map()}));e.exports=a}),null);
__d("VFRTCProxyUserStore",["FluxReduceStore","VFRTCAppDispatcher","VFRTCProxyUserReducer","VFRTCProxyUserStoreState"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=[b("VFRTCProxyUserReducer").setProxyUsers];a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.getInitialState=function(){return new(b("VFRTCProxyUserStoreState"))()};d.reduce=function(a,b){return g.reduce(function(a,c){return c(a,b)},a)};return c}(b("FluxReduceStore"));a.__moduleID=e.id;e.exports=new a(b("VFRTCAppDispatcher"))}),null);
__d("VFRTCAudioTrackNoiseDetector",["invariant","Promise","MediaStream"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h="audio track with absolute silence",i="audio track data timeout",j='wrong track type, expected "audio"',k=100;a={ABSOLUTE_SILENCE_ERROR:h,DATA_TIMEOUT_ERROR:i,WRONG_TRACK_TYPE_ERROR:j,detect:function(a,c){__p&&__p();if("kind"in a&&a.kind!=="audio")return b("Promise").reject(new Error(j));var d=new(b("MediaStream"))();d.addTrack(a);var e=new AudioContext(),f=e.createMediaStreamSource(d),l=e.createScriptProcessor(0,1,1),m=k,n=function(){__p&&__p();l!=null||g(0,2865);l.onaudioprocess=null;l.disconnect();l=null;f!=null||g(0,2866);f.disconnect();f=null;d!=null||g(0,2867);d.removeTrack(a);d=null;e!=null||g(0,2868);return b("Promise").resolve(e.close())["catch"](function(){return b("Promise").resolve()}).then(function(){e=null})};return b("Promise").race([new(b("Promise"))(function(a,b){__p&&__p();l!=null||g(0,2865),l.onaudioprocess=function(c){__p&&__p();c=c.inputBuffer;for(var c=c.getChannelData(0),d=Array.isArray(c),e=0,c=d?c:c[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=c.length)break;f=c[e++]}else{e=c.next();if(e.done)break;f=e.value}f=f;if(f!==0){a();return}}m>0?m--:b(new Error(h))},f!=null||g(0,2866),f.connect(l),e!=null||g(0,2868),l.connect(e.destination)}),new(b("Promise"))(function(a){return window.setTimeout(a,c)}).then(function(){throw new Error(i)})]).then(function(){return n()})["catch"](function(a){return n().then(function(){throw a})})}};e.exports=a}),null);
__d("VFRTCVideoTrackActivityDetector",["invariant","Promise","MediaStream","assignMediaStream"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h="video track playback timeout",i="unexpected video track ready state",j='wrong track type, expected "video"';a={PLAYBACK_TIMEOUT_ERROR:h,WRONG_READY_STATE_ERROR:i,WRONG_TRACK_TYPE_ERROR:j,detect:function(a,c){__p&&__p();if("kind"in a&&a.kind!=="video")return b("Promise").reject(new Error(j));var d=document.createElement("video");d.muted=!0;var e=new(b("MediaStream"))();e.addTrack(a);var f,k=null,l=function(){window.clearInterval(k),d&&(d.pause(),b("assignMediaStream")(d,null),d.removeEventListener("timeupdate",f),d=null),e&&(e.removeTrack(a),e=null)};return b("Promise").race([new(b("Promise"))(function(c,h){d!=null||g(0,5995),b("assignMediaStream")(d,e),f=function(b){d!=null||g(0,5995),d.currentTime>0&&(a.readyState==="live"?(c(),l()):h(new Error(i)))},b("Promise").resolve(d.pause()).then(function(){d!=null||g(0,5995);return d.play()}).then(function(){f(),d!=null||g(0,5995),d.addEventListener("timeupdate",f),k=window.setInterval(f,50)})["catch"](function(a){return h(a)})}),new(b("Promise"))(function(a){return window.setTimeout(a,c)}).then(function(){throw new Error(h)})])["catch"](function(a){l();throw a})}};e.exports=a}),null);
__d("VFRTCMediaStreamValidator",["Promise","VFRTCAudioTrackNoiseDetector","VFRTCVideoTrackActivityDetector"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g="no audio tracks",h="no video tracks",i="too many audio tracks",j="too many video tracks",k="unexpected audio track(s)",l="unexpected video track(s)";a={NO_AUDIO_TRACKS_ERROR:g,NO_VIDEO_TRACKS_ERROR:h,TOO_MANY_AUDIO_TRACKS_ERROR:i,TOO_MANY_VIDEO_TRACKS_ERROR:j,UNEXPECTED_AUDIO_TRACKS_ERROR:k,UNEXPECTED_VIDEO_TRACKS_ERROR:l,validate:function(a,c,d,e){__p&&__p();d===void 0&&(d={});e===void 0&&(e={});d=d;var f=d.audio;f=f===void 0?!0:f;d=d.video;d=d===void 0?!0:d;e=e;var g=e.audio;g=g===void 0?1e3:g;e=e.video;e=e===void 0?1e3:e;return b("Promise").all([m(a,c,f,g),n(a,c,d,e)]).then(function(){return a})}};function m(a,c,d,e){var f=a.getAudioTracks();if(!c.audio)return f.length>0?b("Promise").reject(new Error(k)):b("Promise").resolve(a);if(f.length<1)return b("Promise").reject(new Error(g));else if(f.length>1)return b("Promise").reject(new Error(i));return d?b("VFRTCAudioTrackNoiseDetector").detect(f[0],e).then(function(){return a}):b("Promise").resolve(a)}function n(a,c,d,e){var f=a.getVideoTracks();if(!c.video)return f.length>0?b("Promise").reject(new Error(l)):b("Promise").resolve(a);if(f.length<1)return b("Promise").reject(new Error(h));else if(f.length>1)return b("Promise").reject(new Error(j));return d?b("VFRTCVideoTrackActivityDetector").detect(f[0],e).then(function(){return a}):b("Promise").resolve(a)}e.exports=a}),null);
__d("VFRTCgenerateRTCTransactionID",["randomInt"],(function(a,b,c,d,e,f){"use strict";function a(){return String(b("randomInt")(0,4294967294)+1)}e.exports=a}),null);
__d("VFRTCStatsHelpers",["Promise"],(function(a,b,c,d,e,f){__p&&__p();var g=!1,h=function(a){if(a==="host"||a==="local")return"local";if(a==="serverreflexive"||a==="srflx")return"srflx";if(a==="peerreflexive"||a==="prflx")return"prflx";return a==="relayed"||a==="relay"?"relay":"unknown_"+a},i={UNKNOWN_CONNECTION:"l:unknown-unknown;r:unknown-unknown",connectionType:function(a,b,c,d){return a!==null&&a!==void 0&&b!==null&&c!==null&&c!==void 0&&d!==null?["l:",h(a),"-",b,";","r:",h(c),"-",d].join(""):null},getVideoCapabilitiesInfo:function(a){__p&&__p();a=a.getVideoTracks();a=a[0];if(a==null)return null;if(typeof a.getCapabilities!=="function")return null;a=a.getCapabilities();var b=a.aspectRatio,c=a.facingMode,d=a.frameRate,e=a.height;a=a.width;return{facing_mode:(c=c)!=null?c:null,max_aspect_ratio:(c=b==null?void 0:b.max)!=null?c:null,max_frame_rate:(c=d==null?void 0:d.max)!=null?c:null,max_height:(d=e==null?void 0:e.max)!=null?d:null,max_width:(c=a==null?void 0:a.max)!=null?c:null,min_aspect_ratio:(e=b==null?void 0:b.min)!=null?e:null}},getMediaInputs:function(a){var b={audio_inputs:[],video_inputs:[]};a.forEach(function(a){switch(a.kind){case"videoinput":b.video_inputs.push(a.label);break;case"audioinput":b.audio_inputs.push(a.label);break}});return b},logCapabilities:function(a,b,c){a.setVideoCapabilities(i.getVideoCapabilitiesInfo(b)),a.setMediaInputs(i.getMediaInputs(c))},internalGetWindow:function(){return window},getBatteryStats:function(){return new(b("Promise"))(function(a,b){var c=i.internalGetWindow().navigator.getBattery;typeof c==="function"?a(c.call(navigator)):b()}).then(function(a){a.charging?g=!0:a.onchargingchange=function(a){a.target.charging&&(g=!0),a.target.onchargingchange=null};return{level:a.level*100,wasCharged:g}})["catch"](function(){return{placeholder:!0,level:-1,wasCharged:!1}})}};e.exports=i}),null);
__d("VFRTCCallReducer",["invariant","FBRTCParticipantCallState","FBRTCRtcResponseStatusCode","URI","VFRTCCallStore","VFRTCCallStoreState","VFRTCCallSummary","VFRTCCallSummaryStore","VFRTCConstants","VFRTCScreenSharingUtils","VFRTCUser","VFRTCUtils","immutable"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=b("VFRTCConstants").SignalingProtocol;function a(a,c){switch(c.type){case"INIT":return a.set("callInfo",a.callInfo.set("callID",c.callID).set("conferenceName",c.conferenceName).set("serverInfoData",c.serverInfoData).set("protocol",c.protocol));case"RESET":return new(b("VFRTCCallStoreState"))();case"RESET_FOR_REDIAL":return a.set("callInfo",a.callInfo.set("conferenceState","NEW").set("callID",c.callID).set("conferenceName",c.conferenceName)).set("callSummary",b("VFRTCCallSummary").nullSummary()).set("connections",b("immutable").Set()).set("remoteUsers",a.remoteUsers.map(function(a){return a.removeAllStreams()}));case"CALL_COLLISION":return a.set("callInfo",a.callInfo.set("conferenceState","NEW").set("callID",c.conferenceName).set("conferenceName",c.conferenceName)).set("remoteUsers",a.remoteUsers.map(function(a){return a.removeAllStreams()}))}return a}function c(a,b){switch(b.type){case"CALL":return a.setIn(["callInfo","conferenceState"],"CONNECTING").set("connections",a.connections.add(b.peerConnection));case"CALL_ERROR":return a.setIn(["callInfo","conferenceState"],"TERMINATED");case"CALL_SUCCESS":return b.connected?a.setIn(["callInfo","conferenceState"],"CONNECTED"):a}return a}function d(a,b){switch(b.type){case"INCOMING_CALL_SUCCESS":return a.setIn(["callInfo","conferenceState"],"CONNECTED")}return a}function f(a,c){__p&&__p();switch(c.type){case"HANGUP":a.connections.forEach(function(a){return a.close()});return a.setIn(["callInfo","conferenceState"],"TERMINATING").set("connections",b("immutable").Set()).set("remoteUsers",a.remoteUsers.map(function(a){return a.removeAllStreams()}));case"DISMISS":c.transaction.sendResponse(c.request.createResponse(b("FBRTCRtcResponseStatusCode").OK,{callID:a.callInfo.callID}));case"END_CALL":a.connections.forEach(function(a){return a.close()});return a.setIn(["callInfo","conferenceState"],"TERMINATED").set("connections",b("immutable").Set()).set("remoteUsers",a.remoteUsers.map(function(a){return a.removeAllStreams()}));case"HANGUP_ERROR":case"HANGUP_SUCCESS":return c.callID===a.callInfo.callID?a.setIn(["callInfo","conferenceState"],"TERMINATED"):a}return a}function j(a,c){__p&&__p();switch(c.type){case"GROUP_ESCALATION_CLEAR_P2P_CONNECTION":var d=b("VFRTCCallStore").getConnection(i.P2P);if(d){c=d.getRemoteStreams();var e=c[0];d.close();var f=a.localUser;if(!b("VFRTCScreenSharingUtils").isGroupCallScreenSharingSupported()){c=f.getScreenStream();if(c){var g=f.getStream();g&&b("VFRTCUtils").transferAudioTracks(g,c);b("VFRTCUtils").stopMediaStream(c);f=f.removeScreenStream(c)}}return a.withMutations(function(a){a.set("connections",a.connections.remove(d)).set("localUser",f).set("remoteUsers",a.remoteUsers.map(function(a){return a.removeStream(e)}))})}}return a}function k(a,c){__p&&__p();switch(c.type){case"GROUP_ESCALATION_CANCEL":var d=b("VFRTCCallStore").getConnection(i.MULTIWAY);if(d){var e=d.getRemoteStreams(),f=e[0],g=a.callSummary;c.p2pCallSummary&&(g=c.p2pCallSummary,b("VFRTCCallSummaryStore").getInstance().removeCallSummary(a.callSummary.peerID,a.callSummary.callID));d.close();return a.withMutations(function(a){a.set("callInfo",a.callInfo.set("conferenceState","CONNECTED").set("conferenceName",g.callID).set("protocol","p2p").set("serverInfoData","")).set("callSummary",g).set("connections",a.connections.remove(d)).set("remoteUsers",a.remoteUsers.map(function(a){return a.removeStream(f)}))})}}return a}function l(a,c){__p&&__p();switch(c.type){case"ON_PARTICIPANTS_ADDED":var d=a.remoteUsers.map(function(a){return a.FBID});return a.set("remoteUsers",a.remoteUsers.union(Object.keys(c.participants).filter(function(a){return!d.has(c.participants[a].fbid)}).map(function(a){var d=c.participants[a],e=d.big_image_src||d.image_src;c.images&&c.images[a]&&(e=c.images[a]);d.fbid||g(0,1174);return new(b("VFRTCUser"))({FBID:d.fbid,profileUrl:new(h||(h=b("URI")))(d.href),profilePictureUrl:e,isGuestUser:d.user_type==="guest",isMessengerUser:!!d.is_messenger_user,isPartiesUser:!!d.is_parties_user,userName:d.name,userShortName:d.short_name,vanity:d.vanity})})))}return a}function m(a,c){__p&&__p();switch(c.type){case"ON_CONFERENCE_STATE":var d=c.transaction,e=c.request,f=c.request.conferenceStateRequest();if(c.conferenceStateVersion>=f.version){d.sendResponse(e.createResponse(b("FBRTCRtcResponseStatusCode").OK,{body:{ConferenceStateResponse:{currentVerison:c.conferenceStateVersion}},callID:a.callInfo.callID}));return a}c.resolve(f.version);var g=a.remoteUsers.map(function(a){var c=f.participantStates[a.FBID];c&&c.state===b("FBRTCParticipantCallState").DISCONNECTED&&(a=a.removeAllStreams());return c?a.setParticipantState(c):a}),h=g.some(function(a){a=a.participantState;return a&&a.state===b("FBRTCParticipantCallState").CONNECTED});h=h?"CONNECTED":a.callInfo.conferenceState;d.sendResponse(e.createResponse(b("FBRTCRtcResponseStatusCode").OK,{body:{ConferenceStateResponse:{currentVerison:c.conferenceStateVersion}},callID:a.callInfo.callID}));return a.setIn(["remoteUsers"],g).setIn(["callInfo","conferenceState"],h)}return a}function n(a,b){switch(b.type){case"ON_JOIN_RESPONSE":return a.setIn(["callInfo","serverInfoData"],b.serverInfoData)}return a}function o(a,b){switch(b.type){case"INIT_LOCAL_USER":return a.set("localUser",b.localUser);case"INIT_REMOTE_USERS":case"UPDATE_REMOTE_USERS":return a.set("remoteUsers",b.remoteUsers);case"UPDATE_LOCAL_USER_INFO":return a.set("localUser",a.localUser.merge(b.info))}return a}function p(a,b){switch(b.type){case"AUDIO_MUTED":case"AUDIO_UNMUTED":return a.set("localUser",a.localUser.toggleMuteAudio());case"VIDEO_MUTED":return a.set("localUser",a.localUser.toggleMuteVideo(!0));case"VIDEO_UNMUTED":return a.set("localUser",a.localUser.toggleMuteVideo(!1));default:return a}}function q(a,c){__p&&__p();switch(c.type){case"ADD_LOCAL_STREAM":return a.set("localUser",a.localUser.addStream(c.stream));case"REMOVE_LOCAL_STREAM":return a.set("localUser",a.localUser.removeStream(c.stream));case"REPLACE_LOCAL_STREAM":var d=c.oldStream.getAudioTracks();d=d[0];if(d!=null)for(var e=c.newStream.getAudioTracks(),f=Array.isArray(e),g=0,e=f?e:e[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var h;if(f){if(g>=e.length)break;h=e[g++]}else{g=e.next();if(g.done)break;h=g.value}h=h;h.enabled=d.enabled}return a.set("localUser",a.localUser.replaceStream(c.oldStream,c.newStream));case"STOP_LOCAL_STREAM":return a.set("localUser",a.localUser.stopVideo());case"REMOVE_ALL_LOCAL_STREAMS":if(c.stopStreams)for(var h=a.localUser.streams,g=Array.isArray(h),f=0,h=g?h:h[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(g){if(f>=h.length)break;e=h[f++]}else{f=h.next();if(f.done)break;e=f.value}d=e;b("VFRTCUtils").stopMediaStream(d)}return a.set("localUser",a.localUser.removeAllStreams())}return a}function r(a,c){__p&&__p();switch(c.type){case"ADD_LOCAL_SCREEN_STREAM":return a.set("localUser",a.localUser.addScreenStream(c.stream));case"REMOVE_LOCAL_SCREEN_STREAM":return a.set("localUser",a.localUser.removeScreenStream(c.stream));case"REMOVE_ALL_LOCAL_SCREEN_STREAMS":if(c.stopStreams)for(var d=a.localUser.screenStreams,e=Array.isArray(d),f=0,d=e?d:d[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(e){if(f>=d.length)break;g=d[f++]}else{f=d.next();if(f.done)break;g=f.value}g=g;b("VFRTCUtils").stopMediaStream(g)}return a.set("localUser",a.localUser.removeAllScreenStreams());case"REPLACE_LOCAL_SCREEN_STREAM":return a.set("localUser",a.localUser.replaceScreenStream(c.oldStream,c.newStream))}return a}function s(a,b){__p&&__p();var c;switch(b.type){case"ADD_REMOTE_STREAM":c=w(a,b);if(!c)return a;var d=a.setIn(["remoteUsers"],a.remoteUsers["delete"](c).add(c.addStream(b.stream)));return v(d,{type:"TOGGLE_REMOTE_STREAM",mediaStatus:d.mediaStatus.toJS()});case"REMOVE_REMOTE_STREAM":c=w(a,b);return!c?a:a.setIn(["remoteUsers"],a.remoteUsers["delete"](c).add(c.removeStream(b.stream)));case"REMOVE_ALL_REMOTE_STREAMS":c=w(a,b);return!c?a:a.setIn(["remoteUsers"],a.remoteUsers["delete"](c).add(c.removeAllStreams().removeAllScreenStreams()))}return a}function t(a,b){var c;switch(b.type){case"ADD_REMOTE_TRACK":c=w(a,b);return!c?a:a.setIn(["remoteUsers"],a.remoteUsers["delete"](c).add(c.clone()));case"REMOVE_REMOTE_TRACK":c=w(a,b);return!c?a:a.setIn(["remoteUsers"],a.remoteUsers["delete"](c).add(c.clone()))}return a}function u(a,b){var c;switch(b.type){case"ADD_REMOTE_SCREEN_STREAM":c=w(a,b);return!c?a:a.setIn(["remoteUsers"],a.remoteUsers["delete"](c).add(c.addScreenStream(b.stream)));case"REMOVE_REMOTE_SCREEN_STREAM":c=w(a,b);return!c?a:a.setIn(["remoteUsers"],a.remoteUsers["delete"](c).add(c.removeScreenStream(b.stream)))}return a}function v(a,c){__p&&__p();var d;switch(c.type){case"TOGGLE_REMOTE_STREAM":return a.set("remoteUsers",Object.entries(c.mediaStatus).reduce(function(b,c){__p&&__p();var d=c[0];c=c[1];var e=b.reduce(function(b,a){var c=a.streams.map(function(a){return a.getTracks().find(function(a){return a.id===d})}).find(Boolean);return c?{user:a,track:c}:b},{}),a=e.user;e=e.track;if(a&&e){if(e.kind==="audio"&&a.isAudioMuted()===c)return b["delete"](a).add(a.toggleMuteAudio());if(e.kind==="video"&&a.isVideoMuted()===c)return b["delete"](a).add(a.toggleMuteVideo(!a.isVideoMuted()))}return b},a.remoteUsers)).set("mediaStatus",b("immutable").Map(c.mediaStatus));case"REMOTE_AUDIO_MUTED":d=w(a,c);return!d?a:a.setIn(["remoteUsers"],a.remoteUsers["delete"](d).add(d.toggleMuteAudio(!0)));case"REMOTE_AUDIO_UNMUTED":d=w(a,c);return!d?a:a.setIn(["remoteUsers"],a.remoteUsers["delete"](d).add(d.toggleMuteAudio(!1)));case"REMOTE_VIDEO_MUTED":d=w(a,c);return!d?a:a.setIn(["remoteUsers"],a.remoteUsers["delete"](d).add(d.toggleMuteVideo(!0)));case"REMOTE_VIDEO_UNMUTED":d=w(a,c);return!d?a:a.setIn(["remoteUsers"],a.remoteUsers["delete"](d).add(d.toggleMuteVideo(!1)))}return a}function w(a,b){return a.remoteUsers.find(function(a){return b.userID?a.FBID==b.userID:a.FBID===b.stream.id.split(":")[0]})}function x(a,b){switch(b.type){case"WAIT_FOR_USER_INPUT":return a.callInfo.conferenceState==="NEW"?a.setIn(["callInfo","conferenceState"],"AWAITING_USER_START"):a}return a}function y(a,c){switch(c.type){case"SET_CONNECTION_STATUS":a.remoteUsers.size===1||g(0,14763);var d=z(c.connectionStatus);return d.state===b("FBRTCParticipantCallState").UNKNOWN?a:a.set("remoteUsers",a.remoteUsers.map(function(a){return a.setParticipantState(d)}))}return a}function z(a){switch(a){case"CONTACTING":return{state:b("FBRTCParticipantCallState").CONTACTING};case"RINGING":return{state:b("FBRTCParticipantCallState").RINGING};case"CONNECTING":return{state:b("FBRTCParticipantCallState").CONNECTING};case"CONNECTED":return{state:b("FBRTCParticipantCallState").CONNECTED}}return{state:b("FBRTCParticipantCallState").UNKNOWN}}e.exports={abortMultiwayEscalationProcess:k,callInit:a,callStart:c,callEnd:f,completeTransitionToMultiway:j,onParticipantsChanged:l,incomingCallStart:d,processUsers:o,toggleLocalStream:p,processLocalStream:q,processLocalScreenStream:r,processRemoteStream:s,processRemoteScreenStream:u,processRemoteTrack:t,toggleRemoteStream:v,processConferenceState:m,processJoinResponse:n,waitForUserInput:x,setConnectionStatus:y}}),null);
__d("VFRTCCallSummaryReducer",["VFRTCCallStore","VFRTCCallSummaryStore","VFRTCLogger","VFRTCMediaMetricParser","VFRTCStatsHelpers","promiseDone"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("VFRTCLogger").Key;a={setCallSummary:function(a,b){switch(b.type){case"SET_CALL_SUMMARY":return a.set("callSummary",b.callSummary)}return a},onCallStarted:function(a,c){switch(c.type){case"INCOMING_CALL_SUCCESS":case"CALL_SUCCESS":c=function c(){var d=b("VFRTCCallStore").getState().callInfo,e=d.conferenceState;d=d.callID;e!=="TERMINATED"&&a.callInfo.callID===d&&(a.callSummary.save(b("VFRTCCallSummaryStore").getInstance()),window.setTimeout(c,1e4))};c();b("VFRTCMediaMetricParser").startCollectingMediaStats();return a}return a},onMessageSignaling:function(a,c){__p&&__p();switch(c.type){case"ON_JOIN_REQUEST_SENT":a.callSummary.setJoinRequestSent();a.callSummary.save(b("VFRTCCallSummaryStore").getInstance());return a;case"ON_RECEIVED_JOIN_RESPONSE":a.callSummary.setJoinResponseReceived();a.callSummary.save(b("VFRTCCallSummaryStore").getInstance());return a;case"ON_JOIN_RESPONSE":a.callSummary.setServerInfoData(c.serverInfoData);a.callSummary.save(b("VFRTCCallSummaryStore").getInstance());return a;case"ON_PROCESSED_JOIN_RESPONSE":a.callSummary.setJoinResponseProcessed();a.callSummary.save(b("VFRTCCallSummaryStore").getInstance());return a}return a},onCallEnded:function(a,c){__p&&__p();switch(c.type){case"CALL_ERROR":case"HANGUP":case"END_CALL":a.callSummary.onCallEnded(c.endCallReason,!1,!1,c.endCallSubreason);b("promiseDone")(b("VFRTCStatsHelpers").getBatteryStats(),function(c){a.callSummary.addExtraInfo(g.BATTERY_END,c.level),a.callSummary.setDeviceCharged(c.wasCharged),a.callSummary.save(b("VFRTCCallSummaryStore").getInstance())});a.callSummary.save(b("VFRTCCallSummaryStore").getInstance());return a;case"DISMISS":a.callSummary.onCallEnded(c.endCallReason,!0,!1,c.endCallSubreason);a.callSummary.save(b("VFRTCCallSummaryStore").getInstance());return a}return a},onSurveyResult:function(a,c){__p&&__p();switch(c.type){case"RATING_SHOWN":a.callSummary.addExtraInfo(g.RATING_SHOWN,"1");a.callSummary.save(b("VFRTCCallSummaryStore").getInstance());return a;case"FEEDBACK_SHOWN":a.callSummary.addExtraInfo(g.SURVEY_SHOWN,"1");a.callSummary.save(b("VFRTCCallSummaryStore").getInstance());return a;case"SUBMIT_RATING":a.callSummary.addExtraInfo(g.RATING,c.rating);a.callSummary.save(b("VFRTCCallSummaryStore").getInstance());return a;case"SUBMIT_FEEDBACK":a.callSummary.addExtraInfo(g.SURVEY_DETAILS,c.feedback);a.callSummary.save(b("VFRTCCallSummaryStore").getInstance());return a;case"SUBMIT_SURVEY_CHOICE":a.callSummary.addExtraInfo(g.SURVEY_CHOICE,c.surveyChoice);a.callSummary.save(b("VFRTCCallSummaryStore").getInstance());return a}return a}};e.exports=a}),null);
__d("VFRTCClientMediaUpdateReducer",["FBRTCRtcResponseStatusCode","VFRTCCallStore","VFRTCConstants","VFRTCMWProtocolHandler","VFRTCMWProtocolStore"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={reset:function(a,c){switch(c.type){case"RESET":return b("VFRTCMWProtocolStore").getInitialState()}return a},configureAudio:function(a,b){switch(b.type){case"AUDIO_MUTED":return g(a,"audio",!1);case"AUDIO_UNMUTED":return g(a,"audio",!0)}return a},configureVideo:function(a,b){switch(b.type){case"VIDEO_MUTED":return g(a,"video",!1);case"VIDEO_UNMUTED":return g(a,"video",!0)}return a},onClientMediaUpdateResponse:function(a,c){__p&&__p();switch(c.type){case"ON_CLIENT_MEDIA_UPDATE_RESPONSE":if(c.responseStatusCode!==b("FBRTCRtcResponseStatusCode").OK)return a;a=a.setIn(["clientMediaUpdateInfo","lastSyncedClientVersion"],c.currentVersion);if(a.clientMediaUpdateInfo.pendingResponse){a=a.setIn(["clientMediaUpdateInfo","pendingResponse"],!1);if(a.clientMediaUpdateInfo.pendingUpdate)return h(a.setIn(["clientMediaUpdateInfo","pendingUpdate"],!1))}return a}return a},setLocalClientVersion:function(a,b){switch(b.type){case"SET_LOCAL_CLIENT_VERSION":return a.setIn(["clientMediaUpdateInfo","lastSyncedClientVersion"],b.version).setIn(["clientMediaUpdateInfo","localMediaUpdates"],a.clientMediaUpdateInfo.localMediaUpdates.push({mediaStatus:{}}))}return a}};function g(a,c,d){var e=b("VFRTCCallStore").getConnection(b("VFRTCConstants").SignalingProtocol.MULTIWAY);if(!e)return a;e=e.getLocalTracks().reduce(function(a,b){a[b.id]=b.kind===c?d:b.enabled;return a},{});return h(a.setIn(["clientMediaUpdateInfo","localMediaUpdates"],a.clientMediaUpdateInfo.localMediaUpdates.push({mediaStatus:e})))}function h(a){if(a.clientMediaUpdateInfo.pendingResponse)return a.setIn(["clientMediaUpdateInfo","pendingUpdate"],!0);var c=a.clientMediaUpdateInfo.localMediaUpdates.reduce(function(b,c,d){d>=a.clientMediaUpdateInfo.lastSyncedClientVersion&&b.push(c);return b},[]);if(c.length===0)return a;b("VFRTCMWProtocolHandler").clientMediaUpdate(b("VFRTCCallStore").getState().callInfo.conferenceName,b("VFRTCCallStore").getState().callInfo.serverInfoData,a.clientMediaUpdateInfo.lastSyncedClientVersion,a.clientMediaUpdateInfo.localMediaUpdates.size,c);return a.setIn(["clientMediaUpdateInfo","pendingResponse"],!0)}e.exports=a}),null);
__d("VFRTCGroupCallEscalationStoreState",["immutable"],(function(a,b,c,d,e,f){a=function(a){"use strict";babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(b("immutable").Record({aborted:!1,inProgress:!1,toRing:!1,p2pCallSummary:null,readyToTransition:!1,usersToRing:null}));e.exports=a}),null);
__d("VFRTCGroupCallEscalationStoreReducer",["FBRTCParticipantCallState","VFRTCCallStore","RTCGroupCallEscalationActionTypes","VFRTCGroupCallEscalationStore","VFRTCGroupCallEscalationStoreState","VFRTCMWProtocolHandler","VFRTCP2PCallStore","VFWebLogger","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=new Set([(g=b("FBRTCParticipantCallState")).UNKNOWN,g.DISCONNECTED,g.NO_ANSWER,g.REJECTED,g.UNREACHABLE,g.CONNECTION_DROPPED,g.PARTICIPANT_LIMIT_REACHED,g.IN_ANOTHER_CALL,g.RING_TYPE_UNSUPPORTED]);function a(a,c){switch(c.type){case"GROUP_ESCALATION_CANCEL":b("VFWebLogger").logRTCCheckpoint({checkpoint:"group_escalation_cancel"});return a.withMutations(function(a){a.set("aborted",!0).set("inProgress",!1).set("toRing",!1).set("readyToTransition",!1).set("usersToRing",null)})}return a}function c(a,c){switch(c.type){case"HANGUP":case"END_CALL":case"HANGUP_ERROR":case"HANGUP_SUCCESS":return a.withMutations(function(a){a.set("aborted",!1).set("inProgress",!1).set("toRing",!1).set("usersToRing",null)});case"RESET":return new(b("VFRTCGroupCallEscalationStoreState"))()}return a}function d(a,b){switch(b.type){case"GROUP_ESCALATION_SET_P2P_CALLSUMMARY":var c=b.p2pCallSummary;if(c)return a.withMutations(function(a){a.set("p2pCallSummary",c)})}return a}function f(a,c){switch(c.type){case"GROUP_ESCALATION_START":b("VFWebLogger").logRTCCheckpoint({checkpoint:"group_escalation_start"});return a.set("inProgress",!0).set("readyToTransition",!1)}return a}function i(a,c){if(!a.readyToTransition&&a.inProgress)switch(c.type){case"ON_JOIN_REQUEST_SENT":b("VFRTCGroupCallEscalationStore").logToP2PCallSummary(function(a){return a.setEscalationConnectingToMultiway()});break;case"ON_JOIN_RESPONSE":b("VFRTCGroupCallEscalationStore").logToP2PCallSummary(function(a){a.setEscalationConnectedToMultiway(),c.serverInfoData&&a.setServerInfoData(c.serverInfoData)});break}return a}function j(a,c){__p&&__p();if(!a.readyToTransition&&a.inProgress)switch(c.type){case"ON_CONFERENCE_STATE":c=c.request.conferenceStateRequest();if(c){var d=c.participantStates;c=a.toRing;var e=!1,f=Object.keys(d).every(function(a){return d[a].state===b("FBRTCParticipantCallState").CONNECTED});if(f){b("VFWebLogger").logRTCCheckpoint({checkpoint:"group_escalation_success"});b("VFRTCGroupCallEscalationStore").logToP2PCallSummary(function(a){a.setEscalationPeerConnectedToMultiway(),a.setEscalationConnectedToMultiway(),a.setReadyToEscalate()});var g=b("VFRTCP2PCallStore").getState();g=g.protocolHandler;g.shutDownP2PListenersForMultiwayEscalation();if(a.usersToRing&&c){g=a.usersToRing.valueSeq().map(function(a){return a.fbid}).filter(Boolean).toArray();b("VFRTCMWProtocolHandler").addParticipants(b("VFRTCCallStore").getState().callInfo.conferenceName,b("VFRTCCallStore").getState().callInfo.serverInfoData,g);c=!1}}else e=Object.keys(d).some(function(a){return h.has(d[a].state)}),e&&b("VFRTCGroupCallEscalationStore").logToP2PCallSummary(function(a){return a.setInvalidP2PEscalationState()});return a.set("aborted",e).set("readyToTransition",f).set("inProgress",!(f||e)).set("toRing",c)}}return a}function k(a,b){switch(b.type){case"GROUP_ESCALATION_SET_USERS_TO_RING":if(b.usersToRing)return a.set("usersToRing",b.usersToRing).set("toRing",!0)}return a}e.exports={abortEscalation:a,callStart:f,clearStore:c,onMultiwayConnectionSignaling:i,onParticipantsConnected:j,setP2PCallSummary:d,setUsersToRing:k}}),null);
__d("VFRTCGroupCallParticipantsReducer",["MercuryIDs","VFRTCCallStore","VFRTCMWProtocolHandler","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={_participantsToRing:new Set(),initThread:function(a,b){switch(b.type){case"INIT_THREAD":return a.merge({participants:b.participants,thread:b.thread})}return a},onParticipantsChanged:function(a,c){switch(c.type){case"ON_PARTICIPANT_LEFT":return a.set("participants",a.participants["delete"](b("MercuryIDs").getParticipantIDFromUserID(c.participantFBID)));case"ON_PARTICIPANTS_ADDED":var d=Object.keys(c.participants).map(function(a){return c.participants[a].fbid}).filter(function(a){return g._participantsToRing.has(a)});d.length!==0&&(d.forEach(function(a){return g._participantsToRing["delete"](a)}),b("VFRTCMWProtocolHandler").addParticipants(b("VFRTCCallStore").getState().callInfo.conferenceName,b("VFRTCCallStore").getState().callInfo.serverInfoData,d));return a.set("participants",a.participants.merge(b("immutable").Map(c.participants)))}return a},addParticipantsToRing:function(a,b){switch(b.type){case"ADD_PARTICIPANTS_TO_RING":b.participantFBIDs.forEach(function(a){return g._participantsToRing.add(a)});return a}return a}};e.exports=g}),null);
__d("VFRTCGroupCallReducer",["FBRTCParticipantCallState","VFRTCCallStore","VFRTCConstants","VFRTCEndCallReason","VFRTCMWProtocolHandler"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("VFRTCConstants").SignalingProtocol;a={setDominantSpeaker:function(a,c){__p&&__p();switch(c.type){case"SET_DOMINANT_SPEAKER":return a.set("dominantSpeakerFBID",c.dominantSpeakerFBID);case"SET_PINNED_SPEAKER":var d=b("VFRTCCallStore").getState();d=d.callInfo;var e=b("VFRTCCallStore").getConnection(g.MULTIWAY);if(!e)return a;b("VFRTCMWProtocolHandler").subscription(d.conferenceName,d.serverInfoData,e.getRemoteStreams(),a.layout,c.pinnedSpeakerFBID);return a.set("pinnedSpeakerFBID",c.pinnedSpeakerFBID);case"ON_CONFERENCE_STATE":d=c.request.conferenceStateRequest();e=d.participantStates;c=e[a.pinnedSpeakerFBID];return c&&c.state!==b("FBRTCParticipantCallState").CONNECTED?a.set("pinnedSpeakerFBID",null):a}return a},setLayout:function(a,c){switch(c.type){case"SET_LAYOUT":var d=b("VFRTCCallStore").getState();d=d.callInfo;var e=b("VFRTCCallStore").getConnection(g.MULTIWAY);e&&b("VFRTCMWProtocolHandler").subscription(d.conferenceName,d.serverInfoData,e.getRemoteStreams(),c.layout,a.pinnedSpeakerFBID);return a.set("layout",c.layout)}return a},processEndCallReason:function(a,c){switch(c.type){case"CALL_ERROR":case"HANGUP":case"END_CALL":case"DISMISS":return a.set("endCallReason",a.endCallReason||new(b("VFRTCEndCallReason"))(c.endCallReason))}return a}};e.exports=a}),null);
__d("VFRTCP2PCallAdminMessageReducers",["FBRTCCallConstants","VFRTCAdminMessage","VFRTCAppDispatcher","VFRTCCallStore","VFRTCCallType"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("FBRTCCallConstants").FBRTCCallType;function a(a,c){switch(c.type){case"SET_CALL_SUMMARY":b("VFRTCAppDispatcher").waitFor([b("VFRTCCallStore").getDispatchToken()]);c=b("VFRTCCallStore").getState();c=c.callSummary;return a.set("adminMessage",new(b("VFRTCAdminMessage"))(c.peerID,c.callID));default:return a}}function c(a,b){switch(b.type){case"SET_CONNECTION_STATUS":var c=a.adminMessage;c&&b.connectionStatus==="CONNECTED"&&c.onCallConnected();return a;default:return a}}function d(a,c){switch(c.type){case"SET_END_CALL_REASON":var d=a.adminMessage,e=a.escalationConferenceName;d&&(d.onCallEnded(),a.isCaller&&d.submit(a.callType===b("VFRTCCallType").AUDIO_ONLY?g.VOICE_CALL:g.VIDEO_CALL,c.endCallReason.getReasonID(),e));return a;default:return a}}e.exports={processCallInit:a,processCallStart:c,processCallEnd:d}}),null);
__d("VFRTCP2PCallEscalationStoreState",["VFRTCConstants","immutable"],(function(a,b,c,d,e,f){a=b("VFRTCConstants").CallType;c=function(a){"use strict";babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(b("immutable").Record({awaitingACK:!1,callType:a.VOIP,escalated:!1,escalateMediaStream:null,failureReason:null,initiatedEscalation:!1,inProgress:!1,request:null,response:null,token:null}));e.exports=c}),null);
__d("VFRTCP2PCallEscalationStoreReducers",["VFRTCCallType","VFRTCConstants","VFRTCP2PCallEscalationStoreState","VFRTCP2PCallEscalator","VFRTCP2PCallStore","VFWebLogger"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("VFRTCConstants").CallType;a=function(a,c){__p&&__p();switch(c.type){case"P2P_CALL_ESCALATION_START":if(a.inProgress)return a;if(a.escalated||!b("VFRTCP2PCallStore").isAudioOnly())return a;b("VFWebLogger").logRTCCheckpoint({checkpoint:"video_escalation_start"});return a.withMutations(function(a){a.set("awaitingACK",!0).set("initiatedEscalation",!0).set("failureReason",null).set("inProgress",!0).set("token",b("VFRTCP2PCallStore").getState().protocolHandler.generateEscalationRequestToken(!0))});case"P2P_CALL_ESCALATION_SUCCESS":if(!a.inProgress)return a;else if("token"in c&&c.token!==a.token)return a;b("VFRTCP2PCallEscalator").onEscalationSucceeded();b("VFWebLogger").logRTCCheckpoint({checkpoint:"video_escalation_success"});return a.withMutations(function(a){a.set("awaitingACK",!1).set("callType",g.ESCALATED).set("escalated",!0).set("inProgress",!1).set("request",null).set("response",!0).set("token",null)});case"P2P_CALL_ESCALATION_FAILURE":if(!a.inProgress)return a;else if("token"in c&&c.token!==a.token)return a;b("VFRTCP2PCallEscalator").onEscalationFailed();if(c.reason==="denied"){b("VFWebLogger").logRTCCheckpoint({checkpoint:"video_escalation_denied"});return a.withMutations(function(a){a.set("awaitingACK",!1).set("initiatedEscalation",!1).set("callType",g.ESCALATION_DECLINED).set("escalated",!1).set("failureReason",c.reason||null).set("inProgress",!1).set("request",null).set("response",c.response||null).set("token",null).set("escalateMediaStream",null)})}else c.reason==="cancelled"?b("VFWebLogger").logRTCCheckpoint({checkpoint:"video_escalation_cancelled"}):c.reason==="timeout"?b("VFWebLogger").logRTCCheckpoint({checkpoint:"video_escalation_timeout"}):b("VFWebLogger").logRTCCheckpoint({checkpoint:"video_escalation_failed"});b("VFRTCP2PCallStore").getState().protocolHandler.generateEscalationRequestToken(!1);return a.withMutations(function(a){a.set("awaitingACK",!1).set("inProgress",!1).set("initiatedEscalation",!1).set("callType",g.ESCALATION_DECLINED).set("escalated",!1).set("failureReason",c.reason).set("token",null).set("escalateMediaStream",null)});case"SET_P2P_CALL_ESCALATION_MEDIA":return a.set("escalateMediaStream",c.stream);default:return a}};c=function(a,c){__p&&__p();switch(c.type){case"P2P_CALL_ESCALATION_SET_REQUEST":var d=c.request;if(d==null)return a;return!b("VFRTCP2PCallEscalator").requestVideoOn(d.msg)?a.withMutations(function(a){a.set("awaitingACK",!1).set("inProgress",!1).set("request",null).set("response",null).set("token",null)}):a.withMutations(function(a){a.set("inProgress",!0).set("request",c.request).set("response",null).set("token",null)});case"P2P_CALL_ESCALATION_SET_RESPONSE":if(c.response==null)return a;else if(a.request==null)return a;return a.withMutations(function(a){a.set("awaitingACK",!0).set("callType",c.response?g.ESCALATED:g.ESCALATION_DECLINED).set("response",c.response).set("token",b("VFRTCP2PCallStore").getState().protocolHandler.generateEscalationResponseToken(a.request,c.response))});case"P2P_CALL_ESCALATION_ACK":if(c.token==null)return a;return a.response==null||a.request==null||c.token!==a.token||!a.awaitingACK?a:a.withMutations(function(a){a.set("awaitingACK",!1).set("callType",a.response?g.ESCALATED:g.ESCALATION_DECLINED).set("escalated",a.response).set("inProgress",!1).set("request",null).set("response",null).set("token",null)});default:return a}};d=function(a,c){__p&&__p();switch(c.type){case"RESET":return new(b("VFRTCP2PCallEscalationStoreState"))();case"SET_CALL_TYPE":switch(c.callType){case b("VFRTCCallType").AUDIO_VIDEO:case b("VFRTCCallType").VIDEO_ONLY:return a.set("callType",g.DIRECT_VIDEO)}return a;case"P2P_CALL_ESCALATION_ACK":if(c.token==null)return a;if(!a.awaitingACK)return a;else if(c.token!==a.token)return a;return a.set("awaitingACK",!1);default:return a}};e.exports={Alice:a,Bob:c,common:d}}),null);
__d("VFRTCP2PCallReducer",["VFRTCAppDispatcher","VFRTCCallStore","VFRTCCallType","VFRTCConfig","VFRTCConsoleLogger","VFRTCConstants","VFRTCP2PCallEscalationStore","VFRTCP2PCallStoreState","VFRTCP2PProtocolHandler","VFRTCScreenSharingWindowHandler","VFRTCSignalingExperiments","VFRTCClientFeatureGating"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("VFRTCConstants").SignalingProtocol;function a(a,c){__p&&__p();switch(c.type){case"INIT":var d=c.callType,e=c.isCaller,f=c.protocol;return f===g.P2P&&d&&e!=null?a.set("protocolHandler",new(b("VFRTCP2PProtocolHandler"))()).set("signalingExperiments",new(b("VFRTCSignalingExperiments"))()).set("isCaller",e).set("callType",d):a;case"RESET":return new(b("VFRTCP2PCallStoreState"))();case"RESET_FOR_REDIAL":b("VFRTCAppDispatcher").waitFor([b("VFRTCCallStore").getDispatchToken()]);f=b("VFRTCCallStore").getState().remoteUsers.first();if(f==null)return a;a.protocolHandler.destroy();return a.set("connectionStatus","INIT").set("endCallReason",null).set("protocolHandler",new(b("VFRTCP2PProtocolHandler"))().init(f.FBID,Number(c.conferenceName))).set("signalingExperiments",new(b("VFRTCSignalingExperiments"))());case"CALL_COLLISION":b("VFRTCAppDispatcher").waitFor([b("VFRTCCallStore").getDispatchToken()]);a.protocolHandler.init(c.peerID,Number(c.conferenceName));return a.set("connectionStatus","INIT").set("endCallReason",null).set("signalingExperiments",new(b("VFRTCSignalingExperiments"))());default:return a}}function c(a,c){switch(c.type){case"HANGUP":case"DISMISS":case"HANGUP_ERROR":case"HANGUP_SUCCESS":case"END_CALL":case"REMOVE_REMOTE_SCREEN_STREAM":case"RESET_FOR_REDIAL":b("VFRTCScreenSharingWindowHandler").close();return a.withMutations(function(a){return a.set("isScreenContentPoppedOut",b("VFRTCScreenSharingWindowHandler").isWindowOpened()).set("isRedialFooterButtonShown",(b("VFRTCClientFeatureGating").shouldAlwaysShowRedial()||b("VFRTCP2PProtocolHandler").showRedialButton())&&!b("VFRTCConfig").isVCEndpointCall()).set("isStarRatingShown",b("VFRTCP2PProtocolHandler").showStarRating())});default:return a}}function d(a,c){switch(c.type){case"SET_CALL_TYPE":return a.set("callType",c.callType);case"P2P_CALL_ESCALATION_SET_RESPONSE":b("VFRTCAppDispatcher").waitFor([b("VFRTCP2PCallEscalationStore").getDispatchToken()]);return a.set("callType",c.response?b("VFRTCCallType").AUDIO_VIDEO:b("VFRTCCallType").AUDIO_ONLY);case"P2P_CALL_ESCALATION_FAILURE":return a.set("callType",b("VFRTCCallType").AUDIO_ONLY);case"P2P_CALL_ESCALATION_SUCCESS":b("VFRTCAppDispatcher").waitFor([b("VFRTCP2PCallEscalationStore").getDispatchToken()]);return b("VFRTCP2PCallEscalationStore").isEscalated()?a.set("callType",b("VFRTCCallType").AUDIO_VIDEO):a;default:return a}}function f(a,b){switch(b.type){case"SET_CONNECTION_STATUS":if(a.connectionStatus!==b.connectionStatus)return a.set("connectionStatus",b.connectionStatus);default:return a}}function h(a,b){switch(b.type){case"SET_END_CALL_REASON":return a.set("endCallReason",b.endCallReason);default:return a}}function i(a,b){switch(b.type){case"SET_MULTIWAY_ESCALATION_SUPPORT":a=a.set("offerEscalationSupport",b.offerEscalationSupport);b.escalationConferenceName&&(a=a.set("escalationConferenceName",b.escalationConferenceName));return a;default:return a}}function j(a,c){switch(c.type){case"POP_IN_SCREEN_CONTENT":b("VFRTCScreenSharingWindowHandler").close();return a.set("isScreenContentPoppedOut",b("VFRTCScreenSharingWindowHandler").isWindowOpened());case"POP_OUT_SCREEN_CONTENT":var d=b("VFRTCCallStore").getState(),e=d.remoteUsers.first().FBID;d=d.callInfo;b("VFRTCScreenSharingWindowHandler").open(e,c.stream,d);return a.set("isScreenContentPoppedOut",b("VFRTCScreenSharingWindowHandler").isWindowOpened());default:return a}}function k(a,b){switch(b.type){case"SET_REMOTE_SIGNALING_EXPERIMENTS":return a.set("signalingExperiments",a.signalingExperiments.setRemote(b.remoteSignalingExperiments));default:return a}}function l(a,b){switch(b.type){case"P2P_PROCESS_MESSAGE":return a.set("isRemoteVideoSupported",b.message.isRemoteVideoSupported()).set("isPeerOnMobile",b.message.isFromMobile());default:return a}}function m(a,b){switch(b.type){case"P2P_SET_IS_CALLER":return a.set("isCaller",b.isCaller);case"CALL_COLLISION":return a.set("isCaller",!0);default:return a}}function n(a,b){switch(b.type){case"SET_CONNECTION_STATUS":return b.connectionStatus==="CONNECTED"?a.set("wasConnected",!0):a;case"RESET_FOR_REDIAL":return a.set("wasConnected",!1);case"CALL_COLLISION":return a.set("wasConnected",!1);default:return a}}function o(a,b){switch(b.type){case"P2P_STAR_RATING_DONE":return a.set("isStarRatingShown",!1).set("wasStarRatingDone",b.done);case"RESET_FOR_REDIAL":return a.set("isStarRatingShown",!1).set("wasStarRatingDone",!1);default:return a}}function p(a,b){switch(b.type){case"SHOW_POOR_NETWORK_QUALITY":return a.set("isPoorNetworkQualityShown",!0);case"DISMISS_POOR_NETWORK_QUALITY":return a.set("isPoorNetworkQualityShown",!1);default:return a}}e.exports={callInit:a,callEnd:c,processCallType:d,processConnectionStatus:f,processEndCallReason:h,processIsCaller:m,processMessage:l,processMultiwayEscalationSupport:i,processPoorNetworkQuality:p,processPoppedOutScreenContent:j,processSignalingExperiments:k,processWasConnected:n,processWasStarRatingDone:o}}),null);
__d("VFRTCVideoDurationTrackerReducer",["VFRTCCallStore","VFRTCCallSummaryStore"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={track:function(a,c){__p&&__p();var d=a.videoDurationTrackerInfo,e=d.localVideoDurationTracker,f=d.remoteVideoDurationTracker;d=d.localScreenDurationTracker;switch(c.type){case"ADD_LOCAL_SCREEN_STREAM":d.track(c.stream),d.isStarted()||d.start();case"ADD_LOCAL_STREAM":e.track(c.stream);e.isStarted()||e.start();return a;case"REMOVE_LOCAL_SCREEN_STREAM":d.pause(c.stream);return a;case"REPLACE_LOCAL_SCREEN_STREAM":d.track(c.newStream);e.track(c.newStream);return a;case"ADD_REMOTE_STREAM":case"TOGGLE_REMOTE_STREAM":d=b("VFRTCCallStore").getState();e=d.remoteUsers;c=e.find(function(a){return!a.isVideoMuted()});f.stop();f.start();f.track(c&&c.streams.first());return a}return a},update:function(a,b){switch(b.type){case"VIDEO_MUTED":case"VIDEO_UNMUTED":a.videoDurationTrackerInfo.localVideoDurationTracker.update()}return a},stop:function(a,c){__p&&__p();switch(c.type){case"DISMISS":case"END_CALL":case"HANGUP":c=a.videoDurationTrackerInfo;var d=b("VFRTCCallStore").getState();d=d.callSummary;c.localVideoDurationTracker.stop();c.remoteVideoDurationTracker.stop();c.localScreenDurationTracker.stop();d.setVideoDurations(c.localVideoDurationTracker.getDuration(),c.remoteVideoDurationTracker.getDuration());d.setScreenDuration(c.localScreenDurationTracker.getDuration());d.save(b("VFRTCCallSummaryStore").getInstance());return a}return a}};e.exports=a}),null);
__d("VFRTCScreenSharing",["VFDesktopHelper","VFRTCUserMediaConstraints","VFRTCUtils"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={getUserMedia:function(a){__p&&__p();return b("VFDesktopHelper").getScreenSharingSourceID().then(function(c){return b("VFRTCUtils").getUserMedia(b("VFRTCUserMediaConstraints").chromeMediaSource(a,c))}).then(function(a){__p&&__p();for(var b=a.getTracks(),c=Array.isArray(b),d=0,b=c?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=b.length)break;e=b[d++]}else{d=b.next();if(d.done)break;e=d.value}e=e;e.addEventListener("ended",function(b){return window.setTimeout(function(){a.active||g.stop()})})}return a})},stop:function(){return b("VFDesktopHelper").stopScreenSharing()}};e.exports=g}),null);
__d("VFRTCScreenSharingUtils",["RTCConfig","VFRTCExperiment","VFRTCSupport","VFRTCUtils","VFRTCVersionDetection"],(function(a,b,c,d,e,f){"use strict";a={isGroupCallScreenSharingSupported:function(){return b("RTCConfig").ScreenSharingToGroupGK},isSupportedBrowser:function(){return b("VFRTCVersionDetection").isChrome()&&b("VFRTCVersionDetection").webrtcVersion()>=34},canUserReceiveScreenSharing:function(){return!b("VFRTCSupport").isMobileDevice()&&(b("VFRTCVersionDetection").isChromium()&&b("VFRTCVersionDetection").webrtcVersion()>=34||b("VFRTCUtils").isVCScreenSharingSupported())},canPeerReceiveScreenSharing:function(a){if(a.remoteSupport("screen_sharing"))return!0;return!a.remoteSupport("www")&&!a.remoteSupport("mweb")?b("RTCConfig").ScreenSharingToMobileGK?!0:b("VFRTCExperiment").gen("webrtc_enable_screen_sharing").getBool("can_share_to_mobile",!1):!1}};e.exports=a}),null);
__d("VFRTCMediaStatsReport",["VFRTCStatsHelpers"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(a){return}var c=a.prototype;c.parseStatString=function(a,b){return a&&a[b]!=null&&a[b]!==""?a[b]:null};c.parseMediaStat=function(a,b){return a&&a[b]!=null&&a[b]!==""?Number(a[b]):null};c.getAccelerateRate=function(a){return null};c.getAudioBytesReceived=function(a){return null};c.getAudioBytesSent=function(a){return null};c.getAudioDecodingCNG=function(a){return null};c.getAudioDecodingNormal=function(a){return null};c.getAudioDecodingPLC=function(a){return null};c.getAudioDecodingPLCCNG=function(a){return null};c.getAudioJitter=function(a){return null};c.getAudioPacketsReceived=function(a){return null};c.getAudioPacketsReceivedLost=function(a){return null};c.getAudioPacketsSent=function(a){return null};c.getAudioPacketsSentLost=function(a){return null};c.getAudioReceivedRtt=function(a){return null};c.getAudioRecvKeys=function(){return[]};c.getAudioSendCodec=function(a){return null};c.getAudioSendKeys=function(){return[]};c.getAudioSendRtt=function(a){return null};c.getConnectionType=function(){return b("VFRTCStatsHelpers").UNKNOWN_CONNECTION};c.getDiscardRate=function(a){return null};c.getExpandRate=function(a){return null};c.getFramesDecoded=function(a){return null};c.getFramesEncoded=function(a){return null};c.getInboundQpSum=function(a){return null};c.getJitterBufferDelay=function(a){return null};c.getOutboundQpSum=function(a){return null};c.getPreemptiveExpandRate=function(a){return null};c.getVideoBweKeys=function(){return[]};c.getVideoBweRetransmitBitrate=function(a){return null};c.getVideoBweSendBandwidth=function(a){return null};c.getVideoBweTransmitBitrate=function(a){return null};c.getVideoBytesReceived=function(a){return null};c.getVideoBytesSent=function(a){return null};c.getVideoFrameHeightReceived=function(a){return null};c.getVideoFrameHeightSent=function(a){return null};c.getVideoFrameRateReceived=function(a){return null};c.getVideoFrameRateSent=function(a){return null};c.getVideoFrameWidthReceived=function(a){return null};c.getVideoFrameWidthSent=function(a){return null};c.getVideoPacketsReceived=function(a){return null};c.getVideoPacketsReceivedLost=function(a){return null};c.getVideoPacketsSent=function(a){return null};c.getVideoPacketsSentLost=function(a){return null};c.getVideoRecvCodec=function(a){return null};c.getVideoRecvCodecImplementationName=function(a){return null};c.getVideoRecvKeys=function(){return[]};c.getVideoSendCodec=function(a){return null};c.getVideoSendCodecImplementationName=function(a){return null};c.getVideoSendKeys=function(){return[]};c.getVideoSentRtt=function(a){return null};c.getVideoRecvCodecForConnection=function(){var a=this,b=null;this.getVideoRecvKeys().forEach(function(c){var d=a.getVideoRecvCodec(c);c=a.getVideoRecvCodecImplementationName(c);d!=null&&d!==""&&c!=null&&c!==""&&(b=d+c)});return b};c.getVideoSendCodecForConnection=function(){var a=this,b=null;this.getVideoSendKeys().forEach(function(c){var d=a.getVideoSendCodec(c);c=a.getVideoSendCodecImplementationName(c);d!=null&&d!==""&&c!=null&&c!==""&&(b=d+c)});return b};c.getAudioSendCodecForConnection=function(){var a=this,b=null;this.getAudioSendKeys().forEach(function(c){c=a.getAudioSendCodec(c);c!=null&&c!==""&&(b=c)});return b};return a}();e.exports=a}),null);
__d("VFRTCChromeMediaStatsReport",["VFRTCMediaStatsReport","VFRTCStatsHelpers"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(b){__p&&__p();var c;c=a.call(this,b)||this;c.$VFRTCChromeMediaStatsReport1={};c.$VFRTCChromeMediaStatsReport2={};c.$VFRTCChromeMediaStatsReport3={};c.$VFRTCChromeMediaStatsReport4={};c.$VFRTCChromeMediaStatsReport5={};c.$VFRTCChromeMediaStatsReport6=[];if(b)for(var b=b.values(),d=Array.isArray(b),e=0,b=d?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=b.length)break;f=b[e++]}else{e=b.next();if(e.done)break;f=e.value}f=f;f.type==="ssrc"&&f.audioOutputLevel!=null&&f.audioOutputLevel!==""?c.$VFRTCChromeMediaStatsReport1[f.id]=f:f.type==="ssrc"&&f.audioInputLevel!=null&&f.audioInputLevel!==""?c.$VFRTCChromeMediaStatsReport2[f.id]=f:f.type==="ssrc"&&f.mediaType==="video"?f.bytesReceived!=null?c.$VFRTCChromeMediaStatsReport3[f.id]=f:c.$VFRTCChromeMediaStatsReport4[f.id]=f:f.type==="VideoBwe"?c.$VFRTCChromeMediaStatsReport5[f.id]=f:f.type==="googCandidatePair"&&f.googActiveConnection!==null&&f.googActiveConnection==="true"&&c.$VFRTCChromeMediaStatsReport6.push(f)}return c}var d=c.prototype;d.getAudioSendKeys=function(){return Object.keys(this.$VFRTCChromeMediaStatsReport2)};d.getAudioRecvKeys=function(){return Object.keys(this.$VFRTCChromeMediaStatsReport1)};d.getVideoRecvKeys=function(){return Object.keys(this.$VFRTCChromeMediaStatsReport3)};d.getVideoSendKeys=function(){return Object.keys(this.$VFRTCChromeMediaStatsReport4)};d.getVideoBweKeys=function(){return Object.keys(this.$VFRTCChromeMediaStatsReport5)};d.getAudioBytesSent=function(a){return this.parseMediaStat(this.$VFRTCChromeMediaStatsReport2[a],"bytesSent")};d.getAudioDecodingPLC=function(a){return this.parseMediaStat(this.$VFRTCChromeMediaStatsReport1[a],"googDecodingPLC")};d.getAudioDecodingPLCCNG=function(a){return this.parseMediaStat(this.$VFRTCChromeMediaStatsReport1[a],"googDecodingPLCCNG")};d.getAudioDecodingCNG=function(a){return this.parseMediaStat(this.$VFRTCChromeMediaStatsReport1[a],"googDecodingCNG")};d.getAudioDecodingNormal=function(a){return this.parseMediaStat(this.$VFRTCChromeMediaStatsReport1[a],"googDecodingNormal")};d.getAudioPacketsSentLost=function(a){return this.parseMediaStat(this.$VFRTCChromeMediaStatsReport2[a],"packetsLost")};d.getAudioPacketsSent=function(a){return this.parseMediaStat(this.$VFRTCChromeMediaStatsReport2[a],"packetsSent")};d.getAudioSendCodec=function(a){return this.parseStatString(this.$VFRTCChromeMediaStatsReport2[a],"googCodecName")};d.getAudioSendRtt=function(a){return this.parseMediaStat(this.$VFRTCChromeMediaStatsReport2[a],"googRtt")};d.getAudioBytesReceived=function(a){return this.parseMediaStat(this.$VFRTCChromeMediaStatsReport1[a],"bytesReceived")};d.getAudioPacketsReceived=function(a){return this.parseMediaStat(this.$VFRTCChromeMediaStatsReport1[a],"packetsReceived")};d.getAudioPacketsReceivedLost=function(a){return this.parseMediaStat(this.$VFRTCChromeMediaStatsReport1[a],"packetsLost")};d.getAudioReceivedRtt=function(a){return this.parseMediaStat(this.$VFRTCChromeMediaStatsReport1[a],"googRtt")};d.getVideoBytesReceived=function(a){return this.parseMediaStat(this.$VFRTCChromeMediaStatsReport3[a],"bytesReceived")};d.getVideoPacketsReceived=function(a){return this.parseMediaStat(this.$VFRTCChromeMediaStatsReport3[a],"packetsReceived")};d.getVideoPacketsReceivedLost=function(a){return this.parseMediaStat(this.$VFRTCChromeMediaStatsReport3[a],"packetsLost")};d.getFramesDecoded=function(a){return this.parseMediaStat(this.$VFRTCChromeMediaStatsReport3[a],"framesDecoded")};d.getInboundQpSum=function(a){return this.parseMediaStat(this.$VFRTCChromeMediaStatsReport3[a],"qpSum")};d.getVideoFrameHeightReceived=function(a){return this.parseMediaStat(this.$VFRTCChromeMediaStatsReport3[a],"googFrameHeightReceived")};d.getVideoFrameRateReceived=function(a){return this.parseMediaStat(this.$VFRTCChromeMediaStatsReport3[a],"googFrameRateReceived")};d.getVideoFrameWidthReceived=function(a){return this.parseMediaStat(this.$VFRTCChromeMediaStatsReport3[a],"googFrameWidthReceived")};d.getFramesEncoded=function(a){return this.parseMediaStat(this.$VFRTCChromeMediaStatsReport4[a],"framesEncoded")};d.getVideoBytesSent=function(a){return this.parseMediaStat(this.$VFRTCChromeMediaStatsReport4[a],"bytesSent")};d.getVideoFrameHeightSent=function(a){return this.parseMediaStat(this.$VFRTCChromeMediaStatsReport4[a],"googFrameHeightSent")};d.getVideoFrameRateSent=function(a){return this.parseMediaStat(this.$VFRTCChromeMediaStatsReport4[a],"googFrameRateSent")};d.getVideoFrameWidthSent=function(a){return this.parseMediaStat(this.$VFRTCChromeMediaStatsReport4[a],"googFrameWidthSent")};d.getVideoPacketsSent=function(a){return this.parseMediaStat(this.$VFRTCChromeMediaStatsReport4[a],"packetsSent")};d.getVideoPacketsSentLost=function(a){return this.parseMediaStat(this.$VFRTCChromeMediaStatsReport4[a],"packetsLost")};d.getVideoSentRtt=function(a){return this.parseMediaStat(this.$VFRTCChromeMediaStatsReport4[a],"googRtt")};d.getOutboundQpSum=function(a){return this.parseMediaStat(this.$VFRTCChromeMediaStatsReport4[a],"qpSum")};d.getAudioJitter=function(a){return this.parseMediaStat(this.$VFRTCChromeMediaStatsReport1[a],"googJitterReceived")};d.getJitterBufferDelay=function(a){return this.parseMediaStat(this.$VFRTCChromeMediaStatsReport1[a],"googCurrentDelayMs")};d.getAccelerateRate=function(a){return this.parseMediaStat(this.$VFRTCChromeMediaStatsReport1[a],"googAccelerateRate")};d.getPreemptiveExpandRate=function(a){return this.parseMediaStat(this.$VFRTCChromeMediaStatsReport1[a],"googPreemptiveExpandRate")};d.getExpandRate=function(a){return this.parseMediaStat(this.$VFRTCChromeMediaStatsReport1[a],"googExpandRate")};d.getDiscardRate=function(a){return this.parseMediaStat(this.$VFRTCChromeMediaStatsReport1[a],"googSecondaryDiscardedRate")};d.getVideoBweRetransmitBitrate=function(a){return this.parseMediaStat(this.$VFRTCChromeMediaStatsReport5[a],"googRetransmitBitrate")};d.getVideoBweSendBandwidth=function(a){return this.parseMediaStat(this.$VFRTCChromeMediaStatsReport5[a],"googAvailableSendBandwidth")};d.getVideoBweTransmitBitrate=function(a){return this.parseMediaStat(this.$VFRTCChromeMediaStatsReport5[a],"googTransmitBitrate")};d.getVideoRecvCodec=function(a){return this.parseStatString(this.$VFRTCChromeMediaStatsReport3[a],"googCodecName")};d.getVideoRecvCodecImplementationName=function(a){return this.parseStatString(this.$VFRTCChromeMediaStatsReport3[a],"codecImplementationName")};d.getVideoSendCodec=function(a){return this.parseStatString(this.$VFRTCChromeMediaStatsReport4[a],"googCodecName")};d.getVideoSendCodecImplementationName=function(a){return this.parseStatString(this.$VFRTCChromeMediaStatsReport4[a],"codecImplementationName")};d.getConnectionType=function(){var a=this,c=null;this.$VFRTCChromeMediaStatsReport6.some(function(d){c=b("VFRTCStatsHelpers").connectionType(a.parseStatString(d,"googLocalCandidateType"),a.parseStatString(d,"googTransportType"),a.parseStatString(d,"googRemoteCandidateType"),a.parseStatString(d,"googTransportType"));return c!==null});if(c!==null)return c;else return b("VFRTCStatsHelpers").UNKNOWN_CONNECTION};return c}(b("VFRTCMediaStatsReport"));e.exports=a}),null);
__d("VFRTCMozMediaStatsReport",["VFRTCMediaStatsReport","VFRTCStatsHelpers","isFalsey"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(b){__p&&__p();var c;c=a.call(this,b)||this;c.$VFRTCMozMediaStatsReport1={};c.$VFRTCMozMediaStatsReport2={};c.$VFRTCMozMediaStatsReport3={};c.$VFRTCMozMediaStatsReport4={};c.$VFRTCMozMediaStatsReport5={};c.$VFRTCMozMediaStatsReport6={};for(var b=b.values(),d=Array.isArray(b),e=0,b=d?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=b.length)break;f=b[e++]}else{e=b.next();if(e.done)break;f=e.value}f=f;f.type==="inbound-rtp"&&f.mediaType==="audio"&&f.isRemote===!1?c.$VFRTCMozMediaStatsReport1[f.id]=f:f.type==="outbound-rtp"&&f.mediaType==="audio"&&f.isRemote===!1?c.$VFRTCMozMediaStatsReport2[f.id]=f:f.type==="inbound-rtp"&&f.mediaType==="video"&&f.isRemote===!1?c.$VFRTCMozMediaStatsReport3[f.id]=f:f.type==="outbound-rtp"&&f.mediaType==="video"&&f.isRemote===!1?c.$VFRTCMozMediaStatsReport4[f.id]=f:f.type==="candidate-pair"&&f.state==="succeeded"?c.$VFRTCMozMediaStatsReport6[f.id]=f:(f.type==="local-candidate"||f.type==="remote-candidate")&&(c.$VFRTCMozMediaStatsReport5[f.id]=f)}return c}var d=c.prototype;d.getAudioSendKeys=function(){return Object.keys(this.$VFRTCMozMediaStatsReport2)};d.getAudioRecvKeys=function(){return Object.keys(this.$VFRTCMozMediaStatsReport1)};d.getVideoRecvKeys=function(){return Object.keys(this.$VFRTCMozMediaStatsReport3)};d.getVideoSendKeys=function(){return Object.keys(this.$VFRTCMozMediaStatsReport4)};d.getAudioBytesSent=function(a){return this.parseMediaStat(this.$VFRTCMozMediaStatsReport2[a],"bytesSent")};d.getAudioPacketsSent=function(a){return this.parseMediaStat(this.$VFRTCMozMediaStatsReport2[a],"packetsSent")};d.getAudioBytesReceived=function(a){return this.parseMediaStat(this.$VFRTCMozMediaStatsReport1[a],"bytesReceived")};d.getAudioPacketsReceived=function(a){return this.parseMediaStat(this.$VFRTCMozMediaStatsReport1[a],"packetsReceived")};d.getAudioPacketsReceivedLost=function(a){return this.parseMediaStat(this.$VFRTCMozMediaStatsReport1[a],"packetsLost")};d.getAudioReceivedRtt=function(a){return this.parseMediaStat(this.$VFRTCMozMediaStatsReport1[a],"roundTripTime")};d.getFramesDecoded=function(a){return this.parseMediaStat(this.$VFRTCMozMediaStatsReport3[a],"framesDecoded")};d.getFramesEncoded=function(a){return this.parseMediaStat(this.$VFRTCMozMediaStatsReport4[a],"framesEncoded")};d.getVideoBytesReceived=function(a){return this.parseMediaStat(this.$VFRTCMozMediaStatsReport3[a],"bytesReceived")};d.getVideoFrameRateReceived=function(a){var c=this.getFramesDecoded(a);return b("isFalsey")(c)?null:this.parseMediaStat(this.$VFRTCMozMediaStatsReport3[a],"framerateMean")};d.getVideoPacketsReceived=function(a){return this.parseMediaStat(this.$VFRTCMozMediaStatsReport3[a],"packetsReceived")};d.getVideoPacketsReceivedLost=function(a){return this.parseMediaStat(this.$VFRTCMozMediaStatsReport3[a],"packetsLost")};d.getVideoBytesSent=function(a){return this.parseMediaStat(this.$VFRTCMozMediaStatsReport4[a],"bytesSent")};d.getVideoFrameRateSent=function(a){var c=this.getFramesEncoded(a);return b("isFalsey")(c)?null:this.parseMediaStat(this.$VFRTCMozMediaStatsReport4[a],"framerateMean")};d.getVideoPacketsSent=function(a){return this.parseMediaStat(this.$VFRTCMozMediaStatsReport4[a],"packetsSent")};d.getAudioJitter=function(a){return this.parseMediaStat(this.$VFRTCMozMediaStatsReport1[a],"jitter")};d.getJitterBufferDelay=function(a){return this.parseMediaStat(this.$VFRTCMozMediaStatsReport1[a],"mozJitterBufferDelay")};d.getConnectionType=function(){__p&&__p();var a=this,c=null;Object.keys(this.$VFRTCMozMediaStatsReport6).forEach(function(d){d=a.$VFRTCMozMediaStatsReport6[d];var e=a.parseStatString(d,"localCandidateId");d=a.parseStatString(d,"remoteCandidateId");e!==void 0&&e!==null&&d!==void 0&&d!==null&&(c=b("VFRTCStatsHelpers").connectionType(a.parseStatString(a.$VFRTCMozMediaStatsReport5[e],"candidateType"),a.parseStatString(a.$VFRTCMozMediaStatsReport5[e],"transport"),a.parseStatString(a.$VFRTCMozMediaStatsReport5[d],"candidateType"),a.parseStatString(a.$VFRTCMozMediaStatsReport5[d],"transport")));return c!==null});if(c!==null)return c;else return b("VFRTCStatsHelpers").UNKNOWN_CONNECTION};return c}(b("VFRTCMediaStatsReport"));e.exports=a}),null);
__d("VFRTCMediaMetricParser",["RTCWebMediaStreamsTypedLogger","UserAgent","VFRTCCallStore","VFRTCChromeMediaStatsReport","VFRTCClientFeatureGating","VFRTCConstants","VFRTCLogger","VFRTCMediaMetricsConst","VFRTCMozMediaStatsReport","VFRTCNetworkQualityMonitor","VFRTCSupport","gkx"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("VFRTCConstants").SignalingProtocol;function h(){if(b("gkx")("678354")){var a=b("VFRTCCallStore").getState(),c=a.callInfo;a=a.callSummary;return new(b("RTCWebMediaStreamsTypedLogger"))().setCallID(c.callID).setTimeElapsed(a.getCurrentTimeFromCallConnected()).setConferenceName(c.conferenceName).setCallType(c.protocol===g.MULTIWAY?"mw":"p2p")}return null}function i(a,c){a.getVideoSendKeys().forEach(function(d){var e,f=a.getOutboundQpSum(d),g=a.getFramesEncoded(d),i=a.getVideoBytesSent(d),j=a.getVideoPacketsSent(d),k=a.getVideoPacketsSentLost(d);c.setVideoMetric(d,(e=b("VFRTCMediaMetricsConst")).OUTBOUND_QP,f);c.setVideoMetric(d,e.FRAMES_ENCODED,g);c.setVideoMetric(d,e.VIDEO_BYTES_SENT,i);c.setVideoMetric(d,e.VIDEO_PKTS_SENT,j);c.setVideoMetric(d,e.VIDEO_PKTS_SEND_LOST,k);e=h();e&&e.setIsLocal(!0).setStreamType("video").setStreamID(d).setFrames(g).setQpSum(f).setBytes(i).setPackets(j).setPacketsLost(k).setFrameHeight(a.getVideoFrameHeightSent(d)).setFramesPerSecond(a.getVideoFrameRateSent(d)).setFrameWidth(a.getVideoFrameWidthSent(d)).log()})}function j(a,c){a.getVideoBweKeys().forEach(function(d){var e=a.getVideoBweSendBandwidth(d),f=a.getVideoBweTransmitBitrate(d),g=a.getVideoBweRetransmitBitrate(d);c.setVideoMetric(d,b("VFRTCMediaMetricsConst").VIDEOBWE_SEND_BANDWIDTH,e);c.setVideoMetric(d,b("VFRTCMediaMetricsConst").VIDEOBWE_TRANSMIT_BITRATE,f);c.setVideoMetric(d,b("VFRTCMediaMetricsConst").VIDEOBWE_RETRANSMIT_BITRATE,g);f=h();f&&f.setIsLocal(!0).setStreamType("video").setStreamID(d).setBytes(e).log()})}function k(a,c){a.getVideoRecvKeys().forEach(function(d){var e,f=a.getInboundQpSum(d),g=a.getFramesDecoded(d),i=a.getVideoBytesReceived(d),j=a.getVideoPacketsReceived(d),k=a.getVideoPacketsReceivedLost(d);c.setVideoMetric(d,(e=b("VFRTCMediaMetricsConst")).VIDEO_BYTES_RECEIVED,i);c.setVideoMetric(d,e.INBOUND_QP,f);c.setVideoMetric(d,e.FRAMES_DECODED,g);c.setVideoMetric(d,e.VIDEO_PKTS_RECEIVED,j);c.setVideoMetric(d,e.VIDEO_PKTS_RECV_LOST,k);e=h();e&&e.setIsLocal(!1).setStreamType("video").setStreamID(d).setBytes(i).setFrames(g).setQpSum(f).setPackets(j).setPacketsLost(k).setFrameHeight(a.getVideoFrameHeightReceived(d)).setFramesPerSecond(a.getVideoFrameRateReceived(d)).setFrameWidth(a.getVideoFrameWidthReceived(d)).log()})}function l(a,c){a.getAudioSendKeys().forEach(function(d){var e,f=a.getAudioBytesSent(d),g=a.getAudioPacketsSent(d),i=a.getAudioPacketsSentLost(d),j=a.getAudioSendRtt(d);c.addMetricStat(d,(e=b("VFRTCMediaMetricsConst")).AUDIO_BYTES_SENT,f);c.addMetricStat(d,e.AUDIO_PACKETS_SENT,g);c.addMetricStat(d,e.AUDIO_PACKETS_SENT_LOST,i);c.addMetricStat(d,e.AUDIO_RTT_SENT,j);e=h();e&&e.setIsLocal(!0).setStreamType("audio").setStreamID(d).setPackets(g).setBytes(f).setRtt(j).setPacketsLost(i).log()})}function m(a,c){__p&&__p();a.getAudioRecvKeys().forEach(function(d){__p&&__p();var e,f=a.getJitterBufferDelay(d),g=a.getAudioJitter(d),i=a.getAccelerateRate(d),j=a.getExpandRate(d),k=a.getPreemptiveExpandRate(d),l=a.getDiscardRate(d),m=a.getAudioBytesReceived(d),n=a.getAudioPacketsReceived(d),o=a.getAudioPacketsReceivedLost(d),p=a.getAudioReceivedRtt(d);c.addJitterBufferDelay(d,f);c.addMetricStat(d,(e=b("VFRTCMediaMetricsConst")).JITTER,g);c.addMetricStat(d,e.ACCELERATE_RATE,i);c.addMetricStat(d,e.DISCARD_RATE,l);c.addMetricStat(d,e.EXPAND_RATE,j);c.addMetricStat(d,e.PREEMPTIVE_RATE,k);c.addMetricStat(d,e.DECODING_PLC,a.getAudioDecodingPLC(d));c.addMetricStat(d,e.DECODING_CNG,a.getAudioDecodingCNG(d));c.addMetricStat(d,e.DECODING_NORMAL,a.getAudioDecodingNormal(d));c.addMetricStat(d,e.DECODING_PLC_CNG,a.getAudioDecodingPLCCNG(d));c.addMetricStat(d,e.AUDIO_BYTES_RECEIVED,m);c.addMetricStat(d,e.AUDIO_PACKETS_RECEIVED,n);c.addMetricStat(d,e.AUDIO_PACKETS_RECEIVED_LOST,o);c.addMetricStat(d,e.AUDIO_RTT_RECEIVED,p);i=h();i&&i.setIsLocal(!1).setStreamType("audio").setStreamID(d).setJitter(g).setJitterBufferDelay(f).setBytes(m).setPackets(n).setRtt(p).setPacketsLost(o).log()})}var n={parseStats:function(a,c){a.getStats().then(function(a){var d=null;b("VFRTCSupport").isChromiumBased()?d=new(b("VFRTCChromeMediaStatsReport"))(a):b("UserAgent").isBrowser("Firefox")&&(d=new(b("VFRTCMozMediaStatsReport"))(a));d&&n.parseStatsWithReport(d,c)})["catch"](function(a){b("VFRTCLogger").getInstance().logToConsole("error parsing RTCStatsReport")})},parseStatsWithReport:function(a,b){__p&&__p();var c=b.getMediaMetricTracker();m(a,c);l(a,c);k(a,c);i(a,c);j(a,c);b.setConnectionType(a.getConnectionType());c=a.getVideoRecvCodecForConnection();c!=null&&c!==""&&b.setVideoReceivedCodec(c);c=a.getVideoSendCodecForConnection();c!=null&&c!==""&&b.setVideoSentCodec(c);c=a.getAudioSendCodecForConnection();c!=null&&c!==""&&b.setAudioSentCodec(c)},startCollectingMediaStats:function(){var a=null;(b("VFRTCClientFeatureGating").shouldShowNetworkQualityIndicator()||b("VFRTCClientFeatureGating").shouldMonitorNetworkQuality())&&(a=new(b("VFRTCNetworkQualityMonitor"))());var c=function c(){var d=b("VFRTCCallStore").getState().callInfo.conferenceState,e=b("VFRTCCallStore").getState().callSummary,f=b("VFRTCCallStore").getState().connections.first();d!=="TERMINATED"&&(f&&(n.parseStats(f,e),a!=null&&a.determineQuality(e.getMediaMetricTracker())),window.setTimeout(c,5e3))};c()}};e.exports=n}),null);
__d("VFRTCNetworkQualityMonitor",["VFRTCClientFeatureGating","VFRTCExperiment","VFRTCMediaMetricsConst","VFRTCP2PCallActions","VFWebLogger"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=2;a=function(){__p&&__p();function a(){this.$3=0;var a=b("VFRTCExperiment").getMediaQualityExperiments();this.$1=a.getInt("rtt_threshold",Number.POSITIVE_INFINITY);this.$2=parseFloat(a.getParam("packet_loss_rate_threshold",String(Number.POSITIVE_INFINITY)));b("VFWebLogger").logRTCCheckpoint({checkpoint:"VFRTCNetworkQualityMonitor constructed: rtt "+this.$1+", packetLoss "+this.$2})}var c=a.prototype;c.$4=function(a,b,c){a=a.getMetricStats(b,c);return a!=null?a.current>this.$1:!1};c.$5=function(a,b){a=a/(a+b);return a>=this.$2};c.$6=function(a,b,c,d){c=a.getMetricStats(b,c);a=a.getMetricStats(b,d);return c!=null&&a!=null?this.$5(c.current,a.current):!1};c.$7=function(a,b,c){var d=this,e=c.packetLostKey,f=c.packetsKey,g=c.rttKey;c=b.some(function(b){var c=d.$6(a,b,e,f);return c||d.$4(a,b,g)});return c};c.getCount=function(){return this.$3};c.determineQuality=function(a){var c,d=this.$3,e=this.$7(a,a.getAudioStreamReportKeys(),{packetLostKey:(c=b("VFRTCMediaMetricsConst")).AUDIO_PACKETS_SENT_LOST,packetsKey:c.AUDIO_PACKETS_SENT,rttKey:c.AUDIO_RTT_SENT});a=this.$7(a,a.getAudioStreamReportKeys(),{packetLostKey:c.AUDIO_PACKETS_RECEIVED_LOST,packetsKey:c.AUDIO_PACKETS_RECEIVED,rttKey:c.AUDIO_RTT_RECEIVED});e||a?this.$3<g&&this.$3++:this.$3>0&&this.$3--;d!==this.$3&&this.$3>=g?(b("VFWebLogger").logRTCCheckpoint({checkpoint:"poor_network_quality_exceeded_threshold_"+this.$3}),b("VFRTCClientFeatureGating").shouldShowNetworkQualityIndicator()&&b("VFRTCP2PCallActions").togglePoorNetworkQualityIndicator(!0)):d>0&&this.$3<=0&&(b("VFWebLogger").logRTCCheckpoint({checkpoint:"network_quality_recovered_from_"+d}),b("VFRTCClientFeatureGating").shouldShowNetworkQualityIndicator()&&b("VFRTCP2PCallActions").togglePoorNetworkQualityIndicator(!1))};return a}();e.exports=a}),null);
__d("VFRTCCallStore",["FluxReduceStore","VFRTCAppDispatcher","VFRTCCallReducer","VFRTCCallStoreState","VFRTCCallSummaryReducer","VFRTCCallSummaryStore","VFRTCConstants"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("VFRTCConstants").SignalingProtocol,h=[(a=b("VFRTCCallSummaryReducer")).onCallEnded,a.onCallStarted,a.onMessageSignaling,a.onSurveyResult,a.setCallSummary,(c=b("VFRTCCallReducer")).abortMultiwayEscalationProcess,c.callEnd,c.callInit,c.callStart,c.completeTransitionToMultiway,c.incomingCallStart,c.onParticipantsChanged,c.processConferenceState,c.processJoinResponse,c.processLocalScreenStream,c.processLocalStream,c.processRemoteScreenStream,c.processRemoteStream,c.processRemoteTrack,c.processUsers,c.toggleLocalStream,c.toggleRemoteStream,c.waitForUserInput,c.setConnectionStatus];d=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.getInitialState=function(){return new(b("VFRTCCallStoreState"))()};d.reduce=function(a,b){return h.reduce(function(a,c){return c(a,b)},a)};d.hasRemoteVideo=function(){return this.getState().remoteUsers.some(function(a){return a.hasStream()&&!a.areAllTracksMuted(a.streams.first().getVideoTracks())})};d.hasLocalVideo=function(){var a=this.getState();a=a.localUser;return a.hasStream()&&!a.areAllTracksMuted(a.streams.first().getVideoTracks())};d.isInCall=function(a){a===void 0&&(a=!1);var b=this.getState(),c=b.callInfo;b=b.remoteUsers;return c.conferenceState==="CONNECTING"||c.conferenceState==="CONNECTED"||a&&c.conferenceState==="NEW"&&b.size>0};d.localUserHasVideoEnabled=function(){var a=this.getState();a=a.localUser;return a.hasVideo()&&!a.isVideoMuted()};d.canToggleStreams=function(){var a=this.getState().callInfo,b=a.protocol;a=a.conferenceState;if(b===g.MULTIWAY)return a==="CONNECTED";else if(b===g.P2P)return a==="CONNECTING"||a==="CONNECTED";return!1};d.getConnection=function(a){var b=this.getState();b=b.connections;a&&(b=b.filter(function(b){return b.getSignalingProtocol()===a}));return b.first()};d.mutateCallSummary=function(a){var c=this.getState();c=c.callSummary;a(c);c.save(b("VFRTCCallSummaryStore").getInstance())};d.getSortedRemoteUsers=function(){return this.getState().remoteUsers.toList().sort(function(a,b){return a.lastConnectedAt===b.lastConnectedAt?a.FBID>b.FBID?1:-1:a.lastConnectedAt-b.lastConnectedAt})};return c}(b("FluxReduceStore"));d.__moduleID=e.id;e.exports=new d(b("VFRTCAppDispatcher"))}),null);
__d("VFRTCCallStoreState",["CurrentUser","VFRTCCallSummary","VFRTCUser","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={debugID:0,callID:"",conferenceState:"NEW",conferenceName:"",protocol:"",serverInfoData:""};d=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}((c=b("immutable")).Record(a));f={connections:c.Set(),localUser:new(b("VFRTCUser"))({FBID:b("CurrentUser").getID()}),remoteUsers:c.Set(),callInfo:new d(),callSummary:b("VFRTCCallSummary").nullSummary(),mediaStatus:c.Map()};a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(c.Record(f));e.exports=a}),null);
__d("VFRTCGroupCallEscalationStore",["FluxReduceStore","VFRTCAppDispatcher","VFRTCCallSummaryStore","VFRTCGroupCallEscalationStoreReducer","VFRTCGroupCallEscalationStoreState"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=[(a=b("VFRTCGroupCallEscalationStoreReducer")).abortEscalation,a.callStart,a.clearStore,a.onMultiwayConnectionSignaling,a.onParticipantsConnected,a.setP2PCallSummary,a.setUsersToRing];c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.getInitialState=function(){return new(b("VFRTCGroupCallEscalationStoreState"))()};d.reduce=function(a,b){return g.reduce(function(a,c){return c(a,b)},a)};d.isInProgress=function(){return this.getState().inProgress};d.isEscalated=function(){return this.getState().readyToTransition};d.logToP2PCallSummary=function(a){var c=this.getState();c=c.p2pCallSummary;c&&(a(c),c.save(b("VFRTCCallSummaryStore").getInstance()))};return c}(b("FluxReduceStore"));c.__moduleID=e.id;e.exports=new c(b("VFRTCAppDispatcher"))}),null);
__d("VFRTCGroupCallStoreState",["VFRTCStreamDurationTracker","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={localVideoDurationTracker:new(b("VFRTCStreamDurationTracker"))("video"),remoteVideoDurationTracker:new(b("VFRTCStreamDurationTracker"))("video"),localScreenDurationTracker:new(b("VFRTCStreamDurationTracker"))("screen")};c=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(b("immutable").Record(a));d={dominantSpeakerFBID:null,endCallReason:null,layout:null,participants:b("immutable").Map(),pinnedSpeakerFBID:null,thread:null,videoDurationTrackerInfo:new c()};f=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(b("immutable").Record(d));e.exports=f}),null);
__d("VFRTCGroupCallStore",["FluxReduceStore","VFRTCAppDispatcher","VFRTCGroupCallParticipantsReducer","VFRTCGroupCallReducer","VFRTCGroupCallStoreState","VFRTCVideoDurationTrackerReducer"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=[b("VFRTCGroupCallParticipantsReducer").addParticipantsToRing,b("VFRTCGroupCallParticipantsReducer").initThread,b("VFRTCGroupCallParticipantsReducer").onParticipantsChanged,b("VFRTCGroupCallReducer").processEndCallReason,b("VFRTCGroupCallReducer").setDominantSpeaker,b("VFRTCGroupCallReducer").setLayout,b("VFRTCVideoDurationTrackerReducer").track,b("VFRTCVideoDurationTrackerReducer").update,b("VFRTCVideoDurationTrackerReducer").stop];a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.getInitialState=function(){return new(b("VFRTCGroupCallStoreState"))()};d.reduce=function(a,b){return g.reduce(function(a,c){return c(a,b)},a)};d.hadVideoDuration=function(){var a=this.getState().videoDurationTrackerInfo,b=a.localVideoDurationTracker;a=a.remoteVideoDurationTracker;return b.getDuration()>0||a.getDuration()>0};return c}(b("FluxReduceStore"));a.__moduleID=e.id;e.exports=new a(b("VFRTCAppDispatcher"))}),null);
__d("VFRTCMWProtocolStoreState",["immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={pendingResponse:!1,pendingUpdate:!1,lastSyncedClientVersion:1,localMediaUpdates:b("immutable").List([{mediaStatus:{}}])};c=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(b("immutable").Record(a));d={clientMediaUpdateInfo:new c()};f=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(b("immutable").Record(d));e.exports=f}),null);
__d("VFRTCMWProtocolStore",["FluxReduceStore","VFRTCAppDispatcher","VFRTCClientMediaUpdateReducer","VFRTCMWProtocolStoreState"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=[(a=b("VFRTCClientMediaUpdateReducer")).configureAudio,a.configureVideo,a.onClientMediaUpdateResponse,a.setLocalClientVersion,a.reset];c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.getInitialState=function(){return new(b("VFRTCMWProtocolStoreState"))()};d.reduce=function(a,b){return g.reduce(function(a,c){return c(a,b)},a)};return c}(b("FluxReduceStore"));c.__moduleID=e.id;e.exports=new c(b("VFRTCAppDispatcher"))}),null);
__d("VFRTCP2PCallEscalationStore",["FluxReduceStore","VFRTCAppDispatcher","VFRTCP2PCallEscalationStoreReducers","VFRTCP2PCallEscalationStoreState","VFRTCP2PCallStore"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=[b("VFRTCP2PCallEscalationStoreReducers").Alice,b("VFRTCP2PCallEscalationStoreReducers").Bob,b("VFRTCP2PCallEscalationStoreReducers").common];a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.getInitialState=function(){return new(b("VFRTCP2PCallEscalationStoreState"))()};d.reduce=function(a,b){return g.reduce(function(a,c){return c(a,b)},a)};d.didCurrentUserInitiate=function(){return this.getState().initiatedEscalation};d.isInProgress=function(){return this.getState().inProgress};d.isEscalated=function(){return this.getState().escalated};d.getEscalateMediaStream=function(){return this.getState().escalateMediaStream};d.remoteWillNotInitSDPUpdate=function(){return b("VFRTCP2PCallStore").getState().isPeerOnMobile||b("VFRTCP2PCallStore").getState().signalingExperiments.remoteSupport("video_escalation_by_unmute")};d.isNegotiationAllowed=function(){var a=this.getState();return this.remoteWillNotInitSDPUpdate()||!a.request};d.isStarted=function(){var a=this.getState();return a.inProgress&&a.token!==null};d.getToken=function(){return this.getState().token};return c}(b("FluxReduceStore"));a.__moduleID=e.id;e.exports=new a(b("VFRTCAppDispatcher"))}),null);
__d("VFRTCP2PCallStore",["FluxReduceStore","VFRTCAppDispatcher","VFRTCCallType","VFRTCP2PCallAdminMessageReducers","VFRTCP2PCallReducer","VFRTCP2PCallStoreState"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=[(a=b("VFRTCP2PCallReducer")).callEnd,a.callInit,a.processCallType,a.processConnectionStatus,a.processEndCallReason,a.processPoppedOutScreenContent,a.processMultiwayEscalationSupport,a.processSignalingExperiments,a.processMessage,a.processIsCaller,a.processWasConnected,a.processWasStarRatingDone,a.processPoorNetworkQuality,b("VFRTCP2PCallAdminMessageReducers").processCallInit,b("VFRTCP2PCallAdminMessageReducers").processCallStart,b("VFRTCP2PCallAdminMessageReducers").processCallEnd];c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.getInitialState=function(){return new(b("VFRTCP2PCallStoreState"))()};d.reduce=function(a,b){return g.reduce(function(a,c){return c(a,b)},a)};d.isAudioOnly=function(){return this.getState().callType===b("VFRTCCallType").AUDIO_ONLY};d.isCaller=function(){return this.getState().isCaller};return c}(b("FluxReduceStore"));c.__moduleID=e.id;e.exports=new c(b("VFRTCAppDispatcher"))}),null);
__d("VFRTCP2PCallStoreState",["VFRTCCallType","VFRTCP2PProtocolHandler","VFRTCSignalingExperiments","immutable"],(function(a,b,c,d,e,f){"use strict";a={adminMessage:null,callType:b("VFRTCCallType").AUDIO_ONLY,connectionStatus:"INIT",endCallReason:null,escalationConferenceName:null,isCaller:!1,isPeerOnMobile:!1,isPoorNetworkQualityShown:!1,isRedialFooterButtonShown:!1,isRemoteVideoSupported:!0,isScreenContentPoppedOut:!1,isStarRatingShown:!1,offerEscalationSupport:!1,protocolHandler:new(b("VFRTCP2PProtocolHandler"))(),signalingExperiments:new(b("VFRTCSignalingExperiments"))(),wasConnected:!1,wasStarRatingDone:!1};c=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(b("immutable").Record(a));e.exports=c}),null);
__d("VFRTCSettingsAudioOutputPreview.react",["cx","Promise","MercurySoundsConfig","React","ShimButton.react","VFFBRTCUtils","VFRTCLogger","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=b("React").PureComponent;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={currentTime:0,disabled:!0,duration:0,playing:!1},d.$5=function(){var a=d.$1;if(!a||d.state.disabled)return;d.state.playing?(a.pause(),a.currentTime=0,d.$11()):(d.setState({disabled:!0}),b("promiseDone")(b("Promise").resolve(a.play()),function(){return d.setState({disabled:!1})}))},d.$12=function(a){a&&(d.$2=a)},d.$13=function(a){a&&(a.volume=.3,d.$1=a)},d.$14=function(a){a=a.target;d.setState({disabled:!1,duration:a.duration})},d.$15=function(){window.clearInterval(d.$3);d.setState({playing:!0,currentTime:0});var a=Date.now(),b=function(){return d.setState({currentTime:(Date.now()-a)/1e3})};b();d.$3=window.setInterval(b,40)},d.$11=function(){window.clearInterval(d.$3),d.$3=window.setTimeout(function(){return d.setState({playing:!1,currentTime:0})},250)},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.render=function(){return b("React").jsxs(b("ShimButton.react"),{className:"_7bn0",onClick:this.$5,tabIndex:0,children:[this.$6(),this.$7(),this.$8(),this.$9(),this.$10()]})};d.$6=function(){return b("React").jsx("audio",{ref:this.$12,autoPlay:!0})};d.$7=function(){return b("React").jsxs("audio",{ref:this.$13,autoPlay:!1,loop:!1,preload:"auto",onDurationChange:this.$14,onPlay:this.$15,onEnded:this.$11,children:[b("React").jsx("source",{src:b("MercurySoundsConfig").settings_preview_sound_mp3_url,type:"audio/mpeg"}),b("React").jsx("source",{src:b("MercurySoundsConfig").settings_preview_sound_ogg_url,type:"audio/ogg"})]})};d.$8=function(){var a=this.state.playing?b("React").jsx("path",{d:"M7 5h2v10H7V5zm4 0h2v10H11V5z"}):b("React").jsx("path",{d:"M7 6l6 4-6 4"});return b("React").jsx("svg",{className:"_7bn1 button",viewBox:"0 0 20 20",children:a})};d.$9=function(){var a=this.state,c=a.duration;a=a.currentTime;return b("React").jsx("div",{className:"_7bm4",children:b("React").jsx("div",{className:"_7bm5",style:{transform:"scaleX("+(c?a/c:0)+")"}})})};d.$10=function(){var a=this.state.playing?this.state.currentTime:this.state.duration;return b("React").jsx("div",{className:"_7bn1 text",children:Math.floor(a)+"s"})};d.componentDidMount=function(){var a=this,b=this.props,c=b.sinkID;b=b.mediaStream;this.$16(b);this.$4=window.setTimeout(function(){return a.$17(c)},1e3)};d.componentDidUpdate=function(a){var b=this.props,c=b.sinkID;b=b.mediaStream;b!==a.mediaStream?(this.$16(b),this.$17(c)):c!==a.sinkID&&this.$17(c)};d.$16=function(a){this.$2&&a&&b("VFFBRTCUtils").attachMediaStream(this.$2,a)};d.$17=function(a){window.clearTimeout(this.$4);if(!this.$18()||!a)return;[this.$2,this.$1].reduce(function(b,c){return c?b.then(function(){return c.setSinkId(a)}):b},b("Promise").resolve())["catch"](function(a){})};d.$18=function(){var a=HTMLAudioElement;a=a.prototype;return"sinkId"in a&&typeof a.setSinkId==="function"};d.componentWillUnmount=function(){this.$1&&this.$1.pause(),window.clearInterval(this.$3),window.clearTimeout(this.$4),this.$2=null,this.$1=null};return c}(a);c.defaultProps={sinkID:null};e.exports=c}),null);
__d("VFRTCAppData",["FacebookAppIDs","VFDesktopHelper","WorkplaceChatHelper","gkx"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={getAppID:function(){if(b("WorkplaceChatHelper").isDesktopChatApp())return this._getWorkplaceChatDesktopAppID();else if(b("VFDesktopHelper").isDesktopApp()&&b("gkx")("794738"))return Number(b("VFDesktopHelper").getAppID());return b("FacebookAppIDs").WWW},getChannelManagerAppName:function(){switch(g.getMWAppID()){case b("FacebookAppIDs").MESSENGERDOTCOM.toString():return"messenger_dot_com";case b("FacebookAppIDs").WWW.toString():return"www";case b("FacebookAppIDs").WORKPLACE_DESKTOP.toString():return"workplace";case b("FacebookAppIDs").MESSENGER_DESKTOP_ARCHON_MACOS.toString():return"desktop_video_chat";case b("FacebookAppIDs").MESSENGER_DESKTOP_ARCHON_WINDOWS.toString():return"desktop_video_chat_for_windows";default:return"desktop"}},_getWorkplaceChatDesktopAppID:function(){return b("WorkplaceChatHelper").getAppID()||b("FacebookAppIDs").WORKPLACE_DESKTOP},getMWAppID:function(){return b("FacebookAppIDs").MQTT_WEB.toString()}};e.exports=g}),null);
__d("VFRTCCallInitUtils",["invariant","CurrentUser","FBRTCParticipantCallState","MercuryIDs","MessengerParticipants.bs","MessengerParticipantsImages.re","URI","VFRTCCallActions","VFRTCCallStore","VFRTCCallSummary","VFRTCCallSummaryStore","VFRTCConstants","VFRTCUser","immutable"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=b("VFRTCConstants").CallType,j=b("VFRTCConstants").SignalingProtocol;a={initializeCallSummary:function(a){var c=b("VFRTCCallSummary").restoreOrInitialize(b("VFRTCCallSummaryStore").getInstance(),a.peerID,a.callID,a.isCaller);b("VFRTCCallActions").setCallSummary(c);b("VFRTCCallStore").mutateCallSummary(function(b){b.onPopupOpened(),b.setCallType(a.protocol===j.P2P?a.isAudio?i.VOIP:i.DIRECT_VIDEO:"mws"),b.setActiveConnection(a.protocol===j.P2P?"p2p":"mws")})},initializeRTCUsers:function(a,c){var d=this;a=a.map(function(a){return b("MercuryIDs").getParticipantIDFromUserID(a)});b("MessengerParticipants.bs").getMulti(a,function(a){a=b("immutable").Map(a);d.initializeParticipantsAndStartCall(a,!0,c)})},initializeParticipantsAndStartCall:function(a,c,d){var e=this,f=a.keySeq().toArray();b("MessengerParticipantsImages.re").getBigImageMultiWithSize({ids:f,callback:function(f){c&&b("VFRTCCallActions").initRemoteUsers(a.filter(function(a){a=a.fbid;return a!==b("CurrentUser").getID()}).map(function(a){return e._createRTCUser(a,f)}).toSet());var g=b("MercuryIDs").getParticipantIDFromUserID(b("CurrentUser").getID());b("VFRTCCallActions").initLocalUser(e._createRTCUser(a.get(g),f));d()},size:100})},_createRTCUser:function(a,c){var d=a.big_image_src,e=a.fbid,f=a.user_type,i=a.href,j=a.image_src,k=a.is_messenger_user,l=a.name,m=a.room_location,n=a.short_name;a=a.vanity;e||g(0,1174);if(c){var o=b("MercuryIDs").getParticipantIDFromUserID(e);d=c[o]}return new(b("VFRTCUser"))({FBID:e,isGuestUser:f==="guest",isMessengerUser:!!k,participantState:{state:b("FBRTCParticipantCallState").UNKNOWN},profileUrl:new(h||(h=b("URI")))(i),profilePictureUrl:d||j,roomLocation:m,userName:l,userShortName:n,vanity:a?a:""})}};e.exports=a}),null);
__d("VFRTCGroupCallEscalator",["CurrentUser","MercuryIDs","MessengerParticipants.bs","VFRTCAppDispatcher","VFRTCCallStore","VFRTCConsoleLogger","VFRTCConstants","VFRTCGroupCallActions","VFRTCGroupCallEscalationActions","VFRTCGroupCallEscalationStore","VFRTCGroupCallStore","VFRTCMWProtocolHandler","VFRTCMWProtocolStore","VFRTCScreenSharingUtils","VFRTCUtils","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("VFRTCConstants").GroupVideoViewLayout,h=45e3;a=function(){__p&&__p();function a(a,c,d,e){this.$3=a,this.$4=c,this.$5=d,this.$1=String(e),b("VFRTCGroupCallEscalationActions").setP2PCallSummary(b("VFRTCCallStore").getState().callSummary),this.$6=[d],this.$8=null}var c=a.prototype;c.getParticipants=function(){return this.$8};c.$9=function(){var a=this.$3,c=this.$1;return window.setTimeout(function(){var d=b("VFRTCGroupCallEscalationStore").isEscalated(),e=b("VFRTCCallStore").getState();e=e.callInfo;!d&&(e.callID===c||e.conferenceName===a)&&(i("Group Escalation timed out"),b("VFRTCGroupCallEscalationStore").logToP2PCallSummary(function(a){a.setEscalationTimedOut(),b("VFRTCGroupCallEscalationActions").cancel(a)}))},h)};c.startEscalationToMultiway=function(){__p&&__p();var a=this;i("Escalating P2P call to Multiway call %o",this.$3);var c=b("VFRTCGroupCallEscalationStore").getState().inProgress;if(c)return;b("VFRTCGroupCallEscalationActions").start();this.$2=this.$9();this.$7=new(b("VFRTCMWProtocolHandler"))();b("VFRTCAppDispatcher").explicitlyRegisterStores([b("VFRTCGroupCallStore"),b("VFRTCMWProtocolStore")]);b("VFRTCGroupCallActions").setLayout(g.GRID);var d=b("MercuryIDs").getParticipantIDFromUserID(b("CurrentUser").getID());b("MessengerParticipants.bs").get(d,function(c){var e={};e[d]=c;c=b("immutable").Map(e);a.$8=c;b("VFRTCGroupCallActions").initThread(null,c);a.$10()})};c.$10=function(){var a=b("VFRTCCallStore").getState().localUser.getStream(),c=b("VFRTCCallStore").getState().localUser.getScreenStream(),d=a;c&&b("VFRTCScreenSharingUtils").isGroupCallScreenSharingSupported()&&(a&&b("VFRTCUtils").transferAudioTracks(c,a),d=c);d&&this.$7.onStreamReady(d,this.$6,this.$3,!0,{callTrigger:"multiway_escalation",p2pCallID:this.$1})};return a}();a.ESCALATION_TIMEOUT=h;function i(){}e.exports=a}),null);
__d("VFRTCP2PCallEscalator",["Promise","VFRTCCallActions","VFRTCCallStore","VFRTCCallSummaryStore","VFRTCConsoleLogger","VFRTCConstants","VFRTCP2PCallEscalationActions","VFRTCP2PCallEscalationStore","VFRTCP2PCallStore","VFRTCP2PProtocolHandler","VFRTCPeerConnection","VFRTCSupport","VFRTCUtils","dangerouslyBypassDispatchError"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("VFRTCConstants").PayloadType,h=25e3;a=function(){__p&&__p();a.initVideoInAudioCall=function(){return b("VFRTCSupport").videoEscalationByUnmuteWorkaround()};a.isEscalated=function(){return b("VFRTCP2PCallEscalationStore").isEscalated()};a.isNegotiationAllowed=function(){return b("VFRTCP2PCallEscalationStore").isNegotiationAllowed()};function a(a,b,c){this.$3=a,this.$1=b,this.$2=c,this.$6()}var c=a.prototype;c.$6=function(){__p&&__p();var a=this,c=b("VFRTCP2PCallEscalationStore").getState();this.$4=b("VFRTCP2PCallEscalationStore").addListener(function(){__p&&__p();var d=b("VFRTCP2PCallEscalationStore").getState();if(d===c)return;!d.awaitingACK&&d.awaitingACK!==c.awaitingACK&&!d.inProgress&&window.clearTimeout(a.$5);if(d.callType!==c.callType&&d.inProgress){var e=b("VFRTCCallStore").getState();e=e.callSummary;e.setCallType(d.callType);e.save(b("VFRTCCallSummaryStore").getInstance())}c=d})};c.destroy=function(){i("P2P Escalator:","destroy"),this.$4.remove(),window.clearTimeout(this.$5)};c.generateRequestToken=function(a){__p&&__p();var c=b("VFRTCP2PCallEscalationStore").getState();c=c.token;if(c!=null&&a){i("P2P Escalator:","request token","reuse");return c}i("P2P Escalator:","request token");c=this.$2.sendVideoEscalationRequest(this.$3,this.$1,a);window.clearTimeout(this.$5);this.$5=this.$7();return c.msg_id.toString()};c.generateResponseToken=function(a,c){__p&&__p();var d=b("VFRTCP2PCallEscalationStore").getState();d=d.token;if(d!=null){i("P2P Escalator:","response token","reuse");return d}i("P2P Escalator:","response token",c,a);d=a.peerID;var e=a.callID;a=a.msgID;d=this.$2.sendVideoRequestResponse(d,e,a,c);window.clearTimeout(this.$5);var f=d.msg_id.toString();!c?b("dangerouslyBypassDispatchError")(function(){return b("VFRTCP2PCallEscalationActions").decline(f)}):this.$5=this.$7();return f};c.$7=function(){return window.setTimeout(b("VFRTCP2PCallEscalationActions").timeout,h)};c.parseMessage=function(a){i("P2P Escalator:","parse message",this.$3,a.msgType);switch(a.msgType){case g.VIDEO_REQUEST:a.ackID?this.$8(a):this.$9(a);break;case g.ACK:a.msg.ack_type===g.VIDEO_REQUEST&&b("VFRTCP2PCallEscalationActions").handleACK(a.ackID.toString());break}};c.$8=function(c){i("P2P Escalator:","parse response",c);var d=c.ackID.toString();b("VFRTCP2PCallEscalationStore").getToken()===d&&this.$10(c);b("VFRTCP2PCallEscalationActions").parseResponse(a.requestVideoOn(c.msg),d);window.clearTimeout(this.$5)};c.$9=function(c){__p&&__p();i("P2P Escalator:","parse request",c);if(b("VFRTCP2PCallEscalationStore").isInProgress()&&!a.requestVideoOn(c.msg)){b("VFRTCP2PCallEscalationStore").didCurrentUserInitiate()||this.$10(c);b("VFRTCP2PCallEscalationActions").cancel();return}if(b("VFRTCP2PCallEscalationStore").isInProgress()&&b("VFRTCP2PCallEscalationStore").didCurrentUserInitiate()){i("P2P Escalator:","auto-approve","mutual consent");b("VFRTCP2PCallEscalationActions").approve();this.$10(c);this.generateResponseToken(c,!0);return}if(b("VFRTCP2PCallEscalationStore").isEscalated()){a.requestVideoOn(c.msg)?(i("P2P Escalator:","auto-approve"),this.$10(c),this.generateResponseToken(c,!0),window.clearTimeout(this.$5)):(i("P2P Escalator:","mute remote video"),b("VFRTCP2PCallEscalationActions").muteRemoteVideo());return}i("P2P Escalator:","request",c);this.$10(c);b("VFRTCP2PCallEscalationActions").setRequest(c)};c.$10=function(a){var b=a.peerID,c=a.callID;a=a.msg;i("P2P Escalator:","ACK","sent");this.$2.sendAck(b,c,a)};a.requestVideoOn=function(a){var b=a.reqVideoOn;a=a.videoon;return Boolean(b||a)};a.initEscalation=function(a){__p&&__p();a===void 0&&(a=null);var c=b("VFRTCP2PCallStore").getState(),d=c.protocolHandler;c=b("VFRTCCallStore").getState();c=c.localUser;var e=b("VFRTCP2PCallStore").getState().callType==="AUDIO_ONLY",f=c.getStream();c=c.hasVideo();f&&c?(d.updateLocalVideoTracker(),c=b("Promise").resolve(f)):a!=null?(d.startLocalVideoTracker(a),c=b("Promise").resolve(a)):c=b("VFRTCP2PProtocolHandler").initStream(!0).then(function(a){d.startLocalVideoTracker(a);return a});return c.then(function(a){e?(b("VFRTCP2PCallEscalationActions").setEscalateToMediaStream(a),b("VFRTCP2PCallEscalationActions").start()):f?b("VFRTCCallActions").replaceLocalStream(f,a):b("VFRTCCallActions").addLocalStream(a);return a})};a.onEscalationSucceeded=function(){__p&&__p();var c=b("VFRTCP2PCallEscalationStore").getEscalateMediaStream(),d=b("VFRTCCallStore").getState();d=d.localUser;if(d.getStream()===c){var e=b("VFRTCCallStore").getState();e=e.remoteUsers;d.toggleMuteVideo(!1);e.first()&&e.first().toggleMuteVideo(!1)}else c&&b("dangerouslyBypassDispatchError")(function(){a.updateEscalationStream(c)})};a.onEscalationFailed=function(){__p&&__p();var a=b("VFRTCP2PCallEscalationStore").getEscalateMediaStream(),c=b("VFRTCCallStore").getState();c=c.localUser;if(c.getStream()===a){var d=b("VFRTCCallStore").getState();d=d.remoteUsers;c.toggleMuteVideo(!0);d.first()&&d.first().toggleMuteVideo(!0)}else if(a){b("VFRTCUtils").stopMediaStream(a);c=b("VFRTCP2PCallStore").getState();d=c.protocolHandler;d.updateLocalVideoTracker()}};a.acceptEscalation=function(c){__p&&__p();var d=b("VFRTCCallStore").getState(),e=d.localUser;d=d.remoteUsers;var f=Boolean(c==null?void 0:c.muteVideo);if(e.hasVideo()){e.toggleMuteVideo(f);d.first()&&d.first().toggleMuteVideo(!1);c=b("VFRTCP2PCallStore").getState();d=c.protocolHandler;d.updateLocalVideoTracker();b("VFRTCP2PCallEscalationActions").setResponse(!0);return b("Promise").resolve(e.streams.first())}else return b("VFRTCP2PProtocolHandler").initStream(!1).then(function(c){b("VFRTCP2PCallEscalationActions").setResponse(!0);a.updateEscalationStream(c);e.toggleMuteVideo(f);return c})};a.declineEscalation=function(){b("VFRTCP2PCallEscalationActions").setResponse(!1)};a.updateEscalationStream=function(a){__p&&__p();var c=b("VFRTCCallStore").getState().localUser.getStream();if(b("VFRTCPeerConnection").isFirefoxSupportAddTrack()&&c){for(var d=a.getVideoTracks(),e=Array.isArray(d),f=0,d=e?d:d[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(e){if(f>=d.length)break;g=d[f++]}else{f=d.next();if(f.done)break;g=f.value}g=g;c.addTrack(g)}g=b("VFRTCP2PCallStore").getState();f=g.protocolHandler;f.updateAddedTracksForFirefoxVideoEscalation(c)}else b("VFRTCP2PProtocolHandler").replaceLocalStream(a)};return a}();a.ACK_TIMEOUT=h;function i(){}e.exports=a}),null);
__d("VFRTCPeerConnection",["Promise","regeneratorRuntime","RTCConfig","RTCIceCandidate","RTCPeerConnection","UserAgent","VFRTCConfig","VFRTCConsoleLogger","VFRTCExperiment","VFRTCSdpUtils","VFRTCSessionDescription"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();a.isGetSendersSupported=function(){return p("getSenders")};a.isReplaceTrackSupported=function(){return typeof window.RTCRtpSender==="function"&&typeof window.RTCRtpSender.prototype.replaceTrack==="function"};function a(a,b,c){__p&&__p();var d=this;b===void 0&&(b={});c===void 0&&(c={});this.$3=[];this.$4=[];this.$7=new Map();this.addEventListener=function(a,b){var c=this.$7.get(a);Array.isArray(c)||(c=[],this.$7.set(a,c));c.push(b);this.$5.addEventListener(a,b)};this.removeEventListener=function(a,b){var c=this.$7.get(a);Array.isArray(c)&&(c=c.filter(function(a){return a!==b}),c.length<1?this.$7["delete"](a):this.$7.set(a,c));this.$5.removeEventListener(a,b)};this.$11=function(a){a=a.candidate;a&&d.$4.push(a)};this.$12=function(a){a=a.channel;d.$14(a)};this.$6=a;this.$1=b;this.$2=c;this.$5=this.$10()}var c=a.prototype;c.$10=function(){__p&&__p();var a=new(b("RTCPeerConnection"))(babelHelpers["extends"]({},this.$1,{sdpSemantics:"plan-b"}),this.$2);a.addEventListener("icecandidate",this.$11);a.addEventListener("datachannel",this.$12);for(var c=this.$7.entries(),d=Array.isArray(c),e=0,c=d?c:c[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=c.length)break;f=c[e++]}else{e=c.next();if(e.done)break;f=e.value}f=f;var g=f[0];f=f[1];for(var f=f,h=Array.isArray(f),i=0,f=h?f:f[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var j;if(h){if(i>=f.length)break;j=f[i++]}else{i=f.next();if(i.done)break;j=i.value}j=j;a.addEventListener(g,j)}}return a};c.removeAllListeners=function(){__p&&__p();for(var a=this.$7.entries(),b=Array.isArray(a),c=0,a=b?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var d;if(b){if(c>=a.length)break;d=a[c++]}else{c=a.next();if(c.done)break;d=c.value}d=d;var e=d[0];d=d[1];for(var d=d,f=Array.isArray(d),g=0,d=f?d:d[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var h;if(f){if(g>=d.length)break;h=d[g++]}else{g=d.next();if(g.done)break;h=g.value}h=h;this.$5.removeEventListener(e,h)}}this.$5.removeEventListener("datachannel",this.$12);this.$5.removeEventListener("icecandidate",this.$11)};c.reset=function(){__p&&__p();var a=this,c=this.getSenders(),d=this.$5;for(var e=this.$7.entries(),f=Array.isArray(e),g=0,e=f?e:e[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var h;if(f){if(g>=e.length)break;h=e[g++]}else{g=e.next();if(g.done)break;h=g.value}h=h;var i=h[0];h=h[1];for(var h=h,j=Array.isArray(h),k=0,h=j?h:h[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var l;if(j){if(k>=h.length)break;l=h[k++]}else{k=h.next();if(k.done)break;l=k.value}l=l;d.removeEventListener(i,l)}}d.removeEventListener("datachannel",this.$12);d.removeEventListener("icecandidate",this.$11);this.$3=[];this.$4=[];this.$5=this.$10();for(var l=d.getLocalStreams(),k=Array.isArray(l),j=0,l=k?l:l[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(k){if(j>=l.length)break;h=l[j++]}else{j=l.next();if(j.done)break;h=j.value}i=h;this.$13(i,c)&&this.addStream(i)}return b("Promise").race([new(b("Promise"))(function(b){var c=a.$5,e=function a(e){e=e.target;e.iceConnectionState!=="checking"&&e.iceConnectionState!=="new"&&(b(),c.removeEventListener("iceconnectionstatechange",a),o(d))};c.addEventListener("iceconnectionstatechange",e)}),new(b("Promise"))(function(a){return window.setTimeout(a,5e3)})])["catch"](function(a){return b("Promise").resolve()}).then(function(){o(d)})};c.$13=function(c,d){return!b("VFRTCConfig").isVCEndpointCall()||!b("RTCConfig").CollabWhitelistedBrowserGK?!0:a.isFirefoxSupportAddTrack()?c.getTracks().some(function(a){return d!=null?d.some(function(b){return b.track===a}):!1}):c.active};c.close=function(){o(this.$5)};c.getCreatedIceCandidates=function(){return this.$4};c.$14=function(a){var b=this;a.addEventListener("close",function(){b.$3=b.$3.filter(function(b){return b!==a})});this.$3.push(a)};c.transformRemoteIceCandidateMid=function(a){return this.$9&&this.$9[a]||a};c.transformLocalIceCandidateMid=function(a){return this.$8&&this.$8[a]||a};c.transformOfferSdp=function(a){return b("VFRTCSdpUtils").transformSdpMids(a,this.$8)};c.transformAnswerSdp=function(a){return b("VFRTCSdpUtils").transformSdpMids(a,this.$9)};c.onReceivedRemoteIceCandidate=function(a){var c=a.sdp,d=a.label;a=a.sdp_mid;a=this.transformRemoteIceCandidateMid(a);d=new(b("RTCIceCandidate"))({sdpMLineIndex:d,candidate:b("VFRTCSdpUtils").fixMobileIceSdp(c),sdpMid:a});return b("Promise").resolve(this.$5.addIceCandidate(d))};c.getSignalingProtocol=function(){return this.$6};c.getLocalStreams=function(){return this.$5.getLocalStreams()};c.getRemoteStreams=function(){return this.$5.getRemoteStreams()};c.getLocalTracks=function(){if(p("getLocalStreams")){var a=[];this.$5.getLocalStreams().forEach(function(b){a.push.apply(a,b.getTracks())});return a}return this.getSenders().map(function(a){return a.track}).filter(Boolean)};a.isFirefoxSupportAddTrack=function(){return b("UserAgent").isBrowser("Firefox")&&p("addTrack")&&a.isGetSendersSupported()};a.isFirefoxSupporRemoveTrack=function(){return b("UserAgent").isBrowser("Firefox")&&p("removeTrack")&&a.isGetSendersSupported()};a.isTrackAPISupported=function(){return p("removeTrack")&&p("addTrack")&&a.isReplaceTrackSupported()&&a.isGetSendersSupported()};c.addStream=function(b,c){__p&&__p();var d=this;if(a.isFirefoxSupportAddTrack()){var e=this.getSenders(),f=function(){__p&&__p();if(h){if(i>=g.length)return"break";j=g[i++]}else{i=g.next();if(i.done)return"break";j=i.value}var a=j,f=e.find(function(b){return b.track===a});f===void 0&&(f=d.$5.addTrack(a,b));c&&f&&c(f)};for(var g=b.getTracks(),h=Array.isArray(g),i=0,g=h?g:g[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var j,k=f();if(k==="break")break}}else this.$5.addStream(b)};c.removeStream=function(b){__p&&__p();if(a.isFirefoxSupporRemoveTrack()){var c=b.getTracks(),d=this.getSenders().filter(function(a){return c.includes(a.track)});for(var d=d,e=Array.isArray(d),f=0,d=e?d:d[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(e){if(f>=d.length)break;g=d[f++]}else{f=d.next();if(f.done)break;g=f.value}g=g;this.$5.removeTrack(g)}}else this.$5.removeStream(b)};c.removeTrack=function(a){this.$5.removeTrack(a)};c.addTrack=function(a,b){return this.$5.addTrack(a,b)};c.createOffer=function(a,c,d){__p&&__p();var e=this;return b("regeneratorRuntime").async(function(f){__p&&__p();while(1)switch(f.prev=f.next){case 0:a===void 0&&(a={});c===void 0&&(c={});d===void 0&&(d={});return f.abrupt("return",h(this.$5,a).then(function(b){return u(b,d,a)}).then(function(a){var c=b("VFRTCSdpUtils").constructMidMap(a.sdp);e.$8=c.offerSdpMap;e.$9=c.answerSdpMap;return a}).then(function(a){return new(b("VFRTCSessionDescription"))(e.$6,a,c)}));case 4:case"end":return f.stop()}},null,this)};c.createAnswer=function(a){var c=this;return b("regeneratorRuntime").async(function(d){while(1)switch(d.prev=d.next){case 0:a===void 0&&(a={});return d.abrupt("return",i(this.$5).then(function(d){return new(b("VFRTCSessionDescription"))(c.$6,d,a)}));case 2:case"end":return d.stop()}},null,this)};c.setLocalDescription=function(a){var c;return b("regeneratorRuntime").async(function(b){while(1)switch(b.prev=b.next){case 0:c=a.toDesc();return b.abrupt("return",m(this.$5,c).then(function(){return a}));case 2:case"end":return b.stop()}},null,this)};c.setRemoteDescription=function(a){return b("regeneratorRuntime").async(function(b){while(1)switch(b.prev=b.next){case 0:return b.abrupt("return",n(this.$5,a.toDesc()).then(function(){return a}));case 1:case"end":return b.stop()}},null,this)};c.getLocalDescription=function(){return new(b("VFRTCSessionDescription"))(this.$6,this.$5.localDescription||{})};c.getRemoteDescription=function(){return new(b("VFRTCSessionDescription"))(this.$6,this.$5.remoteDescription||{})};c.getSignalingState=function(){return this.$5.signalingState};c.getIceGatheringState=function(){return this.$5.iceGatheringState};c.getIceConnectionState=function(){return this.$5.iceConnectionState};c.getSenders=function(){return a.isGetSendersSupported()===!1?[]:this.$5.getSenders()};c.getStats=function(a){__p&&__p();var c=this;return b("regeneratorRuntime").async(function(d){__p&&__p();while(1)switch(d.prev=d.next){case 0:if(!(a!=null)){d.next=2;break}return d.abrupt("return",b("Promise").reject(new Error("getStats() doesn't support selector (yet)")));case 2:if(!b("UserAgent").isBrowser("Edge")){d.next=4;break}return d.abrupt("return",b("Promise").resolve(new Map()));case 4:if(!b("UserAgent").isBrowser("Firefox")){d.next=6;break}return d.abrupt("return",b("Promise").resolve(this.$5.getStats()).then(function(a){return b("UserAgent").isBrowser("Firefox >= 48")?a:r(a)}).then(function(a){__p&&__p();if(b("UserAgent").isBrowser("Firefox >= 53"))return a;try{a.forEach(function(a){a.type=s(a.type)})}catch(b){if(b.name!=="TypeError")throw b;a.forEach(function(b,c){a.set(c,babelHelpers["extends"]({},b,{type:s(b.type)}))})}return a}));case 6:if(!(b("UserAgent").isBrowser("Chrome")||b("UserAgent").isBrowser("Opera"))){d.next=8;break}return d.abrupt("return",new(b("Promise"))(function(a,b){c.$5.getStats(a,b)}).then(function(a){__p&&__p();var b={};for(var a=a.result(),c=Array.isArray(a),d=0,a=c?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;var f={id:e.id,timestamp:e.timestamp,type:s(e.type)};for(var g=e.names(),h=Array.isArray(g),i=0,g=h?g:g[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var j;if(h){if(i>=g.length)break;j=g[i++]}else{i=g.next();if(i.done)break;j=i.value}j=j;f[j]=e.stat(j)}b[f.id]=f}return b}).then(r));case 8:return d.abrupt("return",b("Promise").reject(new Error("getStats() not supported")));case 9:case"end":return d.stop()}},null,this)};c.createDataChannel=function(a,b){if(this.$5.createDataChannel){a=this.$5.createDataChannel(a,b);this.$14(a);return a}return null};c.getDataChannelByLabel=function(a){return this.$3.find(function(b){return b.label===a})};c.getSdpMidMaps=function(){return{offerSdpMap:this.$8,answerSdpMap:this.$9}};return a}();var g=b("UserAgent").isBrowser("Chrome < 59")||b("UserAgent").isBrowser("Opera < 46")||b("UserAgent").isBrowser("Firefox < 37");function h(a,c){return g?new(b("Promise"))(function(b,d){return a.createOffer(b,d,k(c))}):b("Promise").resolve(a.createOffer(k(c)))}function i(a){return g?new(b("Promise"))(function(b,c){return a.createAnswer(b,c)}):b("Promise").resolve(a.createAnswer())}var j=b("UserAgent").isBrowser("Chrome < 38")||b("UserAgent").isBrowser("Opera < 26");function k(a){var b=a.offerToReceiveAudio;b=b===void 0?!0:b;var c=a.offerToReceiveVideo;c=c===void 0?!0:c;a=babelHelpers.objectWithoutPropertiesLoose(a,["offerToReceiveAudio","offerToReceiveVideo"]);return j?Object.keys(a).length>0?{mandatory:{OfferToReceiveAudio:b,OfferToReceiveVideo:c},optional:babelHelpers["extends"]({},q(a))}:{mandatory:{OfferToReceiveAudio:b,OfferToReceiveVideo:c}}:babelHelpers["extends"]({offerToReceiveAudio:b,offerToReceiveVideo:c},a)}var l=b("UserAgent").isBrowser("Chrome < 51")||b("UserAgent").isBrowser("Opera < 38")||b("UserAgent").isBrowser("Firefox < 37");function m(a,c){return l?new(b("Promise"))(function(b,d){return a.setLocalDescription(c,b,d)}):b("Promise").resolve(a.setLocalDescription(c))}function n(a,c){return l?new(b("Promise"))(function(b,d){return a.setRemoteDescription(c,b,d)}):b("Promise").resolve(a.setRemoteDescription(c))}function o(a){a&&a.signalingState!=="closed"&&a.close()}function p(a){return typeof b("RTCPeerConnection").prototype[a]==="function"}function q(a){var b={},c=Object.keys(a);for(var d=0;d<c.length;d++){var e=c[d],f=""+e.substr(0,1).toUpperCase()+e.substr(1);b[f]=a[e]}return b}function r(a){return new Map(Object.keys(a).map(function(b){return[b,a[b]]}))}function s(a){switch(a){case"inbound-rtp":return"inboundrtp";case"outbound-rtp":return"outboundrtp";case"candidate-pair":return"candidatepair";case"local-candidate":return"localcandidate";case"remote-candidate":return"remotecandidate";default:return a}}function t(a,c){if(b("VFRTCConfig").isVCEndpointCall())return!1;a=a.video&&a.video.match(/H264/);if(!a&&!c.preserveH264){a=b("VFRTCExperiment").gen("rtc_browser_use_h264");return a.getParam("allow_h264","no")!=="yes"}return!1}function u(a,c,d){d===void 0&&(d={});var e=c.audio,f=c.video,g=a.sdp;a=a.type;t(c,d)&&(g=b("VFRTCSdpUtils").removeH264(g));e&&(g=b("VFRTCSdpUtils").preferCodec(g,e,!1));f&&(g=b("VFRTCSdpUtils").preferCodec(g,f,!0));return b("Promise").resolve({sdp:g,type:a})}e.exports=a}),null);
__d("XBrowserNotSupportedDialogController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/videocall/browser_not_supported/",{is_group_call:{type:"Bool",defaultValue:!1},participants:{type:"StringVector"},user_id:{type:"Int"},warning:{type:"Bool",defaultValue:!1},call_type:{type:"Enum",defaultValue:2,enumType:0},__asyncDialog:{type:"Int"}})}),null);
__d("VFWebRingListener",["invariant","ArchonAppBridge","VFDesktopHelper","VFRTCCallStore","VFRTCConstants","VFRTCGroupCallIncomingController","VFRTCIncomingCallController","VFRTCMessageListener","VFRTCMessengerRTCGroupCallIncomingDialogController","VFRTCMessengerRTCIncomingDialogController","VFRTCMessengerRTCMissedCallDialogController","VFRTCUnsupportedBrowserMessage","VFWebCallUtils","VFWebConferenceUtils","VFWebGroupCallIncomingDialogController","VFWebMissedCallDialogController","VFWebP2PCallIncomingDialogController","VFWebSupportUtils"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("VFRTCConstants").SignalingProtocol,i=null,j=null,k={init:function(){__p&&__p();if(i)return;b("VFRTCMessageListener").init(!1);var a=b("VFRTCMessengerRTCGroupCallIncomingDialogController"),c=b("VFRTCMessengerRTCIncomingDialogController");(b("VFWebSupportUtils").showIncomingCallDialogV2()||b("ArchonAppBridge").isArchon())&&(a=b("VFWebGroupCallIncomingDialogController"),c=b("VFWebP2PCallIncomingDialogController"));var d=b("VFWebSupportUtils").showP2PMissedCallDialogV2()?new(b("VFWebMissedCallDialogController"))():b("VFRTCMessengerRTCMissedCallDialogController");i=new(b("VFRTCGroupCallIncomingController"))(a,!1);i.setCustomAnswerHandler(function(a){var c=b("VFRTCCallStore").getState().localUser.FBID;a.callSummary.onCallStarted("answer button");b("VFWebCallUtils").joinOngoingCall({initializeVideo:a.initializeVideo,callID:a.callID.toString(),conferenceName:a.conferenceName,serverInfoData:a.serverInfoData,signalingProtocol:h.MULTIWAY,endCurrentCall:b("VFWebSupportUtils").canAcceptCallWhileInCall(),remoteUserFBIDs:a.participantFBIDs.filter(function(a){return a!==c}),suppressSwitchCallUI:b("VFDesktopHelper").isDesktopApp()})});b("VFRTCMessageListener").setMultiwayMessageHandler(i.onMessageReceived.bind(i));j=new(b("VFRTCIncomingCallController"))(c,b("VFRTCUnsupportedBrowserMessage"),d);j.setCustomAnswerHandler(function(a){k.stopListenP2P(),b("VFWebCallUtils").joinOngoingCall({initializeVideo:a.initializeVideo,isAudioCall:a.isAudioCall,conferenceName:b("VFWebConferenceUtils").buildP2PConferenceName(a.peerID),callID:a==null?void 0:a.callID,signalingProtocol:h.P2P,endCurrentCall:b("VFWebSupportUtils").canAcceptCallWhileInCall(),suppressSwitchCallUI:b("VFDesktopHelper").isDesktopApp()})});k.listenP2P()},listenP2P:function(){j||g(0,1836),k.stopListenP2P(),b("VFRTCMessageListener").setMessageHandler(function(a){j&&j.onMessageReceived(a)})},stopListenP2P:function(){b("VFRTCMessageListener").removeMessageHandler()},sendMessageToP2PIncomingController:function(a,b){b===void 0&&(b=!1),j||g(0,14315),j.onMessageReceived(a,{userAnsweredCall:b})},sendMessageToMWIncomingController:function(a,b){b===void 0&&(b=!1),i||g(0,14315),i.onMessageReceived(a,{userAnsweredCall:b})}};e.exports=k}),null);
__d("VFWebCallLogger",["FBRTCParticipantCallState","VFRTCAppDispatcher","VFRTCCallStore","VFWebLogger","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("immutable").List,h=b("immutable").Map,i=h();function a(a,c){b("VFRTCAppDispatcher").waitFor([b("VFRTCCallStore").getDispatchToken()]);s.logRTCCallAction(b("VFRTCCallStore").getState(),c);return a}function c(a,b){__p&&__p();var c=a.callInfo.conferenceName;if(c){var d=k(a.callInfo.conferenceName),e=b.type;switch(e){case"CALL":o(a,b,c,d);break;case"CALL_ERROR":p(a,b,c,d);break;case"ON_CONFERENCE_STATE":q(a,b,c,d);break;case"DISMISS":case"HANGUP":case"END_CALL":r(a,b,c,d)}}}function d(a,b){a=k(a);a.expectedParticipantCount=b}function f(){i=i.clear()}function j(a,b){b===void 0&&(b=0);b={expectedParticipantCount:b,callState:"init",lastStateChange:Date.now()};i=i.set(a,b);return b}function k(a){return i.has(a)?i.get(a):j(a)}function l(a,b){b!==a.callState&&(m(a.callState,b,a),a.lastStateChange=Date.now()),a.callState=b}function m(a,b,c){switch(a){case"init":}}function n(a){if(!a)return g();a=h(a.participantStates||{}).filter(function(a){return a.state===b("FBRTCParticipantCallState").CONNECTED});return g(a.keys())}function o(a,c,d,e){l(e,"connecting"),b("VFWebLogger").startTimer("vfweb_timer_call_join"),b("VFWebLogger").logCheckpoint(null,"vfweb_call_join_start",{conference_name:d,expected_participant_count:e.expectedParticipantCount}),i=i.withMutations(function(a){a.forEach(function(b,c){b!==e&&a.remove(c)})})}function p(a,c,d,e){l(e,"terminated"),b("VFWebLogger").logError(null,"VFWebJoinCallError",c.endCallReason+": "+c.endCallSubreason,{conference_name:d,duration:b("VFWebLogger").stopTimer("vfweb_timer_call_join"),expected_participant_count:e.expectedParticipantCount})}function q(a,c,d,e){a=n(c.request.conferenceStateRequest());c=a.size;e.callState==="connecting"&&b("VFWebLogger").logCheckpoint(null,"vfweb_call_join_success",{conference_name:d,duration:b("VFWebLogger").stopTimer("vfweb_timer_call_join"),participant_count:c,expected_participant_count:e.expectedParticipantCount});c>1&&e.callState!=="partying"?(b("VFWebLogger").startTimer("vfweb_timer_call_party"),b("VFWebLogger").logCheckpoint(null,"vfweb_party_start",{conference_name:d,participant_count:c})):c<2&&e.callState==="partying"&&b("VFWebLogger").logCheckpoint(null,"vfweb_party_end",{duration:b("VFWebLogger").stopTimer("vfweb_timer_call_party"),conference_name:d});l(e,c>1?"partying":"connected")}function r(a,c,d,e){e.callState==="partying"?b("VFWebLogger").logCheckpoint(null,"vfweb_party_end",{duration:b("VFWebLogger").stopTimer("vfweb_timer_call_party"),conference_name:d}):e.callState==="connecting"?b("VFWebLogger").logCheckpoint(null,"vfweb_call_join_cancel",{duration:b("VFWebLogger").stopTimer("vfweb_timer_call_join"),conference_name:d,expected_participant_count:e.expectedParticipantCount}):c.type==="DISMISS"&&b("VFWebLogger").logCheckpoint(null,"vfweb_call_join_remote_cancel",{duration:b("VFWebLogger").stopTimer("vfweb_timer_call_join"),conference_name:d,expected_participant_count:e.expectedParticipantCount}),l(e,"terminated")}var s={reduce:a,logRTCCallAction:c,setExpectedParticipantCount:d,clearCallLogs:f};e.exports=s}),null);
__d("VFWebLogger",["VFDesktopHelper","VFWebUserActionsTypedLogger","WebFunnelLogger","immutable","once"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("immutable").Map;a=function(){__p&&__p();function a(){var a=this;this.$1=g();this.logAppLoaded=b("once")(function(){var b=a.stopTimer("vfweb_timer_app_loading");b!=null&&a.logCheckpoint("vfweb_app","vfweb_app_loaded",{duration:b})})}var c=a.prototype;c.logRTCCheckpoint=function(a){this.logCheckpoint(null,"vfweb_rtc_checkpoint",{event_extra:{rtc_checkpoint_desc:a.checkpoint},duration:a.duration})};c.logCheckpoint=function(a,b,c){this.logEvent(babelHelpers["extends"]({},Object.assign({},c),{event:"checkpoint",surface:a,checkpoint:b}))};c.logClick=function(a,b,c){this.logEvent(babelHelpers["extends"]({},Object.assign({},c),{event:"click",surface:a,component:b}))};c.logError=function(a,b,c,d){this.logEvent(babelHelpers["extends"]({},Object.assign({},d),{event:"error",surface:a,error_domain:b,error_details:c}))};c.logImpression=function(a,b){this.logEvent(babelHelpers["extends"]({},Object.assign({},b),{event:"impression",surface:a}))};c.logEvent=function(a){var c=b("VFDesktopHelper").getSessionID();a=babelHelpers["extends"]({},a,{client_time:Math.floor(Date.now()/1e3),device_id:b("VFDesktopHelper").getDeviceID(),session_id:c});var d=this.$2(a);d!=null&&new(b("WebFunnelLogger"))("VFWebAppFunnelDefinition").setAction(d).setSessionKey(c).log();new(b("VFWebUserActionsTypedLogger"))().updateData(a).log()};c.startTimer=function(a){var b=Date.now();this.$1=this.$1.set(a,b);return b};c.stopTimer=function(a){var b=this.$1.get(a);if(b){this.$1=this.$1.remove(a);return Date.now()-b}return null};c.toStringStringMap=function(a){var b={};a&&Object.keys(a).forEach(function(c){var d=a[c];b[c]=(c=d)!=null?c:d.toString()});return b};c.$2=function(a){switch(a.event){case"checkpoint":return a.checkpoint;case"click":return a.component;case"error":return a.error_domain;case"impression":default:return null}};return a}();e.exports=new a()}),null);
__d("VFWebCreateCallMutation",["Promise","RelayFBEnvironment","RelayModern","VFRTCCallActions","VFRTCCallSummary","VFRTCCallSummaryStore","VFRTCConstants","nullthrows","VFWebCreateCallMutation.graphql"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=b("RelayModern").commitMutation;b("RelayModern").graphql;var i=b("VFRTCConstants").SignalingProtocol,j=g!==void 0?g:g=b("VFWebCreateCallMutation.graphql");function k(a){var c=new(b("VFRTCCallSummary"))({peerID:"MW_PEER_ID",callID:b("nullthrows")(a.clientCallId),isCaller:!0});c.onCallStarted(a.trigger);c.save(b("VFRTCCallSummaryStore").getInstance())}function a(a){k(a);return new(b("Promise"))(function(c,d){var e;h(b("RelayFBEnvironment"),{mutation:j,variables:{input:{thread_fbid:a==null?void 0:(e=a.thread)==null?void 0:e.id}},onCompleted:function(e){e=(e=e.messenger_create_call_conference)==null?void 0:e.conference_name;e?(b("VFRTCCallActions").initialize({callID:a.clientCallId,protocol:i.MULTIWAY,conferenceName:e}),c()):d(new Error("Unrecognized response"))},onError:function(a){d(a)}})})}e.exports=a}),null);
__d("VFWebLogHistory",["FBLogger","LogHistory"],(function(a,b,c,d,e,f){"use strict";a=Object.create(b("LogHistory").getInstance("dvc"));a.errorObject=function(a,c,d){d===void 0&&(d={});c=JSON.stringify(babelHelpers["extends"]({error:{name:c.name,message:c.message,stack:c.stack}},d));this.error(a,c);b("FBLogger")("VFWeb").mustfix(c)};e.exports=a}),null);
__d("VFWebEndCallMutation",["Promise","regeneratorRuntime","FBRTCHangupReason","VFRTCCallActions","VFRTCCallStore","VFRTCConstants","VFRTCP2PCallStore","VFRTCMWProtocolHandler","VFWebLogHistory","VFWebRingListener","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("VFRTCConstants").SignalingProtocol;function h(a){a&&a.endCall();b("VFWebRingListener").listenP2P();return b("Promise").resolve()}function i(a,c){return b("VFRTCMWProtocolHandler").genEndCall(b("nullthrows")(a),b("FBRTCHangupReason").HANGUP_CALL,{serverInfoData:c,keepLocalStream:!0})}function a(){__p&&__p();var a,c,d,e,f,j,k;return b("regeneratorRuntime").async(function(l){__p&&__p();while(1)switch(l.prev=l.next){case 0:a=b("VFRTCCallStore").getState(),c=a.callInfo,d=a.localUser;e=b("VFRTCP2PCallStore").getState().protocolHandler;f=c.conferenceState==="CONNECTED"||c.conferenceState==="CONNECTING";j=Boolean(c.protocol===g.P2P&&e);l.prev=4;if(!f){l.next=13;break}if(!j){l.next=11;break}l.next=9;return b("regeneratorRuntime").awrap(h(e));case 9:l.next=13;break;case 11:l.next=13;return b("regeneratorRuntime").awrap(i(c.conferenceName,c.serverInfoData));case 13:l.next=18;break;case 15:l.prev=15,l.t0=l["catch"](4),b("VFWebLogHistory").errorObject("VFWebEndCallMutation",l.t0);case 18:l.prev=18;k=b("VFRTCCallStore").getState().callInfo.callID;k===c.callID&&(b("VFRTCCallActions").reset(),b("VFRTCCallActions").initLocalUser(d));return l.finish(18);case 22:case"end":return l.stop()}},null,this,[[4,15,18,22]])}e.exports=a}),null);
__d("VFWebStartCallMutation",["Promise","FBRTCParticipantCallState","VFRTCCallType","VFRTCClientFeatureGating","VFRTCConstants","VFRTCLocalMessageQueue","VFRTCSdpUtils","VFRTCCallActions","VFRTCCallInitUtils","VFRTCCallStore","VFRTCMWProtocolHandler","VFRTCP2PCallStore","VFWebConferenceUtils","immutable","promiseDone"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("VFRTCConstants").SignalingProtocol;function h(a,c,d,e,f){__p&&__p();return new(b("Promise"))(function(h,i){__p&&__p();b("VFRTCCallActions").initialize({protocol:g.P2P,conferenceName:e,serverInfoData:null,callID:c.callID,isCaller:a,callType:f?b("VFRTCCallType").AUDIO_ONLY:b("VFRTCCallType").AUDIO_VIDEO});b("VFRTCCallInitUtils").initializeCallSummary({peerID:e,callID:c.callID!=null?c.callID:"0",isCaller:a,isAudio:f,protocol:b("VFRTCConstants").SignalingProtocol.P2P});var j=b("VFRTCP2PCallStore").getState().protocolHandler;j.init(e,Number(c.callID)).setPreserveLocalStream(!0);b("VFRTCCallInitUtils").initializeRTCUsers([e,d.FBID],function(){var c=d.streams.first();c!==void 0&&b("VFRTCCallActions").addLocalStream(c);a||b("VFRTCCallActions").updateRemoteUsers(b("immutable").Set([b("VFRTCCallStore").getState().remoteUsers.first().setParticipantState({state:b("FBRTCParticipantCallState").CONNECTED})]));var f=a?void 0:b("VFRTCLocalMessageQueue").pluckOffer(e);b("promiseDone")(j.fetchTURNCredentials(),function(){j.startCall(void 0,f),j.processQueuedMessages(),h(b("VFRTCP2PCallStore").getState().protocolHandler)})})})}function i(a,c,d){var e=b("VFRTCClientFeatureGating").shouldUseH264();c=c.streams.first();var f=new(b("VFRTCMWProtocolHandler"))(Number(a.callID));f.setKeepLocalStreamsOnClose(!0).setAllowIncomingCalls(!0);f.startCall([].concat(d),c!==void 0?[c]:[],a.conferenceName,{serverInfoData:a.serverInfoData,connectedOnJoin:!0,offerSdpTransform:[function(a){return e?b("VFRTCSdpUtils").pickSpecificH264ProfileIfExists(a,{levelAsymmetryAllowed:!0,packetizationMode:!0,profileLevelId:"42001f"}):a}],preferredCodecs:{video:e?"H264/9000":void 0}});return f}function a(a,c,d,e,f){e===void 0&&(e=[]);return b("Promise").resolve().then(function(){var g=b("VFWebConferenceUtils").parseP2PConferenceName(c.conferenceName);return g!=null?h(a,c,d,g,f):i(c,d,e)})}e.exports=a}),null);
__d("VFDesktopHelper",["invariant","Promise","regeneratorRuntime","Form","VFWebSupportUtils","XMessengerDotComLogoutController","FacebookAppIDs","VFWebLocalStorage"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=null,i=35,j={getAppID:function(){if(j.isDesktopApp())return j.isWindows()?b("FacebookAppIDs").MESSENGER_DESKTOP_ARCHON_WINDOWS.toString():b("FacebookAppIDs").MESSENGER_DESKTOP_ARCHON_MACOS.toString();else return b("FacebookAppIDs").MESSENGERDOTCOM.toString()},isDesktopApp:function(){return window.messengervideo!==void 0},injectBridge:function(a){if(window.messengervideo===void 0)return;if(typeof window.messengervideo.injectBridge!=="function")return;window.messengervideo.injectBridge(a)},getDeviceID:function(){return j.isDesktopApp()&&typeof window.messengervideo.getDeviceID==="function"?window.messengervideo.getDeviceID():b("VFWebLocalStorage").getDeviceID()},getSessionID:function(){return j.isDesktopApp()&&typeof window.messengervideo.getSessionID==="function"?window.messengervideo.getSessionID():b("VFWebLocalStorage").getSessionID()},getScreenSharingSourceID:function(){return window.messengervideo.getScreenSharingSourceID()},stopScreenSharing:function(){return window.messengervideo.stopScreenSharing()},onMiniViewResolutionChange:function(a){j.isDesktopApp()&&typeof window.messengervideo.onMiniViewResolutionChange==="function"&&window.messengervideo.onMiniViewResolutionChange(a)},restoreFromMiniView:function(){j.isDesktopApp()&&window.messengervideo.restoreFromMiniView()},supportsAppSettings:function(){return typeof window.messengervideo.getOpenAtLogin==="function"},getOpenAtLogin:function(){return window.messengervideo.getOpenAtLogin()},setOpenAtLogin:function(a){j.canOpenAtLogin()&&window.messengervideo.setOpenAtLogin(a)},canOpenAtLogin:function(){return j.isDesktopApp()&&typeof window.messengervideo.setOpenAtLogin==="function"},logout:function(){j.isDesktopApp()&&typeof window.messengervideo.logout==="function"&&(window.messengervideo.logout(),b("VFWebSupportUtils").newLoggedOutScreenCall()||j.goToLoggedOutScreen())},goToLoggedOutScreen:function(){var a=window.location.origin+"/call";b("Form").post(b("XMessengerDotComLogoutController").getURIBuilder().getURI()+"?next="+a,{})},setRecentCalls:function(a){j.isDesktopApp()&&typeof window.messengervideo.setRecentCalls==="function"&&window.messengervideo.setRecentCalls(a)},openContextMenu:function(a){if(j.isDesktopApp()){var b=function(a){return a.length>i?a.substr(0,i-1)+"\u2026":a};a=a.map(function(a){var c=a.label;a=babelHelpers.objectWithoutPropertiesLoose(a,["label"]);return babelHelpers["extends"]({},a,{label:c==null?null:b(c.toString())})});window.messengervideo.openContextMenu(a)}},showMessageBox:function(a){return!j.isDesktopApp()||typeof window.messengervideo.showMessageBox!=="function"?b("Promise").reject(new Error("showMessageBox is not available")):window.messengervideo.showMessageBox(babelHelpers["extends"]({},a,{title:a.title&&a.title.toString(),message:a.message&&a.message.toString(),detail:a.detail&&a.detail.toString(),checkboxLabel:a.checkboxLabel&&a.checkboxLabel.toString(),buttons:a.buttons.map(function(a){return a.toString()}),noLink:a.noLink===void 0?!0:a.noLink}))},showIncomingCallDialog:function(a,c,d,e,f,g){return b("regeneratorRuntime").async(function(b){while(1)switch(b.prev=b.next){case 0:return b.abrupt("return",window.messengervideo.showIncomingCallDialog(a,c,d,e,f,g));case 1:case"end":return b.stop()}},null,this)},dismissIncomingCallDialog:function(){window.messengervideo.dismissIncomingCallDialog()},setTouchBarInCallConfig:function(a){j.isDesktopApp()&&window.messengervideo.setTouchBarInCallConfig!=null&&window.messengervideo.setTouchBarInCallConfig(a)},toggleCamera:function(a){window.messengervideo.toggleCamera!=null&&window.messengervideo.toggleCamera(a)},showMissedCallDialog:function(a){return b("regeneratorRuntime").async(function(b){while(1)switch(b.prev=b.next){case 0:return b.abrupt("return",window.messengervideo.showMissedCallDialog(a));case 1:case"end":return b.stop()}},null,this)},dismissMissedCallDialog:function(){window.messengervideo.dismissMissedCallDialog()},hideSplash:function(){j.isDesktopApp()&&window.messengervideo.hideSplash!==void 0&&window.messengervideo.hideSplash()},hideSplashAfterLoad:function(){window.addEventListener("load",this.hideSplash)},autoStartDownload:function(){var a=window.navigator.platform==="MacIntel"?"mac":window.navigator.platform==="Win32"?"win":null;if(a){a=document.getElementById(a+"-download-form");this.onDownloadClick(a)}},onDownloadClick:function(a){a.submit(),a.classList.add("async_saving"),window.setTimeout(function(){return a.classList.remove("async_saving")},3e3)},isWindows:function(){return navigator.platform==="Win32"},canShowMenuBar:function(){return j.getAppID()===b("FacebookAppIDs").MESSENGER_DESKTOP_ARCHON_WINDOWS.toString()&&window.messengervideo.triggerMenuItem!=void 0},useApplicationMenuCache:function(){return window.messengervideo.getApplicationMenu!==void 0},getApplicationMenuCache:function(){__p&&__p();if(!h){var a=window.messengervideo.getApplicationMenu(),b=function a(b){var c;c=((c=b.submenu)==null?void 0:c.items)||[];return{id:b.id,type:b.type,accelerator:b.accelerator,visible:b.visible,enabled:b.enabled,checked:b.checked,label:b.label,submenu:c.map(a)}};a=a.items||[];h=a.map(b)}h||g(0,12892);return h},triggerMenuItem:function(a){window.messengervideo.triggerMenuItem(a.id),a.type==="checkbox"&&j.useApplicationMenuCache()&&(a.checked=!a.checked)},canSetMiniViewEnabled:function(){return j.isDesktopApp()&&b("VFWebSupportUtils").isMiniViewSupported()&&typeof window.messengervideo.setMiniViewEnabled==="function"},setMiniViewEnabled:function(a){if(j.canSetMiniViewEnabled())return window.messengervideo.setMiniViewEnabled(a)},isMiniViewEnabled:function(){return j.isDesktopApp()&&typeof window.messengervideo.isMiniViewEnabled==="function"&&window.messengervideo.isMiniViewEnabled()},canSetPushNotificationsEnabled:function(){return j.isDesktopApp()&&(b("VFWebSupportUtils").canReceiveMacRemoteNotifications()||b("VFWebSupportUtils").canReceiveWindowsRemoteNotifications())&&typeof window.messengervideo.setPushNotificationsEnabled==="function"},setPushNotificationsEnabled:function(a){if(j.canSetPushNotificationsEnabled())return window.messengervideo.setPushNotificationsEnabled(a)},arePushNotificationsEnabled:function(){return j.isDesktopApp()&&typeof window.messengervideo.arePushNotificationsEnabled==="function"&&window.messengervideo.arePushNotificationsEnabled()},openExternalURL:function(a){typeof window.messengervideo.openExternalURL==="function"?window.messengervideo.openExternalURL(a):window.open(a)}};e.exports=j}),null);
__d("FluxTrigger",["getUniformDispatcher"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();a.create=function(b,c,d){return new a(b,c,d)};function a(a,c,d){__p&&__p();var e=this;this.$7=null;this.$8=function(a){e.$1.waitFor(e.$4);if(e.$3.some(function(a){return a.hasChanged()})){a=e.$5();e.$6(e.$7,a);e.$7=a}};this.$5=c;this.$6=d;this.$1=b("getUniformDispatcher")(a);this.$3=a;this.$4=a.map(function(a){return a.getDispatchToken()})}var c=a.prototype;c.getDispatchToken=function(){return this.$2};c.attach=function(){this.$2||(this.$2=this.$1.register(this.$8),this.$1.explicitlyRegisterStore&&this.$1.explicitlyRegisterStore(this))};c.release=function(){this.$2&&this.$1.unregister(this.$2)};return a}();e.exports=a}),null);
__d("VFWebCallUtils",["invariant","Promise","regeneratorRuntime","EnterMessengerCallRoomMutation","FBRTCParticipantCallState","FluxTrigger","MercuryIDs","MessengerParticipants.bs","RelayFBEnvironment","VFDesktopHelper","VFRTCCallActions","VFRTCCallStore","VFRTCConstants","VFRTCgenerateRTCCallID","VFRTCGroupCallEscalationActions","VFRTCGroupCallEscalationStore","VFRTCMWProtocolHandler","VFRTCP2PCallEscalationActions","VFRTCP2PCallEscalationStore","VFRTCP2PCallEscalator","VFRTCP2PCallStore","VFRTCP2PProtocolHandler","VFRTCUser","VFWebAppFluxStore","VFWebCallStore","VFWebConferenceUtils","VFWebCreateCallMutation","VFWebEndCallMutation","VFWebLogger","VFWebLogHistory","VFWebMediaUtils","VFWebRingListener","VFWebSoundController","VFWebStartCallMutation","VFWebSupportUtils","generateRTCCallID","immutable","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("VFRTCConstants").CallEndReason,i=b("VFRTCConstants").SignalingProtocol,j={_endingCallIDs:new Set(),placeOutgoingCall:function(a){a.clientCallId||(a.clientCallId=String(b("VFRTCgenerateRTCCallID")()));var c=b("VFRTCCallStore").isInCall();c&&!Boolean(a.suppressSwitchCallUI)?b("VFWebAppFluxStore").showCallSwitchDialog(function(){return j.placeOutgoingCall(babelHelpers["extends"]({},a,{suppressSwitchCallUI:!0}))},"create",a.isAudioCall):b("promiseDone")(b("Promise").resolve().then(function(){return c?j._endAndCleanupCall({keepLocalStreams:!0,resetP2PListener:!0}):null}).then(function(){return j._placeOutgoingCall(a)})["catch"](function(c){return b("VFWebLogHistory").errorObject("placeOutgoingCall",c,a)}))},joinOngoingCall:function(a){var c=b("VFRTCCallStore").isInCall();c&&!Boolean(a.suppressSwitchCallUI)?b("VFWebAppFluxStore").showCallSwitchDialog(function(){return j.joinOngoingCall(babelHelpers["extends"]({},a,{suppressSwitchCallUI:!0}))},"join",a.isAudioCall):b("promiseDone")(j._joinOngoingCall(a))},joinConference:function(a){var c=b("VFRTCCallStore").isInCall();c&&!Boolean(a.suppressSwitchCallUI)?b("VFWebAppFluxStore").showCallSwitchDialog(function(){return j.joinConference(babelHelpers["extends"]({},a,{suppressSwitchCallUI:!0}))},"join",a.isAudioCall):b("promiseDone")(b("Promise").resolve().then(function(){return b("EnterMessengerCallRoomMutation")(a.linkUrl)}).then(function(b){b=b.conferenceName;return j._joinOngoingCall({conferenceName:b,initializeVideo:!0,signalingProtocol:i.MULTIWAY,endCurrentCall:!0,suppressSwitchCallUI:!0,thread:a.thread})})["catch"](function(c){return b("VFWebLogHistory").errorObject("joinConference",c,{linkUrl:a.linkUrl})}))},inviteToCall:function(a){b("promiseDone")(j._inviteToCall(a))},cancelRing:function(a){var c=b("VFRTCCallStore").getState().callInfo,d=c.conferenceName;c=c.serverInfoData;b("promiseDone")(b("VFRTCMWProtocolHandler").removeParticipants(d,c,a))},ignoreIncomingCall:function(){b("promiseDone")(j._ignoreIncomingCall())},updateMediaStreams:function(){b("promiseDone")(j._updateLocalMediaStreams(),null,function(a){b("VFWebLogger").logError(null,"update_media_stream_failed",a)})},endAndCleanupCall:function(){b("promiseDone")(j._endAndCleanupCall({resetP2PListener:!0}))},reInviteToCall:function(a){b("promiseDone")(j._reInviteToCall(a))},isNotPortalShadowUser:function(a){return a.FBID!==((a=b("VFRTCCallStore").getState().localUser)==null?void 0:a.FBID)},isConnectedOrRinging:function(a){return j.isRinging(a)||j.isConnectedOrConnecting(a)||((a=a.participantState)==null?void 0:a.state)===b("FBRTCParticipantCallState").UNKNOWN},isRinging:function(a){var c;return((c=a.participantState)==null?void 0:c.state)===b("FBRTCParticipantCallState").CONTACTING||((c=a.participantState)==null?void 0:c.state)===b("FBRTCParticipantCallState").RINGING},isContacting:function(a){return((a=a.participantState)==null?void 0:a.state)===b("FBRTCParticipantCallState").CONTACTING},isConnectedOrConnecting:function(a){var c;return((c=a.participantState)==null?void 0:c.state)===b("FBRTCParticipantCallState").CONNECTING||((c=a.participantState)==null?void 0:c.state)===b("FBRTCParticipantCallState").CONNECTED},isConnected:function(a){return((a=a.participantState)==null?void 0:a.state)===b("FBRTCParticipantCallState").CONNECTED},isDisconnected:function(a){var c;return((c=a.participantState)==null?void 0:c.state)===b("FBRTCParticipantCallState").DISCONNECTED||((c=a.participantState)==null?void 0:c.state)===b("FBRTCParticipantCallState").NO_ANSWER||((c=a.participantState)==null?void 0:c.state)===b("FBRTCParticipantCallState").REJECTED||((c=a.participantState)==null?void 0:c.state)===b("FBRTCParticipantCallState").UNREACHABLE||((c=a.participantState)==null?void 0:c.state)===b("FBRTCParticipantCallState").CONNECTION_DROPPED||((c=a.participantState)==null?void 0:c.state)===b("FBRTCParticipantCallState").IN_ANOTHER_CALL},canRedial:function(a){var c;return((c=a.participantState)==null?void 0:c.state)===b("FBRTCParticipantCallState").REJECTED||((c=a.participantState)==null?void 0:c.state)===b("FBRTCParticipantCallState").NO_ANSWER||((c=a.participantState)==null?void 0:c.state)===b("FBRTCParticipantCallState").UNREACHABLE||((c=a.participantState)==null?void 0:c.state)===b("FBRTCParticipantCallState").IN_ANOTHER_CALL},redialPreviousCall:function(){var a=b("VFWebAppFluxStore").getState(),c=a.previousCallData;if(!c||!c.remoteUsers)throw new Error("Redial attempt with no previous call data!");b("promiseDone")(b("VFWebConferenceUtils").queryThreadId(c.conferenceName).then(function(a){j.placeOutgoingCall({usersToRing:c.remoteUsers.map(function(a){return a.FBID}).toArray(),thread:{id:a}})}))},dismissPreviousCall:function(){b("VFWebAppFluxStore").setPreviousCallData(null)},toggleLocalUserVideoInCall:function(){__p&&__p();var a=b("VFRTCCallStore").getState(),c=a.localUser;a=a.callInfo;var d=a.protocol==="p2p"&&b("VFRTCP2PCallStore").getState().callType==="AUDIO_ONLY"&&b("VFRTCCallStore").isInCall();if(c.hasVideo()&&!d){b("VFRTCCallActions").toggleMuteVideo(c.isVideoMuted());return}d=c.getStream();d&&(a.protocol===i.MULTIWAY?b("VFRTCMWProtocolHandler").escalateLocalStream():a.protocol===i.P2P&&(b("VFRTCP2PCallEscalationStore").isInProgress()?b("VFRTCP2PCallEscalationActions").cancel():b("promiseDone")(b("VFWebMediaUtils").fetchLocalStreams(!0).then(function(a){return b("VFRTCP2PCallEscalator").initEscalation(a)}))))},canStartOneOnOneCallWithUser:function(a,b){return Boolean(a)&&(b.size!==1||a!==b.first().FBID)},_ensureCameraEnabled:function(){var a=b("VFRTCCallStore").getState();a=a.localUser;if(a.hasVideo()){a.isVideoMuted()&&b("VFRTCCallActions").toggleMuteVideo(!0);return b("Promise").resolve()}return b("VFWebMediaUtils").fetchAndAddLocalStreams()},_ensureAudioOnlyStream:function(){__p&&__p();var a=b("VFRTCCallStore").getState();a=a.localUser;var c=a.getStream();if(c)if(a.hasVideo()){a.stopVideo();return b("VFWebMediaUtils").fetchLocalStreams(!1).then(function(a){a&&b("VFRTCCallActions").replaceLocalStream(c,a)})}else if(a.hasAudio())return b("Promise").resolve();return b("VFWebMediaUtils").fetchAndAddLocalStreams(!1)},_placeOutgoingCall:function(a){__p&&__p();var c,d,e,f,g,h,i,k;return b("regeneratorRuntime").async(function(l){__p&&__p();while(1)switch(l.prev=l.next){case 0:c=a.usersToRing,d=a.isAudioCall,e=a.thread;f=a.usersToRing.length===1&&b("VFWebSupportUtils").useP2PProtocolForOutgoingCalls();l.prev=2;if(!Boolean(d)){l.next=8;break}l.next=6;return b("regeneratorRuntime").awrap(j._ensureAudioOnlyStream());case 6:l.next=10;break;case 8:l.next=10;return b("regeneratorRuntime").awrap(j._ensureCameraEnabled());case 10:j._updateRemoteUsers(c,f?b("FBRTCParticipantCallState").UNKNOWN:b("FBRTCParticipantCallState").CONTACTING);b("VFWebAppFluxStore").startCallingUsers(c,e);if(!f){l.next=22;break}b("VFWebRingListener").stopListenP2P();g=b("VFRTCCallStore").getState().callInfo.set("callID",b("generateRTCCallID")().toString()).set("conferenceName",b("VFWebConferenceUtils").buildP2PConferenceName(String(c[0])));h=b("VFRTCCallStore").getState(),i=h.localUser;l.next=18;return b("regeneratorRuntime").awrap(b("VFWebStartCallMutation")(!0,g,i,c,Boolean(d)));case 18:k=l.sent;b("VFWebAppFluxStore").joinedCall(k);l.next=26;break;case 22:l.next=24;return b("regeneratorRuntime").awrap(b("VFWebCreateCallMutation")(a));case 24:l.next=26;return b("regeneratorRuntime").awrap(j._joinExistingCall({usersToRing:c,thread:e}));case 26:l.next=32;break;case 28:l.prev=28,l.t0=l["catch"](2),b("VFWebLogHistory").errorObject("_placeOutgoingCall",l.t0,{placeCallInfo:a,useP2PProtocol:f}),b("VFWebAppFluxStore").leftCall();case 32:case"end":return l.stop()}},null,this,[[2,28]])},_joinExistingCall:function(a){__p&&__p();var c,d,e,f,g,h;return b("regeneratorRuntime").async(function(i){__p&&__p();while(1)switch(i.prev=i.next){case 0:c=Boolean(a.isAudio);d=a.usersToRing||[];e=b("VFRTCCallStore").getState(),f=e.callInfo,g=e.localUser;i.prev=3;i.next=6;return b("regeneratorRuntime").awrap(b("VFWebStartCallMutation")(!1,f,g,d,c));case 6:h=i.sent;b("VFWebAppFluxStore").joinedCall(h,a.thread);i.next=13;break;case 10:i.prev=10,i.t0=i["catch"](3),b("VFWebLogHistory").errorObject("_joinExistingCall",i.t0,{usersToRing:d});case 13:case"end":return i.stop()}},null,this,[[3,10]])},_inviteToCall:function(a){var c=b("VFRTCCallStore").getState().callInfo,d=c.conferenceName,e=c.serverInfoData;return b("Promise").resolve().then(function(){return j._addRemoteUsers(a)}).then(function(){return j._escalateIfNecessary(a)}).then(function(){return b("VFRTCMWProtocolHandler").addParticipants(d,e,a)})},_reInviteToCall:function(a){var c=b("VFRTCCallStore").getState().callInfo,d=c.conferenceName,e=c.serverInfoData;return b("Promise").resolve().then(function(){return b("VFRTCMWProtocolHandler").addParticipants(d,e,a)})},_escalateIfNecessary:function(a){__p&&__p();var c=b("VFWebAppFluxStore").getState().protocolHandler;if(c instanceof b("VFRTCP2PProtocolHandler")){b("VFRTCCallStore").getState().callInfo.protocol===i.P2P||g(0,3148);var d=a.map(function(a){return b("MercuryIDs").getParticipantIDFromUserID(a)});return new(b("Promise"))(function(a,e){b("MessengerParticipants.bs").getMulti(d,function(d){b("VFRTCGroupCallEscalationActions").setUsersToRing(b("immutable").Map(d)),c.escalateToMultiway(),b("promiseDone")(j._waitForEscalation(),a,e)})})}return b("Promise").resolve()},_waitForEscalation:function(){return new(b("Promise"))(function(a,c){b("FluxTrigger").create([b("VFRTCGroupCallEscalationStore")],function(){var a=b("VFRTCGroupCallEscalationStore").getState();return{isComplete:a.readyToTransition||a.aborted,isSuccess:a.readyToTransition}},function(b,d){!(b==null?void 0:b.isComplete)&&d.isComplete&&(d.isSuccess?a():c())})})},_joinOngoingCall:function(a){__p&&__p();return b("regeneratorRuntime").async(function(c){__p&&__p();while(1)switch(c.prev=c.next){case 0:if(!b("VFRTCCallStore").isInCall()){c.next=5;break}if(a.endCurrentCall){c.next=3;break}return c.abrupt("return",b("Promise").reject(new Error("in-call switching not supported yet.")));case 3:c.next=5;return b("regeneratorRuntime").awrap(j._endAndCleanupCall({keepLocalStreams:!0,resetP2PListener:a.signalingProtocol!==i.P2P}));case 5:b("VFRTCCallActions").initialize({protocol:a.signalingProtocol,conferenceName:a.conferenceName,serverInfoData:a.serverInfoData,callID:a.callID});return c.abrupt("return",(a.initializeVideo?j._ensureCameraEnabled():j._ensureAudioOnlyStream()).then(function(){return j._updateRemoteUsers(a.remoteUserFBIDs||[])}).then(function(){return j._joinExistingCall({isAudio:a.isAudioCall,thread:a.thread})})["finally"](function(){return b("VFWebCallStore").resolveIncomingCall()}));case 7:case"end":return c.stop()}},null,this)},_ignoreIncomingCall:function(){return b("Promise").reject(new Error("Ignore in unsupported."))},_setPreviousCallData:function(){__p&&__p();var a=b("VFRTCCallStore").getState(),c=a.callSummary;a=a.callInfo;var d=b("VFRTCCallStore").getState();d=d.remoteUsers;if(d.size===0)return;var e=b("VFRTCConstants").endCallReasonFromString(c.getEndCallReason());if(d.size===1){e=this._participantStateForCallEndReason(e);e!=null&&(d=b("immutable").Set([d.first().setParticipantState({state:e})]))}b("VFWebAppFluxStore").setPreviousCallData({remoteUsers:d,conferenceName:a.conferenceName,callSummary:c,protocol:a.protocol})},_participantStateForCallEndReason:function(a){switch(a){case h.IGNORE_CALL:return b("FBRTCParticipantCallState").REJECTED;case h.IN_ANOTHER_CALL:return b("FBRTCParticipantCallState").IN_ANOTHER_CALL;default:return null}},_endAndCleanupCall:function(a){__p&&__p();var c,d,e,f;return b("regeneratorRuntime").async(function(g){__p&&__p();while(1)switch(g.prev=g.next){case 0:c=b("VFWebAppFluxStore").getState(),d=c.miniViewActive;e=b("VFRTCCallStore").getState(),f=e.callInfo;if(!j._endingCallIDs.has(f.callID)){g.next=4;break}return g.abrupt("return",b("Promise").resolve());case 4:j._endingCallIDs.add(f.callID);b("VFWebSoundController").leaveCallSound.play();d&&b("VFDesktopHelper").restoreFromMiniView();return g.abrupt("return",b("Promise").resolve().then(function(){return j._setPreviousCallData()}).then(function(){a.keepLocalStreams||b("VFRTCCallActions").removeAllLocalStreams(!0)}).then(b("VFWebAppFluxStore").leftCall).then(b("VFWebEndCallMutation"))["catch"](function(a){return b("VFWebLogHistory").errorObject("_endAndCleanupCall",a)})["finally"](function(){a.resetP2PListener&&b("VFWebRingListener").listenP2P(),j._endingCallIDs["delete"](f.callID)}));case 8:case"end":return g.stop()}},null,this)},_addRemoteUsers:function(a){a=a.map(function(a){return k(a,b("FBRTCParticipantCallState").CONTACTING)}).filter(Boolean).reduce(function(a,b){return a.add(b)},b("VFRTCCallStore").getState().remoteUsers);b("VFRTCCallActions").updateRemoteUsers(a)},_updateRemoteUsers:function(a,c){c===void 0&&(c=b("FBRTCParticipantCallState").CONTACTING);a=b("immutable").Set(a.map(function(a){return k(a,c)}).filter(Boolean));b("VFRTCCallActions").updateRemoteUsers(a)},_updateLocalMediaStreams:function(){__p&&__p();return b("VFWebMediaUtils").fetchLocalStreams().then(function(a){if(!a)return;var c=b("VFRTCCallStore").getState(),d=c.callInfo,e=c.localUser;c=e.getStream();a.getAudioTracks().forEach(function(a){a.enabled=!e.isAudioMuted()});if(d.protocol===i.P2P&&c)b("VFRTCCallActions").removeAllLocalStreams(!0),b("VFRTCCallActions").addLocalStream(a);else return b("VFRTCMWProtocolHandler").updateLocalStream(a)})}};function k(a,c){var d=b("RelayFBEnvironment").getStore().getSource();a=d.get(a);if(!a)return null;d=a.profile_picture&&d.get(a.profile_picture.__ref);d=d?d.uri:null;return new(b("VFRTCUser"))({FBID:a.id,isGuestUser:!1,isMessengerUser:!1,isPartiesUser:!1,lastConnectedAt:0,meetingID:null,meetingPassword:null,participantState:{state:c},profilePictureUrl:d,profileUrl:null,roomLocation:null,screenStreams:b("immutable").Set(),streams:b("immutable").Set(),userName:a.name,userShortName:a.short_name,vanity:""})}e.exports=j}),null);
__d("VFWebConferenceUtils",["regeneratorRuntime","RelayFBEnvironment","RelayModern","VFWebLogger","VFWebConferenceUtilsCallThreadLookupQuery.graphql"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h="PEER",i="MESSENGER",j=b("RelayModern").fetchQuery;b("RelayModern").graphql;function a(a){__p&&__p();var c,d,e,f;return b("regeneratorRuntime").async(function(h){__p&&__p();while(1)switch(h.prev=h.next){case 0:c=m(a);if(!(c==null)){h.next=3;break}return h.abrupt("return",null);case 3:h.prev=3;h.next=6;return b("regeneratorRuntime").awrap(j(b("RelayFBEnvironment"),g!==void 0?g:g=b("VFWebConferenceUtilsCallThreadLookupQuery.graphql"),{callId:c}));case 6:f=h.sent;return h.abrupt("return",(d=f.node)==null?void 0:(e=d.thread)==null?void 0:e.id);case 10:h.prev=10;h.t0=h["catch"](3);b("VFWebLogger").logError(null,"thread_for_call_error",JSON.stringify(h.t0));throw h.t0;case 14:case"end":return h.stop()}},null,this,[[3,10]])}function k(a,b){return a+":"+b}function l(a,b){return b==null?null:b.startsWith(a+":")?b.substr(a.length+1):null}function c(a){return l(h,a)}function d(a){return k(h,a)}function m(a){return l(i,a)}e.exports={buildP2PConferenceName:d,parseP2PConferenceName:c,queryThreadId:a}}),null);
__d("VFWebMediaUtils",["regeneratorRuntime","VFRTCCallActions","VFRTCCallStore","VFRTCConstants","VFRTCGroupCallStore","VFRTCMediaDevices","VFRTCUserMediaConstraints","VFRTCUtils","VFWebAppFluxStore","VFWebSoundController","immutable","promiseDone"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("VFRTCConstants").VideoQuality,h={enableCamera:function(){b("VFWebSoundController").previewOnSound.play(),b("promiseDone")(h.fetchAndAddLocalStreams())},disableCamera:function(){b("VFWebSoundController").previewOffSound.play(),b("VFRTCCallActions").removeAllLocalStreams(!0)},fetchLocalStreams:function(a){__p&&__p();a===void 0&&(a=!0);var c=b("VFWebAppFluxStore").getState();c=c.userSettings;var d=c.audioInput;c=c.videoInput;return b("VFRTCUtils").getUserMedia({audio:{deviceId:d},video:a?b("VFRTCUserMediaConstraints").video(g.FHD_IDEAL_LQ_REQUIRED_VIDEO,c):!1},{supportFilteredStreams:!1}).then(function(a){b("VFWebAppFluxStore").setCameraError(null);return a},function(a){b("VFWebAppFluxStore").setCameraError(a);return null})},fetchAndAddLocalStreams:function(a){a===void 0&&(a=!0);return h.fetchLocalStreams(a).then(function(a){a&&b("VFRTCCallActions").addLocalStream(a)})},selectInput:function(a,b){if(a.length===0)return null;a=a.map(h.getDeviceID).filter(Boolean);return a.includes(b)?b:a.length>0?a.pop():null},ensureValidInputsSelected:function(){__p&&__p();var a,c,d,e,f,g,i,j;return b("regeneratorRuntime").async(function(k){while(1)switch(k.prev=k.next){case 0:k.next=2;return b("regeneratorRuntime").awrap(b("VFRTCMediaDevices").enumerateDevices());case 2:a=k.sent,c=a.filter(function(a){return a.kind==="videoinput"}),d=a.filter(function(a){return a.kind==="audioinput"}),(e=b("VFWebAppFluxStore").getState().userSettings,f=e.videoInput,g=e.audioInput),i=h.selectInput(c,f),j=h.selectInput(d,g),(i!=f||j!=g)&&b("VFWebAppFluxStore").updateMediaDevices(i,j);case 9:case"end":return k.stop()}},null,this)},getUserInView:function(a,b,c){var d;a.size===1||b==null?d=a.first():d=a.find(function(a){return a.FBID===b});d==null&&(d=c);return d},getUserInViewVideoResolution:function(){__p&&__p();var a=b("VFRTCCallStore").getState(),c=a.localUser;a=a.remoteUsers;a=h.getUserInView(b("immutable").List(a),b("VFRTCGroupCallStore").getState().dominantSpeakerFBID,c);c=a.getStream();if(!c||c.getVideoTracks().length===0)return null;var d=c.getVideoTracks()[0].id;a=Array.from(document.getElementsByTagName("video")).find(function(a){a=a.srcObject?a.srcObject.getVideoTracks():null;return a&&(a==null?void 0:a.length)>0&&a[0].id===d});return a!=null?{width:a.videoWidth,height:a.videoHeight}:null},getUserInViewVideoOrientation:function(){var a=h.getUserInViewVideoResolution();return a&&(a==null?void 0:a.width)<(a==null?void 0:a.height)?"portrait":"landscape"},getDeviceID:function(a){return a?a.deviceId:null}};e.exports=h}),null);
__d("VFWebSupportUtils",["invariant","MessengerVideoConfig","VFWebMediaUtils","WebStorage","gkx","qex"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=(h||b("WebStorage")).getLocalStorage(),j={showAudioSettings:function(){return b("gkx")("678794")},showRecentCallsInSystemTray:function(){return b("gkx")("811027")},showShareCallLink:function(){return b("gkx")("678795")},showIncomingCallDialogV2:function(){return b("gkx")("678796")},showP2PMissedCallDialogV2:function(){return b("gkx")("699260")},showCallGridViewV2:function(){return b("gkx")("810420")},showNewCallingView:function(){return b("gkx")("873024")},showStarRating:function(){return b("gkx")("812454")},showStarRatingFeedback:function(){return b("gkx")("822145")},showAspectRatioAwareMiniView:function(){return b("gkx")("814975")},showTouchBarControls:function(){return b("gkx")("857971")},acceptVideoChatLinks:function(){return b("gkx")("684302")},canAcceptCallWhileInCall:function(){return b("gkx")("691876")},canAccessDevTools:function(){return b("gkx")("698237")},enableScreenSharing:function(){return!1},isMiniViewSupported:function(){return b("gkx")("709734")},eligibleForCallSettingsNUX:function(){return b("gkx")("814872")},canReceiveMacRemoteNotifications:function(){return b("MessengerVideoConfig").areMacPushNotificationsSupported},canReceiveWindowsRemoteNotifications:function(){return b("MessengerVideoConfig").areWindowsPushNotificationsSupported},isOnMacOSMojave:function(){return b("gkx")("843391")},showContactCards:function(){return b("gkx")("851924")},enableDevTools:function(){return b("gkx")("809871")},newLoggedOutScreenCall:function(){return b("gkx")("868211")},showCreateGroupCallButton:function(){return b("gkx")("874866")},useP2PProtocolForOutgoingCalls:function(){return b("qex")._("910093")},showAddPeopleTrayV2:function(){return b("gkx")("885546")},showArchonUpsellScreen:function(){return b("gkx")("1000804")},getUserSettings:function(){return i&&i.getItem?{audioInput:i.getItem("audioInput"),audioOutput:i.getItem("audioOutput"),videoInput:i.getItem("videoInput")}:{audioInput:null,audioOutput:null,videoInput:null}},setSelfViewLocation:function(a){i||g(0,13765),i.setItem("selfViewLocation",a.toString())},getSelfViewLocation:function(){i||g(0,13765);var a=parseInt(i.getItem("selfViewLocation"),10);return isNaN(a)?-1:a},saveUserSettings:function(a){i&&i.setItem&&(a.videoInput!=null&&(i.setItem("videoInput",a.videoInput),b("VFWebMediaUtils").fetchLocalStreams(!1)),a.audioInput!=null&&i.setItem("audioInput",a.audioInput),a.audioOutput!=null&&i.setItem("audioOutput",a.audioOutput))},isOldVersion:function(a){if(a==null)return!0;else if(a==="0.0.0")return!1;var b=201811061932;j.isOnMacOSMojave()&&(b=201902201851);a=parseInt(a.split(".").pop(),10);return a<b}};e.exports=j}),null);
__d("VFWebCallErrorModal.react",["React","VFWebAppFluxStore","VFWebModal.react","VFWebStrings","VFWebText.react"],(function(a,b,c,d,e,f){"use strict";var g=(c=b("VFWebModal.react")).Body,h=c.Button,i=c.Dialog,j=c.Footer,k=c.Header;function a(){var a;return(a=b("React")).jsxs(i,{children:[a.jsx(k,{children:a.jsx(b("VFWebText.react"),{style:"title-large",children:b("VFWebStrings").joining_generic_error_title})}),a.jsx(g,{children:a.jsx(b("VFWebText.react"),{style:"body-small",children:b("VFWebStrings").joining_generic_error_message})}),a.jsx(j,{children:a.jsx(h,{use:"confirm",label:b("VFWebStrings").okay,onClick:b("VFWebAppFluxStore").removeOverlayModal})})]})}e.exports=a}),null);
__d("VFWebRingButton.react",["invariant","React","VFRTCConstants","VFWebButton.react","VFWebCallUtils","VFWebLogger","VFWebStrings","nullthrows"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("VFRTCConstants").SignalingProtocol;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=function(){var a=d.props,c=a.isAudioCall,e=a.surface,f=a.usersToRing;a=a.thread;Boolean(c)?b("VFWebLogger").logClick(e,"vfweb_call_place_audio"):b("VFWebLogger").logClick(e,"vfweb_call_place");b("VFWebCallUtils").placeOutgoingCall({usersToRing:f,thread:a,isAudioCall:c,trigger:"dvc_ring_button"})},d.$2=function(){var a=d.props,c=a.conferenceName,e=a.serverInfoData,f=a.thread;a=a.usersToRing;b("VFWebLogger").logClick(d.props.surface,"vfweb_call_join");b("VFWebCallUtils").joinOngoingCall({conferenceName:b("nullthrows")(c),serverInfoData:e,initializeVideo:!0,signalingProtocol:h.MULTIWAY,endCurrentCall:!0,remoteUserFBIDs:a,thread:f})},d.$3=function(){b("VFWebLogger").logClick(d.props.surface,"vfweb_call_invite"),b("VFWebCallUtils").inviteToCall(d.props.usersToRing)},d.$4=function(){b("VFWebLogger").logClick(d.props.surface,"vfweb_ring_cancel"),b("VFWebCallUtils").cancelRing(d.props.usersToRing)},d.$5=function(){b("VFWebLogger").logClick(d.props.surface,"vfweb_ring_redial"),b("VFWebCallUtils").reInviteToCall(d.props.usersToRing)},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.validateProps=function(){var a=this.props,b=a.mode,c=a.conferenceName,d=a.serverInfoData;a=a.thread;c=c!=null&&d!==void 0;d=(a==null?void 0:a.id)!=null;b=="create"&&d||b=="join"&&c||!c&&!d||g(0,13181)};d.render=function(){this.validateProps();var a=this.props.disabled;switch(this.props.mode){case"create":return b("React").jsx(b("VFWebButton.react"),{size:32,icon:Boolean(this.props.isAudioCall)?"phone":"camcorder",label:b("VFWebStrings").ring_friend_button,onClick:this.$1,disabled:a});case"join":return b("React").jsx(b("VFWebButton.react"),{size:28,icon:"camcorder",use:"green",label:b("VFWebStrings").join_button_label,labelIsHidden:!1,onClick:this.$2,disabled:a});case"invite":return b("React").jsx(b("VFWebButton.react"),{size:28,label:b("VFWebStrings").invite_friend_button,labelIsHidden:!1,onClick:this.$3,disabled:a});case"cancel":return b("React").jsx(b("VFWebButton.react"),{size:28,use:"clear",label:b("VFWebStrings").cancel_ring_button,labelIsHidden:!1,onClick:this.$4,disabled:a});case"redial":return b("React").jsx(b("VFWebButton.react"),{size:28,label:b("VFWebStrings").redial_remote_user,labelIsHidden:!1,onClick:this.$5,disabled:a});default:return null}};return c}(b("React").Component);e.exports=a}),null);
__d("VFRTCSettingsAudioInputPreview.react",["cx","fbt","AudioContextSingleton","React","cancelAnimationFrame","joinClasses","requestAnimationFrame"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=b("React").PureComponent;var i={fftSize:32,minDecibels:-90,maxDecibels:-10,smoothingTimeConstant:1},j=Math.log2(128+1);c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c){var d;d=a.call(this,c)||this;d.state={noAudioTrack:!1};d.$2=b("AudioContextSingleton").get();d.$3=d.$2.createGain();d.$3.gain.value=c.gain;d.$4=d.$2.createAnalyser();Object.assign(d.$4,i);return d}var d=c.prototype;d.$7=function(a){__p&&__p();var c=this;this.$8();if(!(a&&this.$1))return;if(a.getAudioTracks().length<1){this.setState({noAudioTrack:!0});return}var d=this.$1.getContext("2d");if(!d)return;this.$5&&this.$5.disconnect();this.$5=this.$2.createMediaStreamSource(a);this.$5.connect(this.$3);this.$3.connect(this.$4);a=this.$4.frequencyBinCount;var e=new Uint8Array(a);a=this.props;var f=a.width,g=a.height,h;a=function a(){c.$4.getByteTimeDomainData(e);var i=k(e,f,g,h);h=i;d.clearRect(0,0,f,g);d.fillStyle=c.props.fillStyle;d.fill(m(i,f,g));c.$6=b("requestAnimationFrame")(a)};this.$6=b("requestAnimationFrame")(a)};d.$8=function(){b("cancelAnimationFrame")(this.$6)};d.render=function(){var a=this,c=this.props,d=c.className,e=c.gain,f=c.height,g=c.width;c=babelHelpers.objectWithoutPropertiesLoose(c,["className","gain","height","width"]);var h=this.state.noAudioTrack;this.$3.gain.value=e;return b("React").jsxs("div",babelHelpers["extends"]({className:b("joinClasses")("_brl"+(h?" noAudioTrack":""),d)},c,{children:[h?b("React").jsx("span",{children:this.props.noMicMessage}):null,b("React").jsx("canvas",babelHelpers["extends"]({ref:function(b){return a.$1=b}},{width:g,height:f}))]}))};d.componentDidUpdate=function(a){var b=this.props.mediaStream;b!==a.mediaStream&&(this.setState({noAudioTrack:!1}),this.$7(b))};d.componentDidMount=function(){this.$7(this.props.mediaStream)};d.componentWillUnmount=function(){this.$8(),this.$5&&this.$5.disconnect(),this.$3&&this.$3.disconnect()};return c}(a);c.defaultProps={fillStyle:"rgba(255, 255, 255, .5)",gain:3.5,height:26,noMicMessage:h._("\u0e44\u0e21\u0e48\u0e21\u0e35\u0e42\u0e21\u0e42\u0e04\u0e23\u0e42\u0e1f\u0e19"),width:106};function k(a,b,c,d){return[128].concat(l(a),[128]).map(function(a,e,f){a=c*(Math.log2(Math.abs(a)+1)/j);return{x:e*b/(f.length-1),y:d?Math.min(a,c-(c-d[e].y)*.95):a}})}function l(a){var b=[];for(var c=0;c*2<a.length;c++)b[c]=Math.min(a[c*2],a[c*2+1]||0);return b}function m(a,b,c){__p&&__p();var d=new Path2D();d.moveTo(0,c);a.forEach(function(b,c,a){switch(c){case 0:d.lineTo(b.x,b.y);break;case 1:break;case a.length-1:d.bezierCurveTo.apply(d,n(b,a[c-1],b));d.lineTo(b.x,b.y);break;case 2:d.lineTo((5*a[c-2].x+a[c-1].x)/6,(5*a[c-2].y+a[c-1].y)/6);default:d.bezierCurveTo.apply(d,n(b,a[c-2],a[c-1]))}});d.lineTo(b,c);d.closePath();return d}function n(a,b,c){return[(2*b.x+c.x)/3,(2*b.y+c.y)/3,(b.x+2*c.x)/3,(b.y+2*c.y)/3,(b.x+4*c.x+a.x)/6,(b.y+4*c.y+a.y)/6]}e.exports=c}),null);
__d("VFWebSettingsDialog.react",["cx","fbt","ArchonAppBridge","CancelablePromise","FluxContainer","Link.react","PresencePrivacy","React","SubscriptionsHandler","VFDesktopHelper","VFRTCConfig","VFRTCMediaDevices","VFRTCSettingsAudioInputPreview.react","VFRTCSettingsAudioOutputPreview.react","VFRTCUtils","VFRTCVideo.react","VFWebAppFluxStore","VFWebModal.react","VFWebText.react","nullthrows","promiseDone","stylex"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j=(a=b("VFWebModal.react")).Body,k=a.Button,l=a.Dialog,m=a.Footer,n=a.Header,o=a.Sheet;(i||(i=b("stylex"))).inject(".eyufkmuh{margin-bottom:6px}",1);i.inject(".haw9rcua{width:200px}",1);i.inject(".blljefdq{background-color:#4b4b4b}",1);i.inject(".h5fs5mea{color:white}",1);i.inject(".f5m7p0br{border-top:none}",.3);i.inject(".iwso50tu{border-right:none}",.3,".iwso50tu{border-left:none}");i.inject(".ggolc4ur{border-bottom:none}",.3);i.inject(".js4msrqk{border-left:none}",.3,".js4msrqk{border-right:none}");i.inject(".op9v4316{height:26px}",1);i.inject(".pypt52fi{height:80px}",1);i.inject(".rbcf3a04{margin-bottom:10px}",1);i.inject(".om3e55n1{position:relative}",1);i.inject(".rb7hu60p{height:70px}",1);i.inject(".rbcf3a04{margin-bottom:10px}",1);i.inject(".dmdr2h6l{height:20px}",1);i.inject(".laatuukc{margin-bottom:4px}",1);i.inject(".hinttmwx{height:25px}",1);i.inject(".jroqu855{margin-bottom:5px}",1);i.inject(".alzwoclg{display:flex}",1);i.inject(".i85zmo3j{align-items:center}",1);i.inject(".sl27f92c{justify-content:space-between}",1);i.inject(".hn59l83k{color:#0099ff}",1);i.inject(".k1z55t6l{font-size:0.9375rem}",1);i.inject(".f5m7p0br{border-top:none}",.3);i.inject(".iwso50tu{border-right:none}",.3,".iwso50tu{border-left:none}");i.inject(".ggolc4ur{border-bottom:none}",.3);i.inject(".js4msrqk{border-left:none}",.3,".js4msrqk{border-right:none}");i.inject(".dl2p71xr{border-top-left-radius:4px}",1,".dl2p71xr{border-top-right-radius:4px}");i.inject(".h0c7ht3v{border-top-right-radius:4px}",1,".h0c7ht3v{border-top-left-radius:4px}");i.inject(".j8nb7h05{border-bottom-right-radius:4px}",1,".j8nb7h05{border-bottom-left-radius:4px}");i.inject(".gffp4m6x{border-bottom-left-radius:4px}",1,".gffp4m6x{border-bottom-right-radius:4px}");i.inject(".pytsy3co{height:100%}",1);i.inject(".lq84ybu9{overflow-x:hidden}",1);i.inject(".hf30pyar{overflow-y:hidden}",1);i.inject(".s8sjc6am{position:absolute}",1);i.inject(".ql1abi13{right:0}",1);i.inject(".ekq1a7f9{top:0}",1);i.inject(".htm025lk{width:106px}",1);i.inject(".hqfru6jp{background-color:var(--fds-black)}",1);i.inject(".juxnsli8{margin-left:10px}",1);c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=new(b("SubscriptionsHandler"))(),d.$2=null,d.$3=null,d.state={dirty:!1,mediaStream:null,audioInput:"",audioInputs:[],audioOutput:"",audioOutputs:[],videoInput:"",videoInputs:[],openAtLogin:b("VFDesktopHelper").isDesktopApp()&&b("VFDesktopHelper").getOpenAtLogin(),presencePrivacy:b("PresencePrivacy").getVisibility(),miniViewEnabled:b("VFDesktopHelper").isMiniViewEnabled(),pushNotificationsEnabled:b("VFDesktopHelper").arePushNotificationsEnabled()},d.$6=function(a){d.setState({videoInput:a,dirty:!0})},d.$7=function(a){d.setState({audioInput:a,dirty:!0})},d.$8=function(a){d.setState({audioOutput:a,dirty:!0})},d.$9=function(a){a=a.target;a instanceof HTMLInputElement&&d.setState({openAtLogin:a.checked,dirty:!0})},d.$10=function(a){a=a.target;a instanceof HTMLInputElement&&d.setState({miniViewEnabled:a.checked,dirty:!0})},d.$11=function(a){a=a.target;a instanceof HTMLInputElement&&d.setState({pushNotificationsEnabled:a.checked,dirty:!0})},d.$12=function(){b("VFWebAppFluxStore").changeUserSettings({audioInput:d.state.audioInput,videoInput:d.state.videoInput,audioOutput:d.state.audioOutput}),b("VFDesktopHelper").setOpenAtLogin(d.state.openAtLogin),b("VFDesktopHelper").setMiniViewEnabled(d.state.miniViewEnabled),b("PresencePrivacy").setVisibility(d.state.presencePrivacy),b("VFDesktopHelper").setPushNotificationsEnabled(d.state.pushNotificationsEnabled),d.$5()},d.$4=function(){d.$2&&d.$2.cancel(),d.$2=new(b("CancelablePromise"))(b("VFRTCMediaDevices").enumerateDevices()),b("promiseDone")(d.$2.getPromise().then(t).then(function(a){var b=a.audioInputs,c=a.audioOutputs;a=a.videoInputs;var e=d.state,f=e.audioInput,g=e.audioOutput;e=e.videoInput;d.setState({audioInputs:b,audioInput:s(b,f),audioOutputs:c,audioOutput:s(c,g),videoInputs:a,videoInput:s(a,e)})}),null,function(a){if(!a.isCanceled)throw a})},d.$18=function(){d.setState(function(a){return{presencePrivacy:a.presencePrivacy===b("PresencePrivacy").ONLINE?b("PresencePrivacy").OFFLINE:b("PresencePrivacy").ONLINE,dirty:!0}})},c)||babelHelpers.assertThisInitialized(d)}c.getStores=function(){return[b("VFWebAppFluxStore")]};c.calculateState=function(a){return babelHelpers["extends"]({},a,{audioInput:b("VFWebAppFluxStore").getState().userSettings.audioInput,videoInput:b("VFWebAppFluxStore").getState().userSettings.videoInput,audioOutput:b("VFWebAppFluxStore").getState().userSettings.audioOutput})};var d=c.prototype;d.componentDidMount=function(){this.$4(),b("nullthrows")(navigator.mediaDevices).addEventListener("devicechange",this.$4)};d.componentWillUnmount=function(){this.$2&&this.$2.cancel();this.$3&&this.$3.cancel();b("nullthrows")(navigator.mediaDevices).removeEventListener("devicechange",this.$4);this.$1&&this.$1.release();var a=this.state.mediaStream;a&&b("VFRTCUtils").stopMediaStream(a)};d.$5=function(){b("VFWebAppFluxStore").closeSettings()};d.componentDidUpdate=function(a,c){var d=this;a=this.state.audioInput;var e=this.state.videoInput,f=this.state.mediaStream;(a!==c.audioInput||e!==c.videoInput||f===null)&&(this.$3&&this.$3.cancel(),this.$3=new(b("CancelablePromise"))(b("VFRTCUtils").getUserMedia({audio:{deviceId:a},video:{deviceId:e}})),b("promiseDone")(this.$3.getPromise().then(function(a){f&&b("VFRTCUtils").stopMediaStream(f),d.setState({mediaStream:a})}),null,function(a){if(!a.isCanceled)throw a}))};d.$13=function(){var a,c=this.state,d=c.videoInput,e=c.videoInputs;c=c.mediaStream;return(a=b("React")).jsxs("div",{className:"om3e55n1 rbcf3a04 pypt52fi",children:[a.jsx(p,{children:h._("\u0e01\u0e25\u0e49\u0e2d\u0e07")}),a.jsx(r,{devices:e,onChange:this.$6,value:d,width:200}),a.jsx(b("VFRTCVideo.react"),{ref:"videoPreview",mediaStream:c,mirrorVideo:!0,muted:!0,className:"hqfru6jp htm025lk ekq1a7f9 ql1abi13 s8sjc6am hf30pyar lq84ybu9 pytsy3co gffp4m6x j8nb7h05 h0c7ht3v dl2p71xr js4msrqk ggolc4ur iwso50tu f5m7p0br"})]})};d.$14=function(){var a,c=this.state,d=c.audioInput,e=c.audioInputs;c=c.mediaStream;return(a=b("React")).jsxs("div",{className:"rbcf3a04 rb7hu60p",children:[a.jsx(p,{children:h._("\u0e44\u0e21\u0e42\u0e04\u0e23\u0e42\u0e1f\u0e19")}),a.jsxs("div",{className:"sl27f92c i85zmo3j alzwoclg",children:[a.jsx(r,{devices:e,onChange:this.$7,value:d,width:200}),a.jsx(b("VFRTCSettingsAudioInputPreview.react"),{mediaStream:c,fillStyle:"#0099ff"})]})]})};d.$15=function(){var a,c=this.state,d=c.audioOutput;c=c.audioOutputs;return(a=b("React")).jsxs("div",{className:"rbcf3a04 rb7hu60p",children:[a.jsx(p,{children:h._("\u0e40\u0e2a\u0e35\u0e22\u0e07\u0e2d\u0e2d\u0e01")}),a.jsxs("div",{className:"sl27f92c i85zmo3j alzwoclg",children:[a.jsx(r,{devices:c,onChange:this.$8,value:d,width:200}),a.jsx(b("VFRTCSettingsAudioOutputPreview.react"),{mediaStream:null,sinkID:d})]}),a.jsx("audio",{autoPlay:!0,ref:"audioPreview"})]})};d.$16=function(){return b("VFDesktopHelper").canOpenAtLogin()?b("React").jsxs("div",{className:"laatuukc dmdr2h6l",children:[b("React").jsx("input",{id:"openAtLogin",type:"checkbox",checked:this.state.openAtLogin,onChange:this.$9}),b("React").jsx("label",{htmlFor:"openAtLogin",className:"juxnsli8",children:h._("\u0e40\u0e1b\u0e34\u0e14\u0e43\u0e0a\u0e49\u0e41\u0e2d\u0e1e\u0e40\u0e21\u0e37\u0e48\u0e2d\u0e40\u0e02\u0e49\u0e32\u0e2a\u0e39\u0e48\u0e23\u0e30\u0e1a\u0e1a")})]}):null};d.$17=function(){if(b("ArchonAppBridge").isArchon())return null;var a=this.state.presencePrivacy===b("PresencePrivacy").ONLINE,c=a?h._("\u0e40\u0e1e\u0e37\u0e48\u0e2d\u0e19\u0e41\u0e25\u0e30\u0e1c\u0e39\u0e49\u0e15\u0e34\u0e14\u0e15\u0e48\u0e2d\u0e08\u0e30\u0e40\u0e2b\u0e47\u0e19\u0e27\u0e48\u0e32\u0e04\u0e38\u0e13\u0e01\u0e33\u0e25\u0e31\u0e07\u0e43\u0e0a\u0e49\u0e07\u0e32\u0e19\u0e2b\u0e23\u0e37\u0e2d\u0e43\u0e0a\u0e49\u0e07\u0e32\u0e19\u0e44\u0e1b\u0e40\u0e21\u0e37\u0e48\u0e2d\u0e44\u0e21\u0e48\u0e19\u0e32\u0e19\u0e21\u0e32\u0e19\u0e35\u0e49\u0e44\u0e14\u0e49 \u0e2a\u0e16\u0e32\u0e19\u0e30\u0e02\u0e2d\u0e07\u0e04\u0e38\u0e13\u0e08\u0e30\u0e41\u0e2a\u0e14\u0e07\u0e27\u0e48\u0e32\u0e01\u0e33\u0e25\u0e31\u0e07\u0e43\u0e0a\u0e49\u0e07\u0e32\u0e19\u0e2b\u0e23\u0e37\u0e2d\u0e43\u0e0a\u0e49\u0e07\u0e32\u0e19\u0e44\u0e1b\u0e40\u0e21\u0e37\u0e48\u0e2d\u0e44\u0e21\u0e48\u0e19\u0e32\u0e19\u0e21\u0e32\u0e19\u0e35\u0e49 \u0e40\u0e27\u0e49\u0e19\u0e41\u0e15\u0e48\u0e04\u0e38\u0e13\u0e08\u0e30\u0e1b\u0e34\u0e14\u0e01\u0e32\u0e23\u0e15\u0e31\u0e49\u0e07\u0e04\u0e48\u0e32\u0e43\u0e19\u0e17\u0e38\u0e01\u0e17\u0e35\u0e48\u0e17\u0e35\u0e48\u0e04\u0e38\u0e13\u0e43\u0e0a\u0e49 Messenger \u0e2b\u0e23\u0e37\u0e2d Facebook \u0e41\u0e25\u0e30\u0e04\u0e38\u0e13\u0e08\u0e30\u0e40\u0e2b\u0e47\u0e19\u0e44\u0e14\u0e49\u0e14\u0e49\u0e27\u0e22\u0e27\u0e48\u0e32\u0e40\u0e1e\u0e37\u0e48\u0e2d\u0e19\u0e41\u0e25\u0e30\u0e1c\u0e39\u0e49\u0e15\u0e34\u0e14\u0e15\u0e48\u0e2d\u0e01\u0e33\u0e25\u0e31\u0e07\u0e43\u0e0a\u0e49\u0e07\u0e32\u0e19\u0e2b\u0e23\u0e37\u0e2d\u0e43\u0e0a\u0e49\u0e07\u0e32\u0e19\u0e44\u0e1b\u0e40\u0e21\u0e37\u0e48\u0e2d\u0e44\u0e21\u0e48\u0e19\u0e32\u0e19\u0e21\u0e32\u0e19\u0e35\u0e49"):h._("\u0e2a\u0e16\u0e32\u0e19\u0e30\u0e02\u0e2d\u0e07\u0e04\u0e38\u0e13\u0e08\u0e30\u0e22\u0e31\u0e07\u0e41\u0e2a\u0e14\u0e07\u0e27\u0e48\u0e32\u0e04\u0e38\u0e13\u0e01\u0e33\u0e25\u0e31\u0e07\u0e43\u0e0a\u0e49\u0e07\u0e32\u0e19\u0e2b\u0e23\u0e37\u0e2d\u0e43\u0e0a\u0e49\u0e07\u0e32\u0e19\u0e44\u0e1b\u0e40\u0e21\u0e37\u0e48\u0e2d\u0e44\u0e21\u0e48\u0e19\u0e32\u0e19\u0e21\u0e32\u0e19\u0e35\u0e49 \u0e40\u0e27\u0e49\u0e19\u0e41\u0e15\u0e48\u0e04\u0e38\u0e13\u0e08\u0e30\u0e1b\u0e34\u0e14\u0e01\u0e32\u0e23\u0e15\u0e31\u0e49\u0e07\u0e04\u0e48\u0e32\u0e43\u0e19\u0e17\u0e38\u0e01\u0e17\u0e35\u0e48\u0e17\u0e35\u0e48\u0e04\u0e38\u0e13\u0e43\u0e0a\u0e49 Messenger \u0e2b\u0e23\u0e37\u0e2d Facebook \u0e04\u0e38\u0e13\u0e08\u0e30\u0e44\u0e21\u0e48\u0e40\u0e2b\u0e47\u0e19\u0e27\u0e48\u0e32\u0e40\u0e1e\u0e37\u0e48\u0e2d\u0e19\u0e41\u0e25\u0e30\u0e1c\u0e39\u0e49\u0e15\u0e34\u0e14\u0e15\u0e48\u0e2d\u0e01\u0e33\u0e25\u0e31\u0e07\u0e43\u0e0a\u0e49\u0e07\u0e32\u0e19\u0e2b\u0e23\u0e37\u0e2d\u0e43\u0e0a\u0e49\u0e07\u0e32\u0e19\u0e44\u0e1b\u0e40\u0e21\u0e37\u0e48\u0e2d\u0e44\u0e21\u0e48\u0e19\u0e32\u0e19\u0e21\u0e32\u0e19\u0e35\u0e49\u0e08\u0e32\u0e01\u0e17\u0e35\u0e48\u0e19\u0e35\u0e48");return b("React").jsxs(b("React").Fragment,{children:[b("React").jsxs("div",{className:"jroqu855 hinttmwx",children:[b("React").jsx("input",{id:"presencePrivacy",type:"checkbox",checked:a,onChange:this.$18}),b("React").jsx("label",{htmlFor:"presencePrivacy",title:c,className:"juxnsli8",children:h._("\u0e41\u0e2a\u0e14\u0e07\u0e40\u0e21\u0e37\u0e48\u0e2d\u0e04\u0e38\u0e13\u0e01\u0e33\u0e25\u0e31\u0e07\u0e43\u0e0a\u0e49\u0e07\u0e32\u0e19")})]}),b("React").jsx("label",{children:c})]})};d.$19=function(){var a=b("VFDesktopHelper").canSetMiniViewEnabled()?b("React").jsx(u,{miniViewEnabled:this.state.miniViewEnabled,onChange:this.$10}):null,c=b("VFDesktopHelper").canSetPushNotificationsEnabled()?b("React").jsx(v,{enabled:this.state.pushNotificationsEnabled,onChange:this.$11}):null;return b("React").jsxs("div",{className:"_7bn2",children:[this.$13(),this.$14(),this.$15(),this.$16(),a,c,this.$17()]})};d.$20=function(){var a=b("VFDesktopHelper").isDesktopApp()?{onClick:function(){return b("VFDesktopHelper").openExternalURL(b("VFRTCConfig").userMediaErrorUrl())}}:{target:"_blank",href:b("VFRTCConfig").userMediaErrorUrl()};return b("React").jsx(b("VFWebText.react"),{style:"body-small",children:b("React").jsx(b("Link.react"),babelHelpers["extends"]({className:"k1z55t6l hn59l83k"},a,{children:h._("\u0e02\u0e2d\u0e23\u0e31\u0e1a\u0e04\u0e27\u0e32\u0e21\u0e0a\u0e48\u0e27\u0e22\u0e40\u0e2b\u0e25\u0e37\u0e2d")}))})};d.render=function(){var a=navigator.platform==="Win32"?l:o;return b("React").jsxs(a,{children:[b("React").jsx(n,{children:b("React").jsx(b("VFWebText.react"),{style:"title-large",children:h._("\u0e01\u0e32\u0e23\u0e15\u0e31\u0e49\u0e07\u0e04\u0e48\u0e32")})}),b("React").jsx(j,{children:this.$19()}),b("React").jsxs(m,{leftContent:this.$20(),children:[b("React").jsx(k,{label:h._("\u0e22\u0e01\u0e40\u0e25\u0e34\u0e01"),onClick:this.$5}),b("React").jsx(k,{disabled:!this.state.dirty,use:"confirm",label:h._("\u0e1a\u0e31\u0e19\u0e17\u0e36\u0e01"),onClick:this.$12})]})]})};return c}(b("React").Component);var p=function(a){a=a.children;return b("React").jsx("div",{className:"eyufkmuh",children:b("React").jsx(b("VFWebText.react"),{style:"title-small",color:"white-50",children:a})})},q={videoinput:"Camera",audioinput:"Microphone",audiooutput:"Audio Output"};function r(a){var c=0,d=a.devices.map(function(a){return b("React").jsx("option",{value:a.deviceId,children:a.label?a.label:h._({"Camera":"\u0e01\u0e25\u0e49\u0e2d\u0e07 {number}","Microphone":"\u0e44\u0e21\u0e42\u0e04\u0e23\u0e42\u0e1f\u0e19 {number}","Audio Output":"\u0e2d\u0e38\u0e1b\u0e01\u0e23\u0e13\u0e4c\u0e40\u0e25\u0e48\u0e19\u0e40\u0e2a\u0e35\u0e22\u0e07\u0e02\u0e32\u0e2d\u0e2d\u0e01 {number}"},[h._enum(q[a.kind],{Camera:"Camera",Microphone:"Microphone","Audio Output":"Audio Output"}),h._param("number",++c)])},a.deviceId)}),e=!1;d.length===0&&(e=!0,d=b("React").jsx("option",{children:h._("\u0e44\u0e21\u0e48\u0e1e\u0e1a\u0e2d\u0e38\u0e1b\u0e01\u0e23\u0e13\u0e4c")},"not-found"));return b("React").jsx("select",{disabled:e,onChange:function(b){return a.onChange(b.target.value)},value:a.value,className:"op9v4316 js4msrqk ggolc4ur iwso50tu f5m7p0br h5fs5mea blljefdq haw9rcua",children:d})}function s(a,b){return b!==null&&a.some(function(a){return a.deviceId===b})?b:a.length>0?a[0].deviceId:null}function t(a){__p&&__p();var b=[],c=[],d=[];for(var a=a,e=Array.isArray(a),f=0,a=e?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(e){if(f>=a.length)break;g=a[f++]}else{f=a.next();if(f.done)break;g=f.value}g=g;switch(g.kind){case"audioinput":b.push(g);break;case"audiooutput":c.push(g);break;case"videoinput":d.push(g);break;default:break}}return{audioInputs:b,audioOutputs:c,videoInputs:d}}function u(a){return b("React").jsxs("div",{className:"laatuukc dmdr2h6l",children:[b("React").jsx("input",{id:"enableMiniView",type:"checkbox",checked:a.miniViewEnabled,onChange:a.onChange}),b("React").jsx("label",{htmlFor:"enableMiniView",className:"juxnsli8",children:h._("\u0e40\u0e1b\u0e34\u0e14\u0e43\u0e0a\u0e49\u0e07\u0e32\u0e19\u0e42\u0e2b\u0e21\u0e14\u0e2b\u0e19\u0e49\u0e32\u0e15\u0e48\u0e32\u0e07\u0e22\u0e48\u0e2d")})]})}function v(a){return b("React").jsxs("div",{className:"laatuukc dmdr2h6l",children:[b("React").jsx("input",{id:"enablePushNotifications",type:"checkbox",checked:a.enabled,onChange:a.onChange}),b("React").jsx("label",{htmlFor:"enablePushNotifications",className:"juxnsli8",children:h._("\u0e40\u0e1b\u0e34\u0e14\u0e43\u0e0a\u0e49\u0e07\u0e32\u0e19\u0e01\u0e32\u0e23\u0e41\u0e08\u0e49\u0e07\u0e40\u0e15\u0e37\u0e2d\u0e19\u0e41\u0e1a\u0e1a\u0e1e\u0e38\u0e0a")})]})}e.exports=b("FluxContainer").create(c)}),null);